!function(){function e(e){this.data={topLocationAdId:"85332167-c7da-46b7-bdeb-bd8a0f976978",bottomLocationAdId:"a55ebec5-6d2a-4315-a2f1-6846becc20d3",iconAdId:"0b00d2d1-186a-11e9-bbc9-0050569f690d"},e&&this.init()}e.prototype={constructor:e,init:function(){$("#box_information .images").after('<div class="imagesBottomLine"></div>'),this.jsonpAdverTopImg(),this.jsonpAdverBottomImg(),this.jsonpAdverIconImg()},jsonpAdverTopImg:function(){var e=this,t=window.tempProInfo;t&&$.ajax({type:"GET",url:PDUtil.getItemDomain()+"/ad/advertising/front/query",data:{mallType:t.mallType,faId:t.faId,adSpaceId:e.data.topLocationAdId,productGroupId:t.productGroupId,goodsCode:window.code},dataType:"jsonp",jsonp:"callback",success:function(t){var i=t.data.result;0!==i.length&&e.addAdverImg("top",i)},error:function(e){PDUtil.debug("invoke adverManage error ------------->")}})},jsonpAdverBottomImg:function(){var e=this,t=window.tempProInfo;t&&$.ajax({type:"GET",url:PDUtil.getItemDomain()+"/ad/advertising/front/query",data:{mallType:t.mallType,faId:t.faId,adSpaceId:e.data.bottomLocationAdId,productGroupId:t.productGroupId,goodsCode:window.code},dataType:"jsonp",jsonp:"callback",success:function(t){var i=t.data.result;0!==i.length&&e.addAdverImg("bottom",i)},error:function(e){PDUtil.debug("invoke adverManage error ------------->")}})},jsonpAdverIconImg:function(){var e=this,t=window.tempProInfo;t&&$.ajax({type:"GET",url:PDUtil.getItemDomain()+"/ad/advertising/front/query",data:{mallType:t.mallType,faId:t.faId,adSpaceId:e.data.iconAdId,productGroupId:t.productGroupId,goodsCode:window.code},dataType:"jsonp",jsonp:"callback",success:function(t){var i=t.data.result;0!==i.length&&e.addAdverImg("rightTop",i)},error:function(e){PDUtil.debug("invoke adverManage error ------------->")}})},addAdverImg:function(e,t){var i,o=this,a=e,n=t,s=$("#box_information"),r=s.find(".images"),c=s.find(".imagesBottomLine");if("top"===a){var l=-1;$.each(n,function(e,t){t.newContentList[0].length>1?(l++,$('<div class="doubleImagesWrap"></div>').insertBefore(r),$.each(t.newContentList[0],function(t,o){10===o.adType&&(i=$('<a target="_blank" id="bannerUrl'+e+"_"+t+'"><img id="bannerImg'+e+"_"+t+'"></img></a>'),$("body").attr("style","overflow-x:hidden"),$(".doubleImagesWrap").eq(l).append(i),$("#bannerUrl"+e+"_"+t).attr("href",o.link),$("#bannerImg"+e+"_"+t).attr("src",o.imgUrl))})):$.each(t.newContentList[0],function(t,o){10===o.adType&&(i=$('<a target="_blank" id="bannerUrl'+e+'"><img id="bannerImg'+e+'"></img></a>'),$("body").attr("style","overflow-x:hidden"),i.insertBefore(r),$("#bannerUrl"+e).attr("href",o.link),$("#bannerImg"+e).attr("src",o.imgUrl))})})}if("bottom"===a){var d=-1;$.each(n,function(e,t){t.newContentList[0].length>1?(d++,$('<div class="doubleImagesBottomWrap"></div>').insertBefore(c),$.each(t.newContentList[0],function(t,o){10===o.adType&&(i=$('<a target="_blank" id="bottomBannerUrl'+e+"_"+t+'"><img class="bottomBannerstyle" id="bottomBannerImg'+e+"_"+t+'"></img></a>'),$("body").attr("style","overflow-x:hidden"),$(".doubleImagesBottomWrap").eq(d).append(i),$("#bottomBannerUrl"+e+"_"+t).attr("href",o.link),$("#bottomBannerImg"+e+"_"+t).attr("src",o.imgUrl))})):$.each(t.newContentList[0],function(t,o){10===o.adType&&(i=$('<a target="_blank" id="bottomBannerUrl'+e+'" class="singleImagesBottomWrap"><img class="bottomBannerstyle" id="bottomBannerImg'+e+'"></img></a>'),$("body").attr("style","overflow-x:hidden"),i.insertBefore(c),$("#bottomBannerUrl"+e).attr("href",o.link),$("#bottomBannerImg"+e).attr("src",o.imgUrl))})})}if("rightTop"===a){var p=$("#detail_left");$.each(n,function(e,t){$.each(t.contentList,function(t,o){10===o.adType&&(i=$('<a href="javascript:;" class="cornerIcon" id="iconBannerUrl'+e+'" target='+(o.link?"_blank":" ")+'><img class="iconBannerstyle" id="iconBannerImg'+e+'"></img></a>'),p.prepend(i),$("#iconBannerUrl"+e).attr("href",o.link),$("#iconBannerImg"+e).attr("src",o.imgUrl))})})}window.addEventListener("resize",o.recalc,!1),o.recalc()},clientAdverManage:function(){return void 0!==window.innerHeight?{width:window.innerWidth,height:window.innerHeight}:"CSS1Compat"===document.compatMode?{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}:{width:document.body.clientWidth,height:document.body.clientHeight}},recalc:function(){var e=parseFloat($p.components.adverManage.clientAdverManage().width),t=0;e<=1920?(t=(1920-e)/2,$(".doubleImagesWrap, .doubleImagesBottomWrap").css("left","-"+t+"px")):$(".doubleImagesWrap, .doubleImagesBottomWrap").css("left",0)}},window.components||(window.components={}),window.components.adverManage=e}(),function(){function e(e,t){this.data={all:[],type:"",checkItemName:{province:$p.addressData.checkItemName.province,city:$p.addressData.checkItemName.city,area:$p.addressData.checkItemName.area},checkItemCode:{provinceCode:$p.addressData.checkItemCode.provinceCode,cityCode:$p.addressData.checkItemCode.cityCode,areaCode:$p.addressData.checkItemCode.areaCode},isHideArrivalTime:!1,isPresellShowArrivalTime:!1,cdtObj:{},arrivalDate:0,sdDeliverDate:"",sdDeliverInfo:""},this.presellObj=$p.presellObj=t||{},this.$container=$("#container_arrivalTime"),this.$box=$("#arrivalTime_cities"),this.$box_city=$("#arrivalTime_city_wrap"),this.$tabsWrap=$("#arrivalTime_city_wrap .tabsWrap"),this.$showArrivalTimeBox=$("#container_arrivalTime .arrivalTimeInfo"),this.$showHoudaBox=$("#container_arrivalTime .xiaoshidaWrap"),e&&this.init()}var t=window.PDUtil;e.prototype={constructor:e,init:function(){var e=this;return 96==$p.baseInfo.salesType&&$p.isBusinessDetail||$p.baseInfo.isCombinedGoods?void e.getSdDeliverDate():($p.isHideArrivalTime=this.data.isHideArrivalTime=0==$p.baseInfo.marketable||98==$p.baseInfo.salesType||1==$p.baseInfo.isIntegral||1==$p.baseInfo.isService&&0==$p.baseInfo.isPhysical||0==$p.baseInfo.isIndependentSale||""==$p.baseInfo.price||0==$p.baseInfo.isShowPrice||!!$p.activity&&5==$p.activity.activityType&&$p.nowNumber>=$p.activity.reservationStartTime&&$p.nowNumber<=$p.activity.reservationEndTime||!!$p.activity&&4==$p.activity.activityType&&$p.nowNumber>=$p.activity.buyStartTime&&$p.nowNumber<$p.activity.activiyStartTime||!!$p.activity&&3==$p.activity.activityType&&$p.nowNumber>=$p.activity.reservationStartTime&&$p.nowNumber<$p.activity.activiyStartTime||!!$p.activity&&2==$p.activity.activityType&&$p.nowNumber<$p.activity.buyStartTime||$p.baseInfo.isCombinedGoods,this.data.isHideArrivalTime?void e.getSdDeliverDate():void((2!=$p.baseInfo.salesType||(!$.isEmptyObject($p.presellObj)&&$p.presellObj.currentdatetime_date>=$p.presellObj.presellstarttime_date&&$p.presellObj.currentdatetime_date<$p.presellObj.activityendtime_date&&1==$p.presellObj.presellway&&e.getSdDeliverDate(function(){var e=t.formatShortDate(t.formatDate($p.presellObj.activityendtime_date.getTime()+24*$p.presellObj.taildeliveryday*60*60*1e3+24*($p.components.arrivalTime.data.arrivalDate||0)*60*60*1e3),1);$("#presell_deliverytime").text(e)}),$p.isPresellShowArrivalTime=this.data.isPresellShowArrivalTime=!$.isEmptyObject(this.presellObj)&&this.presellObj.currentdatetime_date>=this.presellObj.presellstarttime_date&&this.presellObj.currentdatetime_date<this.presellObj.activityendtime_date&&1!=this.presellObj.presellway,this.data.isPresellShowArrivalTime))&&(e.renderAddressDom($p.addressData.checkItemName),setTimeout(function(){e.getArrivalTimeByFa(function(){"7ef1d628-5bd3-4651-9530-793678cc02af"!=faid||!$p.isProActivityBefore||$p.baseInfo.isUpgradeGoods||$p.baseInfo.isCombinedGoods||$p.baseInfo.frontStock>0&&($p.baseInfo.isFroFrontPosition=!0,$p.components.arrivalTime&&$p.components.arrivalTime.checkSpeedUpIcon())}),e.getHoudaByCodeAndShowIcon()},50),e.getProvinceAddressData(function(){e.renderDom(e.data.checkItemCode.provinceCode),e.bindEvent()}),e.getCityAddressData(e.data.checkItemName.province,function(){e.renderDom(e.data.checkItemCode.cityCode)}),e.getAreaAddressData(e.data.checkItemName.province,e.data.checkItemName.city,function(){e.renderDom(e.data.checkItemCode.areaCode)}))))},renderDom:function(e){this.data.all&&this.data.all.length>0&&(e?($("#ArrivalTimeTmpl").tmpl({data:this.data.all,type:this.data.type,value:e}).appendTo(this.$tabsWrap),$(".city_tab_province dd").each(function(e,t){var i=$(t).data("code"),o=$(t).parent().data("value");i==o&&$(t).addClass("active")}),$(".city_tab_city dd").each(function(e,t){var i=$(t).data("code"),o=$(t).parent().data("value");i==o&&$(t).addClass("active")}),$(".city_tab_area dd").each(function(e,t){var i=$(t).data("code"),o=$(t).parent().data("value");i==o&&$(t).addClass("active")})):$("#ArrivalTimeTmpl").tmpl({data:this.data.all,type:this.data.type}).appendTo(this.$tabsWrap),this.$container.removeClass("hidden"))},renderAddressDom:function(e){$p.baseInfo.stock>0&&this.$box.addClass("arrivalTimeInfoTip"),this.$box.find(".province").text(e.province).show(),this.$box.find(".city").text(e.city).show(),this.$box.find(".area").text(e.area).show(),this.$box.find(".country").hide(),this.$tabsWrap.find(".city_tab_title_province").text(e.province).show(),this.$tabsWrap.find(".city_tab_title_city").text(e.city).show(),this.$tabsWrap.find(".city_tab_title_area").text(e.area).show()},bindEvent:function(){function e(){return i.$box_city.hide(),!1}function t(){i.$box_city.show()}var i=this;i.$box.on("mouseenter",function(){return $(this).hasClass("openDialog")&&$(this).removeClass("openDialog"),$(this).find(".arrow").css({transform:"rotate(180deg)"}),t(),!1}),i.$box.on("mouseleave",function(){$(this).hasClass("openDialog")||($(this).find(".arrow").css({transform:"rotate(0deg)"}),e())}),i.$box_city.find(".city_tab_title_province").on("click",function(){i.$box_city.find(".city_tab_province").show().siblings(".city_tab_body").hide(),$(this).addClass("active").siblings("li").removeClass("active")}),i.$box_city.find(".city_tab_title_city").on("click",function(){i.$box_city.find(".city_tab_city").show().siblings(".city_tab_body").hide(),$(this).addClass("active").siblings("li").removeClass("active")}),i.$box_city.find(".city_tab_title_area").on("click",function(){i.$box_city.find(".city_tab_area").show().siblings(".city_tab_body").hide(),$(this).addClass("active").siblings("li").removeClass("active")}),$(".arrivalTimeInfo").delegate(".frontPositionTip,.frontPositionPresellTip","mouseenter mouseleave",function(e){"mouseenter"==e.type?$(".frontPositionInfo").show():"mouseleave"==e.type&&$(".frontPositionInfo").hide()}),i.$box_city.delegate(".city_tab_province dd","click",function(){if(!i.$box_city.provinceFlag){var e="请选择",t=$(this),o=$("#arrivalTime_city_wrap .city_tab_title_province"),a=$("#arrivalTime_city_wrap .city_tab_title_city"),n=i.data.checkItemName.province=t.attr("data-name"),s=i.data.checkItemCode.provinceCode=t.attr("data-code");i.$box_city.provinceFlag=!0,t.addClass("active").siblings().removeClass("active"),o.removeClass("active").attr({"data-name":n,"data-code":s}).text(n),a.addClass("active").show().text(e),$(".city_tab_title_province").siblings().text("请选择"),i.getCityAddressData(n,function(){$("#arrivalTime_city_wrap .city_tab_city, #arrivalTime_city_wrap .city_tab_area").remove(),i.renderDom(),i.$box.addClass("openDialog"),i.$box_city.find(".city_tab_province").hide(),i.$box_city.find(".city_tab_city").show(),i.$box_city.provinceFlag=!1})}}),i.$box_city.delegate(".city_tab_city dd","click",function(){if(!i.$box_city.cityFlag){var e="请选择",t=$(this),o=$("#arrivalTime_city_wrap .city_tab_title_city"),a=$("#arrivalTime_city_wrap .city_tab_title_area"),n=i.data.checkItemName.city=t.attr("data-name"),s=i.data.checkItemCode.cityCode=t.attr("data-code");i.$box_city.cityFlag=!0,t.addClass("active").siblings().removeClass("active"),o.removeClass("active").attr({"data-name":n,"data-code":s}).text(n),a.show().addClass("active").text(e),$(".city_tab_title_area").text("请选择"),i.getAreaAddressData(i.data.checkItemName.province,n,function(){$("#arrivalTime_city_wrap .city_tab_area").remove(),i.renderDom(),i.$box.addClass("openDialog"),i.$box_city.find(".city_tab_city").hide(),i.$box_city.find(".city_tab_area").show(),i.$box_city.cityFlag=!1})}}),i.$box_city.on("click",".city_tab_area dd",function(){var t=$(this),o=$("#arrivalTime_city_wrap .city_tab_title_area"),a=i.data.checkItemName.area=t.attr("data-name"),n=i.data.checkItemCode.areaCode=t.attr("data-code"),s={provinceCode:i.data.checkItemCode.provinceCode,cityCode:i.data.checkItemCode.cityCode,areaCode:i.data.checkItemCode.areaCode,provinceName:i.data.checkItemName.province,cityName:i.data.checkItemName.city,areaName:i.data.checkItemName.area};$p.addressData.checkItemName.province=i.data.checkItemName.province,$p.addressData.checkItemCode.provinceCode=i.data.checkItemCode.provinceCode,$p.addressData.checkItemName.city=i.data.checkItemName.city,$p.addressData.checkItemCode.cityCode=i.data.checkItemCode.cityCode,$p.addressData.checkItemName.area=i.data.checkItemName.area,$p.addressData.checkItemCode.areaCode=i.data.checkItemCode.areaCode,t.addClass("active").siblings().removeClass("active"),o.attr({"data-name":a,"data-code":n}).text(a),i.$box.find(".address span.province").text(i.data.checkItemName.province),i.$box.find(".address span.city").text(i.data.checkItemName.city),i.$box.find(".address span.area").text(i.data.checkItemName.area),i.$box.find(".address span.country").hide(),i.$box.removeClass("openDialog");try{var r=$("#arrivalTime_cities .province").text()+$("#arrivalTime_cities .city").text()+$("#arrivalTime_cities .area").text(),c={active_type:"点击配送地址",active_series:"",active_value:r},l=$.extend(c,window.$p.public_obj);sensors2022_05_16.track("GoodsDetailActive",l)}catch(e){console.log(e)}if(i.setDefaultAddressData(s),$p.addressData.ipLocated=!1,"7ef1d628-5bd3-4651-9530-793678cc02af"!=faid||!$p.isProActivityBefore||$p.baseInfo.isUpgradeGoods||$p.baseInfo.isCombinedGoods)i.getArrivalTimeByFa();else{var d=$p.components.srdz&&!!$p.components.srdz.getdz()||$p.components.srdz&&2==$p.components.srdz.upload_type,p=$p.dealAddressJson();$p.loadFrontStock(p,d,null,null,function(){$p.baseInfo.frontStock>=$p.buyProNumber&&($p.baseInfo.isFroFrontPosition=!0),i.getArrivalTimeByFa(function(){$p.components.arrivalTime&&$p.components.arrivalTime.checkSpeedUpIcon.call(this,$p.buyProNumber)})})}return e(),!1})},getProvinceAddressData:function(e){var t=this;$p.loadMyProvinceAddress(function(i,o){1==i.success&&0==i.resultCode&&(t.data.all=i.t||[],t.data.type=o,e&&e())})},getCityAddressData:function(e,t){var i=this;$p.loadMyCityAddress(e,function(e,o){1==e.success&&0==e.resultCode&&(i.data.all=e.t||[],i.data.type=o,t&&t())})},getAreaAddressData:function(e,t,i){var o=this;$p.loadMyRegionAddress(e,t,function(e,t){1==e.success&&0==e.resultCode&&(o.data.all=e.t||[],o.data.type=t,i&&i())})},getDefaultAddressData:function(e){var t=this;passport&&passport.isLogin&&passport.isLogin()?$p.loadDefaultAddress(function(i){if(1==i.success&&0==i.resultCode&&i.t){var o=i.t;t.data.checkItemCode.provinceCode=o.provinceNo,t.data.checkItemName.province=o.provinceCode,t.data.checkItemCode.cityCode=o.cityNo,t.data.checkItemName.city=o.cityCode,t.data.checkItemCode.areaCode=o.countyNo,t.data.checkItemName.area=o.countyCode,t.renderAddressDom(o),t.getArrivalTimeByFa(),e&&e(1)}else e&&e()}):e&&e()},setDefaultAddressData:function(e,i){var o=$.extend({optType:"0"},e);passport&&passport.isLogin&&passport.isLogin()?o.lenovoId=passport.cookie.lenovoId:o.lenovoId=t.getCookie("leid"),$p.loadDefaultPsAddress(o,function(e){1==e.success&&0==e.resultCode||layer.msg(e.resultMsg),i&&i()})},getHoudaByCodeAndShowIcon:function(e){var t=this;if($p.baseInfo.isXiaoshida&&($p.isSupportXiaoshida=$p.components.bxzp&&0==$p.components.bxzp.data.all.length&&!$p.baseInfo.isCombinedGoods&&!$p.baseInfo.isUpgradeGoods&&!$p.baseInfo.isIntegral&&2!=$p.baseInfo.salesType&&!iskcode&&(!$p.activity||!!$p.activity&&5!=$p.activity.activityType),$p.isSupportXiaoshida)){var i={code:window.code};$p.loadHoudaData(i,function(e){if(0==e.status&&e.result&&e.result.code&&e.result.code&&e.result.code[window.code]){var i="https://mclub.lenovo.com.cn/downloadapp?ru="+window.location.href;t.$showHoudaBox.show().find(".xiaoshidaQrCodeImg").qrcode({width:120,height:120,text:i}),t.$showHoudaBox.hover(function(){t.$showHoudaBox.find(".xiaoshida_sanjiaoIcon").addClass("hoverIcon").end().find(".xiaoshidaQrCodeBox").show()},function(){t.$showHoudaBox.find(".xiaoshida_sanjiaoIcon").removeClass("hoverIcon").end().find(".xiaoshidaQrCodeBox").hide()}),$(".toAppLoad").hide()}})}},getSdDeliverDate:function(e,t){try{var i=this,o=$p.components.srdz&&!!$p.components.srdz.getdz()||$p.components.srdz&&2==$p.components.srdz.upload_type,a={provinceCode:i.data.checkItemCode.provinceCode,provinceName:i.data.checkItemName.province,productCode:code,cityCode:i.data.checkItemCode.cityCode,cityName:i.data.checkItemName.city,areaCode:i.data.checkItemCode.areaCode,areaName:i.data.checkItemName.area,salesType:$p.baseInfo.salesType,buynum:1,personalMake:!!o,independSku:$p.baseInfo.isIndependentStock};$p.components.srdz&&2==$p.components.srdz.upload_type&&(a.customPic=!0),$p.baseInfo.isUpgradeGoods&&(a.upgradeService=!0),$p.loadArrivalTime(a,function(t){1==t.success&&t.t&&(i.getArrivalDate(i.data,t.t),e&&e())},t)}catch(e){}},getArrivalDate:function(e,t){var i=this;t&&(i.data.cdtObj=t);var e=e||$p.components&&$p.components.arrivalTime&&$p.components.arrivalTime.data,t=t||$p.components&&$p.components.arrivalTime&&$p.components.arrivalTime.data.cdtObj;$p.components.srdz&&($p.components.srdz.getdz()||2==$p.components.srdz.upload_type)&&$p.baseInfo.isUpgradeGoods?e.arrivalDate=e.sdDeliverDate=t&&t.upgradePersonalMakeDays?t.upgradePersonalMakeDays:"5":$p.components.srdz&&2==$p.components.srdz.upload_type?e.arrivalDate=e.sdDeliverDate=t&&t.customDeliveryDays?t.customDeliveryDays:"5":$p.components.srdz&&$p.components.srdz.getdz()?e.arrivalDate=e.sdDeliverDate=t&&t.deliveryDays?t.deliveryDays:"5":$p.baseInfo.isUpgradeGoods?(e.arrivalDate=t&&t.upgradeDeliveryDays?t.upgradeDeliveryDays:"3",e.sdDeliverDate=t&&t.deliveryDays?t.deliveryDays:"5"):(e.arrivalDate=0,e.sdDeliverDate=t&&t.deliveryDays?t.deliveryDays:"5"),e.sdDeliverInfo=t&&t.deliveryTime?t.deliveryTime:t},getArrivalTimeByFa:function(e){var t=$p.components.srdz&&!!$p.components.srdz.getdz()||$p.components.srdz&&2==$p.components.srdz.upload_type,i=$p.components.bxzp.data.all.length>0||$p.components.kxzp.data.selectedArray.length>0,o=$p.components.tjxj&&$p.components.tjxj.data.selectedArray.length>0,a=$p.components.srdz&&$p.components.service.data.selectedArray.length>0||!1;if("7ef1d628-5bd3-4651-9530-793678cc02af"==faid&&$p.isProActivityBefore&&!$p.baseInfo.isUpgradeGoods&&!$p.baseInfo.isCombinedGoods){if($p.components.arrivalTime.$box.addClass("arrivalTimeInfoTip"),t||i||o||a){if($p.proStockByOptions=!0,$p.baseInfo.stock=$p.baseInfo.salesStock,0==$p.baseInfo.salesStock)return $("#container_arrivalTime .arrivalTimeInfo").addClass("arrivalTimeNoStockTip").text("无货，请更换其他配送地址"),$("#arrivalTime_cities").addClass("noStockArea"),$(".frontPositionTip, .frontPositionPresellTip").remove(),$p.components.couponCard&&"undefined"!=typeof $p.components.couponCard.data.couponObj.bestCouponId&&$p.components.couponCard.data.couponObj.bestCouponId?$p.components.couponCard.cancelBestPriceBtn():$p.components.buygroup.setBuyButton("已售罄",!0),$("#jrgwc").hide(),$("#button_dhtz").show(),void $p.components.arrivalTime.getSdDeliverDate()}else{if($p.proStockByOptions=!1,$p.baseInfo.stock=$p.baseInfo.salesStock+$p.baseInfo.frontStock,$p.baseInfo.salesStock<$p.baseInfo.frontStock&&$p.baseInfo.salesStock<$p.buyProNumber&&$p.baseInfo.frontStock>=$p.buyProNumber)return $p.components.arrivalTime.dealGetArrivalTimeByFa($p.components.arrivalTime.dealFrontStockArrivalTime(),t),$("#arrivalTime_cities").removeClass("noStockArea"),e&&e(),void $p.components.arrivalTime.getSdDeliverDate();if(0==$p.baseInfo.salesStock&&0==$p.baseInfo.frontStock)return $("#container_arrivalTime .arrivalTimeInfo").addClass("arrivalTimeNoStockTip").text("无货，请更换其他配送地址"),$("#arrivalTime_cities").addClass("noStockArea"),$(".frontPositionTip, .frontPositionPresellTip").remove(),$p.components.couponCard&&"undefined"!=typeof $p.components.couponCard.data.couponObj.bestCouponId&&$p.components.couponCard.data.couponObj.bestCouponId?$p.components.couponCard.cancelBestPriceBtn():$p.components.buygroup.setBuyButton("已售罄",!0),$("#jrgwc").hide(),$("#button_dhtz").show(),void $p.components.arrivalTime.getSdDeliverDate()}$("#arrivalTime_cities").removeClass("noStockArea")}if(0==$p.baseInfo.stock)return $p.components.couponCard&&"undefined"!=typeof $p.components.couponCard.data.couponObj.bestCouponId&&$p.components.couponCard.data.couponObj.bestCouponId&&$p.components.couponCard.cancelBestPriceBtn(),void $p.components.arrivalTime.getSdDeliverDate();if(($p.baseInfo.isUpgradeGoods||t)&&2!=$p.baseInfo.salesType)return void $p.components.arrivalTime.getSdDeliverDate(function(){var e="";$p.baseInfo.isUpgradeGoods&&t||t?(e="16:00点前完成下单，预计5个工作日内发货",$("#container_arrivalTime .arrivalTimeInfo").removeClass("arrivalTimeNoStockTip").text($p.components.arrivalTime.data.sdDeliverInfo?$p.components.arrivalTime.data.sdDeliverInfo:e)):$p.baseInfo.isUpgradeGoods&&(e="16:00点前完成下单，预计3个工作日内发货",$("#container_arrivalTime .arrivalTimeInfo").removeClass("arrivalTimeNoStockTip").text($p.components.arrivalTime.data.sdDeliverInfo?$p.components.arrivalTime.data.sdDeliverInfo:e)),$(".frontPositionTip, .frontPositionPresellTip").remove()});var n={provinceCode:$p.components.arrivalTime.data.checkItemCode.provinceCode,provinceName:$p.components.arrivalTime.data.checkItemName.province,productCode:code,cityCode:$p.components.arrivalTime.data.checkItemCode.cityCode,cityName:$p.components.arrivalTime.data.checkItemName.city,areaCode:$p.components.arrivalTime.data.checkItemCode.areaCode,areaName:$p.components.arrivalTime.data.checkItemName.area,salesType:$p.baseInfo.salesType,buynum:$p.buyProNumber,personalMake:!!t,independSku:$p.baseInfo.isIndependentStock},s=new Date($p.nowNumber).getMonth()+1,r=new Date($p.nowNumber).getDate();if(""!=$p.baseInfo.faType&&0!=$p.baseInfo.faType&&3!=$p.baseInfo.faType||$p.baseInfo.isCombinedGoods){if($p.isPresellShowArrivalTime)$p.components.arrivalTime.getPresellArrivalTimeByFa("",t);else{var c=$(".installment-dropdown-wrapper.checked");if(""!==c.find(".installment-info span").text()&&c.find(".installment-info span").text().indexOf("选择分期")===-1)return!1;window.$p.buyNowEstimateButton(),$("#container_arrivalTime .arrivalTimeInfo").removeClass("arrivalTimeNoStockTip").text("16:00前完成下单，预计今天（"+s+"月"+r+"日）发货")}$p.components.arrivalTime.getSdDeliverDate()}else $p.components.srdz&&2==$p.components.srdz.upload_type&&(n.customPic=!0,n.personalMake=!0),$p.baseInfo.isUpgradeGoods&&(n.upgradeService=!0),$p.loadArrivalTime(n,function(i){if(1==i.success){var o=i.t&&i.t.deliveryTime?i.t.deliveryTime:i.t;$p.components.arrivalTime.getArrivalDate($p.components.arrivalTime.data,i.t),$p.components.arrivalTime.dealGetArrivalTimeByFa(o,t)}else $("#container_arrivalTime .arrivalTimeInfo").text("该区域暂时无货"),$(".frontPositionTip, .frontPositionPresellTip").remove(),$p.components.couponCard&&"undefined"!=typeof $p.components.couponCard.data.couponObj.bestCouponId&&$p.components.couponCard.data.couponObj.bestCouponId?$p.components.couponCard.cancelBestPriceBtn():$p.components.buygroup.setBuyButton("已售罄",!0),$("#jrgwc").hide(),$("#button_dhtz").hide();e&&e()})},getPresellArrivalTimeByFa:function(e,i){var o=new Date($p.presellObj.activityendtime.replace(/-/g,"/")).getFullYear(),a=new Date($p.presellObj.activityendtime.replace(/-/g,"/")).getMonth()+1,n=new Date($p.presellObj.activityendtime.replace(/-/g,"/")).getDate(),s=new Date(new Date($p.presellObj.activityendtime.replace(/-/g,"/"))-0+24*$p.presellObj.taildeliveryday*60*60*1e3+(e?60*parseFloat(e)*60*1e3:0)),r=s.getFullYear(),c=s.getMonth()+1,l=s.getDate(),d="",p="",u=0;$p.baseInfo.isUpgradeGoods&&i?u=5:i?u=5:$p.baseInfo.isUpgradeGoods&&(u=3),$p.components.arrivalTime.getArrivalDate($p.components.arrivalTime.data,$p.components.arrivalTime.data.cdtObj),u=$p.components.arrivalTime.data.arrivalDate,d=new Date($p.presellObj.activityendtime.replace(/-/g,"/")).getTime()>new Date(o+"/"+a+"/"+n+" 16:00:00").getTime()?t.formatShortDate(t.formatDate(new Date($p.presellObj.activityendtime.replace(/-/g,"/"))-0+864e5),0):t.formatShortDate(t.formatDate(new Date($p.presellObj.activityendtime.replace(/-/g,"/"))-0),0),p=s.getTime()>new Date(r+"/"+c+"/"+l+" 20:00:00").getTime()?t.formatShortDate(t.formatDate(new Date($p.presellObj.activityendtime.replace(/-/g,"/"))-0+24*$p.presellObj.taildeliveryday*60*60*1e3+24*u*60*60*1e3+(e?60*(parseFloat(e)+24)*60*1e3:864e5)),0):t.formatShortDate(t.formatDate(new Date($p.presellObj.activityendtime.replace(/-/g,"/"))-0+24*$p.presellObj.taildeliveryday*60*60*1e3+24*u*60*60*1e3+(e?60*parseFloat(e)*60*1e3:0)),0),$("#container_arrivalTime .arrivalTimeInfo").removeClass("arrivalTimeNoStockTip").text(d+"16:00前完成支付尾款，预计（"+p+"）发货")},checkSpeedUpIcon:function(e){var t=e||0,i=$p.components.srdz&&!!$p.components.srdz.getdz()||$p.components.srdz&&2==$p.components.srdz.upload_type,o=$p.components.bxzp.data.all.length>0||$p.components.kxzp.data.selectedArray.length>0,a=$p.components.tjxj&&$p.components.tjxj.data.selectedArray.length>0,n=$p.components.srdz&&$p.components.service.data.selectedArray.length>0||!1;return $p.baseInfo.frontStock<t||0==$p.baseInfo.frontStock?void $(".frontPositionTip, .frontPositionPresellTip").remove():void(i||o||a||n||!$p.baseInfo.isFroFrontPosition?$(".frontPositionTip, .frontPositionPresellTip").remove():($(".frontPositionTip, .frontPositionPresellTip").remove(),2==$p.baseInfo.salesType?$(".arrivalTimeInfo").append('<div class="frontPositionPresellTip"><div class="frontPositionInfo">11:00前完成支付尾款，支持当日送达</div></div>'):$(".arrivalTimeInfo").append('<div class="frontPositionTip"><div class="frontPositionInfo">极速达服务，当日11:00前完成下单，支持当日送达</div></div>')))},dealGetArrivalTimeByFa:function(e,t){if($p.isPresellShowArrivalTime)$p.components.arrivalTime.getPresellArrivalTimeByFa(e,t),$p.baseInfo.stock>0?($p.components.buygroup.setBuyButton("支付定金",!1).off("click"),$p.components.buygroup.setBuyButtonClickHandler(),$("#button_dhtz").hide()):($p.components.buygroup.setBuyButton("已售罄",!0),$("#button_dhtz").show());else{if($p.activity?2==$p.activity.activityType?$p.components.title.setShangou():3==$p.activity.activityType?$p.components.title.setYuyueQg():4==$p.activity.activityType?$p.components.title.setShangouTimer():5==$p.activity.activityType&&$p.components.title.setYuyue():($p.components.buygroup.refreshBuyButton(),window.$p.buyNowEstimateButton(),$p.baseInfo.isCombinedGoods||$p.baseInfo.isUpgradeGoods?$("#jrgwc").unbind().hide():$p.components.buygroup.__initShoppingcartButton(),$("#button_dhtz").hide()),($p.baseInfo.isUpgradeGoods||t)&&2!=$p.baseInfo.salesType)return void $p.components.arrivalTime.getSdDeliverDate(function(){var e="";$p.baseInfo.isUpgradeGoods&&t||t?(e="16:00点前完成下单，预计5个工作日内发货",$("#container_arrivalTime .arrivalTimeInfo").removeClass("arrivalTimeNoStockTip").text($p.components.arrivalTime.data.sdDeliverInfo?$p.components.arrivalTime.data.sdDeliverInfo:e)):$p.baseInfo.isUpgradeGoods&&(e="16:00点前完成下单，预计3个工作日内发货",$("#container_arrivalTime .arrivalTimeInfo").removeClass("arrivalTimeNoStockTip").text($p.components.arrivalTime.data.sdDeliverInfo?$p.components.arrivalTime.data.sdDeliverInfo:e)),$(".frontPositionTip, .frontPositionPresellTip").remove()});$("#container_arrivalTime .arrivalTimeInfo").removeClass("arrivalTimeNoStockTip").text(e)}($p.baseInfo.isCombinedGoods||$p.baseInfo.isUpgradeGoods)&&$("#jrgwc").unbind().hide()},dealFrontStockArrivalTime:function(){var e="",t=0,i=0;if(2==$p.baseInfo.salesType&&$p.isPresellShowArrivalTime)return e="0";var o=new Date($p.nowNumber).getFullYear(),t=new Date($p.nowNumber).getMonth()+1,a=new Date($p.nowNumber).getDate();return $p.nowNumber<new Date(o+"/"+t+"/"+a+" 11:00")?e="今日上午11:00前下单，预计可今日送达":(t=new Date($p.nowNumber+864e5).getMonth()+1,i=new Date($p.nowNumber+864e5).getDate(),e=t+"月"+i+"日上午11:00前下单，预计"+t+"月"+i+"日可送达"),e}},window.components||(window.components={}),window.components.ArrivalTime=e}(),function(){function e(e){this.data={},this.$ppicture=$("#ppicture"),this.$button_open=$("#ppicture_open"),this.$button_close=$("#ppicture_close"),this.$button_up=$("#ppicture_up"),this.$button_down=$("#ppicture_down"),this.$div_checked=this.$ppicture.find("div.pp-checked"),this.$ul=$("#ppscroll_ul"),this.maxShowNumber=4,this.currentIndex=1,this.windowIndex=1,this.page=1,this.totalPage=1,this.totalCount=0,e&&this.init()}e.prototype={constructor:e,init:function(){$(window).height()>=850&&this.$ppicture.addClass("ppicture-800"),this.__initCount(),this.bindEvent()},__initCount:function(){this.totalCount=this.$ul.find(">li").length,this.totalCount==this.maxShowNumber?this.totalPage=1:this.totalPage=parseInt(this.totalCount/this.maxShowNumber)+1},bindEvent:function(){var e=this;this.$button_open.on("click",function(){$("html, body").css("overflow","hidden"),e.$ppicture.show()}),this.$button_close.on("click",function(){$("html, body").css("overflow","auto"),e.$ppicture.hide()}),this.$ul.on("click","li",function(){var t=$(this),i=parseInt(t.attr("data-index"));e.showWithIndex(i)}),this.$button_up.on("click",function(){return!(e.currentIndex<=1)&&void(1==e.windowIndex?e.gotoPrevPage():e.showWithIndex(e.currentIndex-1))}),this.$button_down.on("click",function(){return!(e.currentIndex>=e.totalCount)&&void(e.windowIndex==e.maxShowNumber?e.gotoNextPage():e.showWithIndex(e.currentIndex+1))})},renderPicture:function(e){if(e&&e instanceof Array&&e.length>0){e[0]&&e[0].src&&$("#winpic").attr("src",e[0].src);for(var t="",i=0;i<e.length;i++)t+='<li data-index="'+(i+1)+'"><a href="javascript:;"><img src="'+e[i].src+'" alt="'+(e[i].name||"")+'"></a></li>';this.$ul.empty().append(t),this.__initCount(),this.showWithIndex(1)}},showWithIndex:function(e){var t=this.$ul.find("li").eq(e-1);this.currentIndex=e,this.getWindowIndex(),this.setCheckImage(),this.showBigImage(t.find("img").first().attr("src"))},gotoNextPage:function(){return!(this.page>=this.totalPage)&&(this.$ul.css("top","-="+110*this.maxShowNumber),this.page++,void this.showFirstImage())},gotoPrevPage:function(){return!(this.page<=1)&&(this.$ul.css("top","+="+110*this.maxShowNumber),this.page--,void this.showMaxImage())},showBigImage:function(e){var t=this.$ppicture.find(".pp-right img.show"),i=this.$ppicture.find(".pp-right img.normal"),o=this.getBigPicSrc(e);t.removeClass("show").addClass("normal"),i.attr("src",o).removeClass("normal").addClass("show")},getBigPicSrc:function(e){var t=this.$ppicture.hasClass("ppicture-800")?800:650,i=e.replace(/w\d{2,3}\.(jpg|png|jpeg)$/gi,"w"+t+".$1");return i},getWindowIndex:function(){return this.windowIndex=this.currentIndex-(this.page-1)*this.maxShowNumber},setCheckImage:function(){this.$div_checked.css("top",110*(this.windowIndex-1)+10)},showFirstImage:function(){this.currentIndex=(this.page-1)*this.maxShowNumber+1;var e=this.$ul.find("li").eq(this.currentIndex-1);this.getWindowIndex(),this.setCheckImage(),this.showBigImage(e.find("img").first().attr("src"))},showMaxImage:function(){this.currentIndex=this.page*this.maxShowNumber;var e=this.$ul.find("li").eq(this.currentIndex-1);this.getWindowIndex(),this.setCheckImage(),this.showBigImage(e.find("img").first().attr("src"))}},1==PDUtil.isRunInNode()&&module&&module.exports?module.exports=e:(window.components||(window.components={}),window.components.BigPicture=e)}(),function(e){function t(e){this.data={all:[]},this.$shownZengpin=$(".coupon-popup-zp .coupon-popup-zp-imgs"),this.$showPopDialog=$(".zp-text"),this.$box=$("#div_zengpin"),this.$box_kxzp=$("#div_kexuan"),e&&this.init()}t.prototype={constructor:t,init:function(){try{if(96==$p.baseInfo.salesType&&$p.isBusinessDetail)return;this.getAllData(),this.renderDom(),this.bindEvent()}catch(t){e.warn("必选赠品组件=> init方法错误 ---------->"),e.warn(t)}},renderDom:function(t){try{var i=this,o=window.$p,a=t||this.data.all,n="",s="";
if(a.length>0){n+='<span class="coupon-zp-title">赠品</span><div class="selectedImgs">';for(var r=0;r<a.length;r++){var c=a[r],l=o.promotion.goodsDetailUrl&&o.promotion.goodsDetailUrl[c.code]||"/product/"+c.code+".html";n+='<img src="'+c.path+'" alt="">',s+=o.isComposeProduct?'<div class="coupon-zp-img checked bixuan" style="background: url('+c.path+') no-repeat;background-size: 100% 100%;" url_src="'+c.path+'"><div class="is_checked"></div><div class="zp-details"><div class="zp-title">'+c.goodsName+'</div><a class="look-zp-details" target="_blank" href="'+l+'" latag="latag_pc_detail_top_组合详情_null_'+l+'"><span>详情</span><i></i></a></div></div>':'<div class="coupon-zp-img checked bixuan"  style="background: url('+c.path+') no-repeat;background-size: 100% 100%;" url_src="'+c.path+'"><div class="is_checked"></div><div class="zp-details"><div class="zp-title">'+c.goodsName+'</div><a class="look-zp-details" target="_blank" href="'+l+'" latag="latag_pc_detail_top_赠品详情_null_'+l+'"><span>详情</span><i></i></a></div></div>'}n+="</div>"}n.length>0&&(o.baseInfo.couponIconNum++,$(".coupon-zp").append(n).addClass("couponInlineblock").attr("latag","latag_pc_detail_top_null_赠品_"+window.code),$(".coupon-look-detail").addClass("couponInlineblock"),$("#couponbox").show()),s.length>0&&(0==$("#coupon-layer-new-wrap .coupon-popup-zp").length&&($("#coupon-layer-new-wrap .estimated-delivery-price-div").length>0&&$("#coupon-layer-new-wrap .rule-description").length>0?$("#coupon-layer-new-wrap .rule-description").before('<div class="coupon-popup-zp"><div class="coupon-popup-zp-title">赠品</div><div class="coupon-popup-zp-imgs"></div></div>'):$("#coupon-layer-new-wrap .coupon-popup-cont").append('<div class="coupon-popup-zp"><div class="coupon-popup-zp-title">赠品</div><div class="coupon-popup-zp-imgs"></div></div>')),$(".coupon-popup-zp-imgs").append(s),0==$(".coupon-popup-zp-imgs .zp-text").length&&($(".coupon-popup-zp-imgs").append('<div class="zp-text">赠完为止</div>'),$(".coupon-popup-zp-imgs .zp-text").prev().css("margin-right","0"))),o.isComposeProduct||i.$showPopDialog.text("赠完为止"),$(".uparrow-u").hide()}catch(t){e.warn("必选赠品组件=> renderDom方法错误 --------->"),e.warn(t)}},bindEvent:function(){var e=this,t=0,i=40,o="";e.$shownZengpin.on("mouseenter",".gift-item-box",function(e){o=$(this).attr("data-title"),$("body").append('<div id="mytitle" >'+o+'<div class="arrow-wrap pop-tips"><div class="up-arrow pre-arrow"></div><div class="up-arrow curr-arrow"></div></div></div>'),$("#mytitle").css({left:$(this).offset().left+t+"px",top:$(this).offset().top+i+"px","z-index":2}).show()}).on("mouseleave",".gift-item-box",function(){$("#mytitle").remove()}),$(".coupon-popup-title .layer-close-icon").on("click",function(){layer.closeAll()}),$("#coupon-layer-new-wrap").on("mouseenter mouseleave",".coupon-zp-img",function(e){var t=$(this);"mouseenter"==e.type?t.find(".zp-details").show():"mouseleave"==e.type&&t.find(".zp-details").hide()}),$("#coupon-layer-new-wrap").on("click",".coupon-popup-zp-imgs .coupon-zp-img.bixuan",function(){try{var e={page_name:"商品详情页",area_name:"赠品",is_banner:!1,is_recommend:!1,recommend_tactics:"",goods_pay_prc:0,goods_unit_prc:0,plat_form_prc:0},t=$.extend(e,window.$p.goods_click);sensors2022_05_16.track("GoodsClick",t)}catch(e){console.log(e)}})},getAllData:function(){var e=window.$p.processBXZPNeedShowList();return this.data.all=e,e}},window.components||(window.components={}),window.components.BiXuanZengPin=t}(window.PDUtil),function(e){function t(e){this.data={},this.$container=$("#container_buygroup"),this.$button_buy=$(".button-pay"),this.$button_notice=$("#dhtz"),this.$button_shoppingcart=$("#jrgwc"),this.$span_stock=$("#span_stock_dec"),this.$box_ewm=$("#box_ewm"),e&&this.init()}function i(e,t,i){$p.jsonpBuyBefore(e,t,i)}t.prototype={constructor:t,init:function(){try{if(this.$button_buy.attr("latag","latag_pc_detail_bottom_fixed_orderimmediately_"+window.code),this.$button_shoppingcart.attr("latag","latag_pc_detail_bottom_fixed_addshopcart_"+window.code),this.__initEWM(),this.__initSNCode(),this.__initPrice(),this.__initBuyButton(),this.__initShoppingcartButton(),this.updateGouMaiZiXunUrl(),""===window.$p.baseInfo.price)return;var t=$p.nowNumber;if($p.activity&&$p.activity.flashYyJson){var i=$p.activity.flashYyJson;if(t>i.yystartNumber&&t<i.yyendNumber)return}else if($p.activity&&$p.activity.YuYue){var o=$p.activity.YuYue;if(t>o.yystartNumber&&t<o.yyendNumber)return}this.__initNoticeButton(),$p.baseInfo.stock<=0&&0!=$p.baseInfo.isPhysical&&!$p.isShowYuyue()?$("#button_dhtz").show():$("#button_dhtz").hide(),96==$p.baseInfo.salesType&&$p.isBusinessDetail&&$("#button_dhtz").hide(),96==$p.baseInfo.salesType&&$p.isBusinessDetail||this.__initStandardBiddingButton(),this.__initDeliveryPrice(),this.bindEvent()}catch(t){e.warn("BuyGroup组件=> init方法错误------------>"),e.warn(t)}},__initBuyButton:function(){this.refreshBuyButton()},refreshBuyButton:function(){var e=window.$p.processBuyButton(),t=e.isDisabled?null:d;this.setBuyButton(e.showText,e.isDisabled,t),e.isShow?this.$button_buy.show():this.$button_buy.hide(),!e.isDisabled&&window.$p.baseInfo.stock>0&&this.$span_stock.text("有库存"),window.$p.baseInfo.waterLevelDesc&&this.$span_stock.text(window.$p.baseInfo.waterLevelDesc)},__initNoticeButton:function(){__detailConfig.getApiPath("sendsms");this.$button_notice=$('<div class="button button-pay" id="button_dhtz">到货通知</div>'),$("#ljgm").after(this.$button_notice),this.$button_notice.on("click",function(){function t(){var i=/^1[3456789]\d{9}$/,o=window.$.trim($("#notice_phoneNumber").val()),a=e.getCookie("leid");return""==o?(layer.msg("请输入手机号"),!1):i.test(o)?void window.$p.jsonpNoticeSendSms({mobile:o,leId:a,vcode:$("#dhnotice-code").val()},function(e){if(1==e.success){var i=119;$("#notice_getVerificationCode").off("click").text("已发送(120)");var o=setInterval(function(){$("#notice_getVerificationCode").text("已发送("+i+")"),0==i&&($("#notice_getVerificationCode").off("click").on("click",t).text("获取验证码"),clearInterval(o)),i--},1e3)}else layer.msg(e.resultMsg)}):(layer.msg("请输正确的手机号"),!1)}layer.open({type:1,skin:"dhtz-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["550px","557px"],move:!1,content:$("#promotion_popdialog_wrap")}),$("#promotion_popdialog_wrap .goBack").off("click").on("click",function(){layer.closeAll()}),$("#clear_phonenum_btn").off("click").on("click",function(){$("#notice_phoneNumber").val("")}),$("#dhnotice-img").off("click").on("click",function(){$("#dhnotice-img").attr("src",__detailConfig.getApiPath("imgValidUrl")+"?ss="+(new Date).valueOf())}),$("#dhnotice-img").attr("src",__detailConfig.getApiPath("imgValidUrl")),$("#notice_getVerificationCode").off("click").on("click",t);var i=1;$("#notice_savePhoneNumber").off("click").on("click",function(){if(0!=i){i=0;var t=window.$.trim($("#notice_verificationCode").val());if(""==t)return i=1,void layer.msg("请输入验证码");var o=window.$.trim($("#notice_phoneNumber").val()),a=window.passport.cookie?window.passport.cookie.loginName:"",n=window.passport.cookie?window.passport.cookie.lenovoId:"",s=e.getCookie("leid"),r=null;r=$p.baseInfo.isIntegral?0:$p.baseInfo.activityType>0&&$p.nowNumber<$p.activity.buyEndTime?1==$p.activity.isOrdinaryPurchase&&$p.nowNumber<$p.activity.buyStartTime?0:4==$p.baseInfo.activityType?2:$p.baseInfo.activityType:$p.baseInfo.activityType,window.$p.jsonpNoticeSave({productCode:code,productName:$p.baseInfo.name,activityType:r,clientType:"PC",linkAddress:window.location.href,phone:o,smsCode:t,lenovoAccount:a,lenovoID:n,leID:s,mallName:"联想官网"},function(e){1==e.success?($("#notice_phoneNumber").val(""),$("#dhnotice-code").val(""),$("#notice_verificationCode").val(""),layer.closeAll(),i=1,layer.msg("订阅成功")):(i=1,layer.msg(e.resultMsg))},function(){i=1,layer.msg("系统繁忙")})}})})},__initShoppingcartButton:function(){var e=window.$p.processAddCartButton();if(e.isShow){if(this.$button_shoppingcart.off("click"),!$p.baseInfo.isCombinedGoods||!$p.baseInfo.isUpgradeGoods){if($p.components.srdz&&$p.components.srdz.isSelectedUserDefinedUpload)return!1;this.setAddCartButtonClickHandler().show()}}else this.$button_shoppingcart.off("click").hide()},__initPrice:function(){var e=window.$p.processShowPrice(),t=window.$p.baseInfo.virtualPrice;window.$p.baseInfo.isIntegral?s({virtualPrice:t,price:e.showText}):o(e.showText)},__initDeliveryPrice:function(){var e=window.$p.baseInfo.deliveryPrice;e&&!$p.baseInfo.isIntegral&&e.offerDetailList&&e.offerDetailList.length>0&&($(".estimated-delivery-price-show").show(),$(".estimated-delivery-price-show-desc").text(e.deliverPrice&&e.deliverPrice.desc),$(".estimated-delivery-price-show #estimatedPrice-span_price").text(e.deliverPrice&&e.deliverPrice.price&&parseFloat(e.deliverPrice.price)),a(e.originalPrice))},__initStandardBiddingButton:function(){if("9c9a5684-2006-43ea-a688-758e8f5459cd"==faid&&98!=$p.baseInfo.salesType&&2!=$p.baseInfo.salesType&&!$p.baseInfo.isIntegral){var e="https://lecs.lenovo.com.cn",t="",i="";window.location.href.indexOf("lenovouat.com")!=-1&&(e="https://lecs.lenovouat.com"),t=e+"/chat.html?ttc=1&gc="+window.code+"&buc="+$p.baseInfo.buOwner,i='<div class="standardBiddingButton"><i></i><a href="'+t+'" class="button_enquiry" target="_blank">多台采购询价 ></a></div>',$("#div_button_group").append(i)}$("#div_button_group").on("click",".standardBiddingButton a",function(){try{sensors2022_05_16.track("WaiterInquireClick",{page_url:window.location.href,page_name:document.title,entrance_name:"多台采购询价"})}catch(e){console.log(e)}})},__initEWM:function(){var e=!1,t='<div id="box_ewm" class="ewm_tk"><img class="bottom_ewm" src="'+window.$p.ewmImageSrc+'" /><div class="triangle"></div><div class="ewm_title">联想客户端</div>';window.$p.baseInfo.appPrice<window.$p.baseInfo.showPrice&&(e=!0),t+="</div>",this.$container.find("div.detail_con").append(t),this.$box_ewm=$("#box_ewm"),e&&this.$box_ewm.show()},__initSNCode:function(){var e=this;$("#checkSNcode_bt").on("click",function(){$p.baseInfo.isNeedSN&&$p.baseInfo.isService&&"1"==$p.baseInfo.serviceType?e.checkSNCode():$p.baseInfo.isNeedSN&&$p.baseInfo.isService&&"4"==$p.baseInfo.serviceType?e.checkIMEICode():$p.baseInfo.isNeedSN&&$p.baseInfo.isService&&"6"==$p.baseInfo.serviceType&&e.checkBacknewmtm()}),$("#checkSNcode_box .goBack, #checkSNcode_priceBox .goBack, #checkSNcode_error_box .goBack").on("click",function(){layer.closeAll(),$("#SNcode").val(""),$p.baseInfo.BacknewmtmCode=""}),$("#checkSNcode_cancel, #checkSNcode_error_bt").on("click",function(){layer.closeAll(),$("#SNcode").val(""),$p.baseInfo.BacknewmtmCode=""}),$("#checkSNcode_confirm").on("click",function(){$p.activity&&3==$p.activity.activityType&&$p.nowNumber>$p.activity.buyStartTime&&$p.nowNumber<$p.activity.buyEndTime?_this.ljgm_sg():d()})},bindEvent:function(){var e=this;$("#buy_number").val("1");var t=$("#buy_number"),i=new RegExp(/^(84|85|86)$/).test($p.baseInfo.productGroupNo),o=i&&(passport.isLogin()&&passport.cookie&&"1"!==passport.cookie.isLenovo||!passport.isLogin())&&0==window.$p.baseInfo.salesType&&!$p.baseInfo.isIntegral&&(!window.$p.activity||$p.activity&&(3==$p.activity.activityType||5==$p.activity.activityType)&&$p.nowNumber<$p.activity.reservationStartTime||$p.activity&&(2==$p.activity.activityType||4==$p.activity.activityType)&&$p.nowNumber<$p.activity.buyStartTime),a='<a class="toEnterpriseReg" target="_blank" href="'+__detailConfig.getApiPath("regUrl")+"/registpage/pc/enterprisereg.html?ticket=ca2de153-6b3e-4d85-9dde-2927727f5d41&ru="+encodeURIComponent(location.href)+'" latag = "latag_pc_detail_top_企业购_'+code+"_https:"+__detailConfig.getApiPath("regUrl")+"/registpage/pc/enterprisereg.html?ticket=ca2de153-6b3e-4d85-9dde-2927727f5d41&ru="+encodeURIComponent(location.href)+'">成为企业会员，采购更优惠</a>';o&&$(".modify-buy-counts").append(a),$("#add_buy_number, #reduce_buy_number").attr("onselectstart","return false"),$p.buyProNumber=parseInt(t.val()),$("#reduce_buy_number").on("click",function(){try{var i={active_type:"点击减少购买数量",active_series:"",active_value:""},o=$.extend(i,window.$p.public_obj);sensors2022_05_16.track("GoodsDetailActive",o)}catch(e){console.log(e)}var a=parseInt(t.val());return!(a-1<=0)&&(t.val(--a),$p.hasFullLimitedStock=!0,$p.buyProNumber=a,$p.baseInfo.isCombinedGoods||e.dealBuyNumberStock(),void e.dealBuyNumberEnterprisePoints())}),$("#add_buy_number").on("click",function(){try{var i={active_type:"点击增加购买数量",active_series:"",active_value:""},a=$.extend(i,window.$p.public_obj);sensors2022_05_16.track("GoodsDetailActive",a)}catch(e){console.log(e)}var n=parseInt(t.val());e.dealBuyNumberStock(function(){if(($p.baseInfo.isCombinedGoods||$p.baseInfo.isUpgradeGoods)&&!$p.baseInfo.isIndependentStock)return n+1>window.$p.baseInfo.gmsl?(layer.msg("您最多只能购买"+window.$p.baseInfo.gmsl+"个"),$p.hasFullLimitedStock=!1,!1):void $p.getCombinedGoodskclist(parseInt($("#buy_number").val())+1,function(i){PDUtil.debug("load stock success, stock data is:"),PDUtil.debug(i);var a=i&&i.result;return a?a.t?(window.$p.baseInfo.gmsl>1&&n+1>1&&o&&$(".toEnterpriseReg").css("display","inline-block"),t.val(++n),$p.hasFullLimitedStock=!0,$p.buyProNumber=n,e.dealBuyNumberEnterprisePoints(),!1):(layer.msg("库存不足！"),$p.hasFullLimitedStock=!1,!1):void(success&&(i.detailStockType=0,success(i)))},function(e,t){PDUtil.debug("load stock error, status is:"+t),PDUtil.debug("error is :"),PDUtil.debug(e),error&&error(e)},function(){PDUtil.debug("load stock completed"),completed&&"function"==typeof completed&&completed()});if("7ef1d628-5bd3-4651-9530-793678cc02af"!=faid||"7ef1d628-5bd3-4651-9530-793678cc02af"==faid&&!$p.isProActivityBefore||$p.proStockByOptions||$p.baseInfo.isCombinedGoods||$p.baseInfo.isUpgradeGoods){if(n+1>window.$p.baseInfo.stock)return layer.msg("库存不足！"),$p.hasFullLimitedStock=!1,!1}else if(n+1>window.$p.baseInfo.salesStock&&n+1>window.$p.baseInfo.frontStock)return layer.msg("库存不足！"),$p.hasFullLimitedStock=!1,!1;return window.$p.baseInfo.gmsl>1&&n+1>1&&o&&$(".toEnterpriseReg").css("display","inline-block"),n+1>window.$p.baseInfo.gmsl?(layer.msg("您最多只能购买"+window.$p.baseInfo.gmsl+"个"),$p.hasFullLimitedStock=!1,!1):(t.val(++n),$p.hasFullLimitedStock=!0,$p.buyProNumber=n,void e.dealBuyNumberEnterprisePoints())})}),t.on("change",function(){var i=parseInt(t.val());/^\d$/.test(t.val())||t.val(i),(isNaN(i)||i<=0)&&t.val(i),!$p.baseInfo.isCombinedGoods&&!$p.baseInfo.isUpgradeGoods||$p.baseInfo.isIndependentStock?e.dealBuyNumberStock(function(){"7ef1d628-5bd3-4651-9530-793678cc02af"!=faid||"7ef1d628-5bd3-4651-9530-793678cc02af"==faid&&!$p.isProActivityBefore||$p.proStockByOptions||$p.baseInfo.isCombinedGoods||$p.baseInfo.isUpgradeGoods?i>window.$p.baseInfo.stock?window.$p.baseInfo.gmsl>window.$p.baseInfo.stock?(t.val(window.$p.baseInfo.stock||1),$p.buyProNumber=window.$p.baseInfo.stock,layer.msg("库存不足！"),$p.hasFullLimitedStock=!1):(t.val(window.$p.baseInfo.gmsl),$p.buyProNumber=window.$p.baseInfo.gmsl,layer.msg("您最多只能购买"+window.$p.baseInfo.gmsl+"个"),$p.hasFullLimitedStock=!1):i>window.$p.baseInfo.gmsl?(t.val(window.$p.baseInfo.gmsl),$p.buyProNumber=window.$p.baseInfo.gmsl,layer.msg("您最多只能购买"+window.$p.baseInfo.gmsl+"个"),$p.hasFullLimitedStock=!0):($p.buyProNumber=i,$p.hasFullLimitedStock=!0):i>window.$p.baseInfo.salesStock&&i>window.$p.baseInfo.frontStock?window.$p.baseInfo.salesStock>=window.$p.baseInfo.frontStock?window.$p.baseInfo.gmsl>window.$p.baseInfo.salesStock?(t.val(window.$p.baseInfo.salesStock||1),$p.buyProNumber=window.$p.baseInfo.salesStock,layer.msg("库存不足！"),$p.hasFullLimitedStock=!1):(t.val(window.$p.baseInfo.gmsl),$p.buyProNumber=window.$p.baseInfo.gmsl,layer.msg("您最多只能购买"+window.$p.baseInfo.gmsl+"个"),$p.hasFullLimitedStock=!1):window.$p.baseInfo.gmsl>window.$p.baseInfo.frontStock?(t.val(window.$p.baseInfo.frontStock||1),$p.buyProNumber=window.$p.baseInfo.frontStock,layer.msg("库存不足！"),$p.hasFullLimitedStock=!1):(t.val(window.$p.baseInfo.gmsl),$p.buyProNumber=window.$p.baseInfo.gmsl,layer.msg("您最多只能购买"+window.$p.baseInfo.gmsl+"个"),$p.hasFullLimitedStock=!1):i>window.$p.baseInfo.gmsl?(t.val(window.$p.baseInfo.gmsl),$p.buyProNumber=window.$p.baseInfo.gmsl,layer.msg("您最多只能购买"+window.$p.baseInfo.gmsl+"个"),$p.hasFullLimitedStock=!0):($p.buyProNumber=i,$p.hasFullLimitedStock=!0),window.$p.baseInfo.gmsl>1&&i>1&&o&&$(".toEnterpriseReg").css("display","inline-block"),e.dealBuyNumberEnterprisePoints()}):$p.getCombinedGoodskclist(i,function(o){PDUtil.debug("load stock success, stock data is:"),PDUtil.debug(o);var a=o&&o.result;if(a)if(a.t){if(i>window.$p.baseInfo.gmsl)return t.val(window.$p.baseInfo.gmsl),layer.msg("您最多只能购买"+window.$p.baseInfo.gmsl+"个"),void($p.hasFullLimitedStock=!1);$p.buyProNumber=i,$p.hasFullLimitedStock=!0,e.dealBuyNumberEnterprisePoints()}else layer.msg("库存不足！"),t.val($p.buyProNumber),$p.hasFullLimitedStock=!1;success&&(o.detailStockType=0,success(o))},function(e,t){PDUtil.debug("load stock error, status is:"+t),PDUtil.debug("error is :"),PDUtil.debug(e),error&&error(e)},function(){PDUtil.debug("load stock completed"),completed&&"function"==typeof completed&&completed()})}),this.$container.find("div.detail_con div#ewm_icon").on("mouseover",function(){$("#box_ewm").show()}).on("mouseleave",function(){$("#box_ewm").hide()}),$(document).on("click",function(){e.$box_ewm.is(":visible")&&e.$box_ewm.hide()}),window.$p.baseInfo.stock>0&&window.$p.baseInfo.logistics&&!window.$p.baseInfo.isIntegral?$(".delivery-info-wrap").on("mouseenter",function(){$(this).append('<div id="delivery_pop_box" ><span class="del-info">'+JSON.parse($p.baseInfo.logistics).infoes+'</span><div class="arrow-wrap del-tips"><div class="up-arrow pre-arrow"></div><div class="up-arrow curr-arrow"></div></div></div>'),$("#delivery_pop_box").show()}).on("mouseleave",function(){$("#delivery_pop_box").remove()}).show():$(".delivery-info-wrap").hide()},dealBuyNumberStock:function(e){if("7ef1d628-5bd3-4651-9530-793678cc02af"!=faid||"7ef1d628-5bd3-4651-9530-793678cc02af"==faid&&!$p.isProActivityBefore||$p.proStockByOptions||$p.baseInfo.isCombinedGoods||$p.baseInfo.isUpgradeGoods){if(e&&e(),!$p.hasFullLimitedStock)return;return void((2!=$p.baseInfo.salesType&&!$p.isHideArrivalTime||2==$p.baseInfo.salesType&&$p.isPresellShowArrivalTime)&&$p.components.arrivalTime.data.checkItemCode.provinceCode&&$p.components.arrivalTime&&$p.components.arrivalTime.getArrivalTimeByFa.call(this))}var t=$p.components.srdz&&!!$p.components.srdz.getdz(),i=$p.dealAddressJson();$p.loadFrontStock(i,t,null,null,function(){$p.proStockByOptions&&($p.baseInfo.stock=$p.baseInfo.salesStock),e&&e(),$p.hasFullLimitedStock&&(2!=$p.baseInfo.salesType&&!$p.isHideArrivalTime||2==$p.baseInfo.salesType&&$p.isPresellShowArrivalTime)&&$p.components.arrivalTime.data.checkItemCode.provinceCode&&$p.components.arrivalTime&&$p.components.arrivalTime.getArrivalTimeByFa.call(this,function(){$p.components.arrivalTime.checkSpeedUpIcon.call(this,$p.buyProNumber)})})},dealBuyNumberEnterprisePoints:function(){$p.components.enterprisePoints&&$p.components.enterprisePoints.hasEnterprisePoints&&($p.components.enterprisePoints.updateIntegrationItem($p.components.enterprisePoints.itemList,"num",$p.buyProNumber),$p.components.enterprisePoints.getGoodsEnterprisePoints($p.components.enterprisePoints.itemList))},updateGouMaiZiXunUrl:function(){var e=$(".sort .sort-list > ul> li").eq(1).find("ul >a").eq(0),t=$(".shop_rightbar .shop_pointer .V_icon_cont .V_user_infor dd:eq(0) a:eq(0)"),i=$("#J_MUIMallbar .ns_parentBox .ns_mbar-qq .ns_mbar-inner a:eq(0)");$("#btn_gmzx").on("click",function(){}),e&&1==e.length?$("#a_gmzx").attr("href",e.attr("href")):t&&1==t.length?$("#a_gmzx").attr("href",t.attr("href")):$("#a_gmzx").attr("href",i.attr("href"))},updatePrice:function(e){if($p.baseInfo.isShowPrice)if($p.baseInfo.isIntegral)s(e);else{if(!$p.baseInfo.showPrice)return;o(e)}},updateCouponPrice:function(e){$p.baseInfo.isShowPrice&&($p.baseInfo.isIntegral||n(e))},getBuyNumber:function(){var e=$("#buy_number").val();return/^[1-9][0-9]*$/.test(e)?parseInt(e):1},setBuyButton:function(e,t,i,o){$p.noLjgmClick=!1;var a={event:"click",type:"replace"};return o=window.$.extend(a,o||{}),$p.baseInfo.marketable&&(""!==$p.baseInfo.price||$p.baseInfo.isIntegral||!$p.activity||$p.activity.showPrice||3!=$p.activity.activityType&&5!=$p.activity.activityType)?(0==$p.baseInfo.isShowPrice&&$p.baseInfo.mallType==PDUtil.mallTypeMapping.lenovoShop.code||""===$p.baseInfo.price&&!$p.baseInfo.isIntegral)&&(e="立即咨询"):e=e,this.$button_buy.text(e||"立即购买").attr("title",e||"立即购买").removeClass("tab_deliveryPriceDesc"),"分期支付"!=e&&($p.ljgmText=e),t?($p.noLjgmClick=!0,this.$button_buy.addClass("button-gray").off("click")):($p.noLjgmClick=!1,this.$button_buy.removeClass("button-gray"),i&&"function"==typeof i&&("replace"==o.type?this.$button_buy.off(o.event).on(o.event,i):this.$button_buy.on(o.event,i))),"已售罄"===e||"已抢光"===e?(this.$button_buy.attr("latag","latag_pc_detail_soldout_btn_null_"+window.code),$("#ljgm, #button_dhtz").css({border:"none"})):"立即预约"===e?this.$button_buy.attr("latag","latag_pc_detail_appointment_btn_null_"+window.code):"商品已下架"===e?(this.$button_buy.attr("latag","latag_pc_detail_offshelf_btn_null_"+window.code),$("#ljgm, #button_dhtz").css({border:"none"})):"立即购买"===e?this.$button_buy.attr("latag","latag_pc_detail_bottom_fixed_orderimmediately_"+window.code):"敬请期待"===e?$("#ljgm, #button_dhtz").css({border:"none"}):"预约未开始"===e?$("#ljgm, #button_dhtz").css({border:"none"}):"已预约"===e?$("#ljgm, #button_dhtz").css({border:"none"}):"未预约"===e?$("#ljgm, #button_dhtz").css({border:"none"}):"预售结束"===e&&$("#ljgm, #button_dhtz").css({border:"none"}),this.$button_buy},setAddCartButtonClickHandler:function(e){return this.setButtonClickHandler(this.$button_shoppingcart,e,p)},setBuyButtonClickHandler:function(e){return this.setButtonClickHandler(this.$button_buy,e,d)},setButtonClickHandler:function(e,t,i){return t?e.on("click",t):e.on("click",i),e},ljgm:function(){d()},jrgwc:function(){p()},tcjrgwc:function(t){try{var i={page_name:"商品详情页",click_name:"套餐加入购物车",material_cd:$p.baseInfo.materialNumber,goods_pay_subtotal:parseFloat($("#tabs-1.active .toShopCart .price span").text()),goods_unit_prc:parseFloat(parseFloat($("#tabs-1.active .toShopCart .price span").text())+parseFloat($("#tabs-1.active .toShopCart .second span").text())),goods_number:parseFloat($("#buy_number").val())},o=$.extend(window.$p.public_obj,i);sensors2022_05_16.track("SubBeforeClick",o)}catch(e){console.log(e)}if(passport&&passport.isLogin&&passport.isLogin()){var a="",n=$p.components.srdz.getdz();$p.components.srdz&&2==$p.components.srdz.upload_type?n?(n=JSON.parse(decodeURIComponent($p.components.srdz.getdz())),n.push({customize:2,ptside:"A",ptmode:1,pttype:1}),a=encodeURIComponent(JSON.stringify(n))):a=encodeURIComponent(JSON.stringify([{customize:2,ptside:"A",ptmode:1,pttype:1}])):a=n?decodeURIComponent(n):"",window.$p.jsonpAddItemToCart({terminal:window.$p.terminal,itemtype:3,gcodes:window.code+","+t,opgcode:"",servicecode:"",icount:1,personalization:a},function(t){1==t.success?window.location.href=window.$p.enterpriseLoop(__detailConfig.getApiPath("gwc"))+"cart/index.html?plat="+window.$p.terminal:40017==t.resultCode||20028==t.resultCode||10028==t.resultCode||20047==t.resultCode?(e.warn("additemtocart return data fail"+t.resultCode),layer.msg(t.resultMsg)):10027==t.resultCode||10029==t.resultCode?(layer.msg(t.resultMsg),setTimeout(function(){location.reload()},1500)):(e.warn("additemtocart return data fail"+t.resultCode),layer.msg(t.resultMsg))})}else window.$p.loginToPage()},ljyy:function(){if(window.passport&&window.passport.isLogin()){var t=/^1[3456789]\d{9}$/.test(window.passport.cookie.loginName);if(t&&$("#wsgyy_tel").val(window.passport.cookie.loginName),3==$p.activity.activityType)var i=PDUtil.formatShortDate($p.activity.flashYyJson.startTimeStr,3)+"开始抢购, 请留下您的手机号码, 商品开抢前15分钟通知您！";else if(5==$p.activity.activityType)if(new RegExp(/^(M1|M3)$/).test($p.baseInfo.productGroupNo)||new RegExp(/^(99)$/).test($p.baseInfo.productGroupNo)&&"36d0caa1-af7a-459b-b147-04b86ad25dd7"==window.faid){var i="请留下您的手机号码, 商品开售前15分钟通知您！";$("#ljyy-layer-wrap .detail-cou").css("textAlign","center")}else var i=PDUtil.formatShortDate($p.activity.YuYue.yyendTimeStr,3)+"开售, 请留下您的手机号码, 商品开售前15分钟通知您！";$("#ljyy-layer-wrap .ljyy-pop-txt").text(i),layer.open({type:1,skin:"ljyy-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!1,area:["580px","375px"],move:!1,content:$("#ljyy-layer-wrap")}),t&&$("#wsgyy_modify").show()}else try{window.$p.loginToPage()}catch(t){e.warn("立即预约失败。。"),e.warn(t)}},ljgm_sg:function(){var t=window.$p;try{if(window.passport&&window.passport.isLogin()){if(t.baseInfo.isNeedSN&&t.baseInfo.isService&&"1"==t.baseInfo.serviceType){if(!t.baseInfo.SNCode)return t.components.buygroup&&t.components.buygroup.checkSNCode("isYySg"),!1}else if(t.baseInfo.isNeedSN&&t.baseInfo.isService&&"4"==t.baseInfo.serviceType){if(!t.baseInfo.IMEICode)return t.components.buygroup&&t.components.buygroup.checkIMEICode("isYySg"),!1}else if(t.baseInfo.isNeedSN&&t.baseInfo.isService&&"6"==t.baseInfo.serviceType&&!t.baseInfo.BacknewmtmCode)return t.components.buygroup&&t.components.buygroup.checkBacknewmtm("isYySg"),!1;t.components.buygroup.sg_queue()}else window.$p.loginToPage()}catch(t){e.warn("BuyGroup组件=> ljgm_sg方法错误 ------------->"),e.warn(t),layer.msg(e.errorMessage.busy)}},sg_queue:function(){$p.jsonpShangouQueue({gcode:window.code,biz:!$p.baseInfo.isCombinedGoods&&!$p.baseInfo.isUpgradeGoods||$p.baseInfo.isIndependentStock?"norm":"comb"},function(e){var t="",i=$p.components.srdz.getdz();$p.components.srdz&&2==$p.components.srdz.upload_type?i?(i=JSON.parse(decodeURIComponent($p.components.srdz.getdz())),i.push({customize:2,ptside:"A",ptmode:1,pttype:1}),t=encodeURIComponent(JSON.stringify(i))):t=encodeURIComponent(JSON.stringify([{customize:2,ptside:"A",ptmode:1,pttype:1}])):t=i?decodeURIComponent(i):"";var o=1,a="",n="",s={shopId:window.shopId,terminal:$p.terminal,itemtype:0,gcodes:window.code,icount:$p.components.buygroup.getBuyNumber(),opgcode:$p.components.kxzp.getKXZP().join()||"",servicecode:$p.components.service.getSelectedService().join(",")||"",personalization:t,sn:$p.baseInfo.isNeedSN&&$p.baseInfo.isService?"1"==$p.baseInfo.serviceType?$p.baseInfo.SNCode:"4"==$p.baseInfo.serviceType?$p.baseInfo.IMEICode:$p.baseInfo.BacknewmtmCode:"",salesCouponId:$p.baseInfo.deliveryCouponIdList&&$p.baseInfo.deliveryCouponIdList.length>0?$p.baseInfo.deliveryCouponIdList.join(","):""};if(e.success)s=$.extend(s,{token:e.data.token,tokenTimeStamp:e.data.timestamp}),$p.jsonpShangouGwc(s,function(e){if(e.success)if(0==e.resultCode){$p.components.buygroup.data.token=e.t.token,$p.components.buygroup.data.tokenTimeStamp=e.t.timestamp;var t=$(".installment-dropdown-wrapper.checked"),i=t.attr("data-paytype")+"|"+t.attr("data-cycle"),o="";""!==t.find(".installment-info span").text()&&t.find(".installment-info span").text().indexOf("选择分期")===-1&&(o=encodeURIComponent(i)),window.location.href=__detailConfig.getApiPath("ljgm_js")+"checkout/lenovopc.html?buytype=1&ss="+(new Date).getMilliseconds()+"&shopId="+window.shopId+"&terminal="+$p.terminal+"&token="+$p.components.buygroup.data.token+"&tokenTimeStamp="+$p.components.buygroup.data.tokenTimeStamp+"&defaultPayment="+o+"&isSeckill=1&nc=1"}else layer.msg("系统正忙，请稍后再试!");else 40051==e.resultCode?(layer.open({type:1,skin:"hbxs-serveInfo-layer-style-1",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["435px","234px"],move:!1,content:$(".realNameAuthentication-div")}),$("#realNameAuthentication-btn").on("click",function(){var e=window.location.href,t=__detailConfig.getApiPath("activityUrl")+"consumption_coupon/authentication.html?ru="+encodeURIComponent(e);window.location.href=t}),$(".realNameAuthentication-div-closed").on("click",function(){layer.closeAll()})):20002==e.resultCode?(n="您已经超过购买次数！",$("#notice_sg_msg").text(n),$("#notice_sg_times").empty(),$("#notice_sg_queue").show(),$("#notice_sg_btn").on("click",function(){$("#notice_sg_queue").hide()})):layer.msg("系统正忙，请稍后再试!")});else if(20002==e.rc)n="手慢啦！商品补货中，待会再来看看吧！",$("#notice_sg_msg").text(n),$("#notice_sg_times").empty(),$("#notice_sg_queue").show(),$("#notice_sg_btn").on("click",function(){$("#notice_sg_queue").hide()});else if(20003==e.rc){n="当前排队"+e.data+"人，";var r=setInterval(function(){++o,a="您已等待"+o+"秒",$("#notice_sg_times").text(a)},1e3),c=setInterval(function(){$p.jsonpShangouQueue({gcode:window.code,biz:!$p.baseInfo.isCombinedGoods&&!$p.baseInfo.isUpgradeGoods||$p.baseInfo.isIndependentStock?"norm":"comb"},function(e){0==e.rc?(clearTimeout(c),clearTimeout(r),s=$.extend(s,{token:e.data.token,tokenTimeStamp:e.data.timestamp}),$p.jsonpShangouGwc(s,function(e){if(e.success){if(0==e.resultCode){$p.components.buygroup.data.token=e.t.token,$p.components.buygroup.data.tokenTimeStamp=e.t.timestamp;var t=$(".installment-dropdown-wrapper.checked"),i=t.attr("data-paytype")+"|"+t.attr("data-cycle"),o="";""!==t.find(".installment-info span").text()&&t.find(".installment-info span").text().indexOf("选择分期")===-1&&(o=encodeURIComponent(i)),window.location.href=__detailConfig.getApiPath("ljgm_js")+"checkout/lenovopc.html?buytype=1&ss="+(new Date).getMilliseconds()+"&shopId="+window.shopId+"&terminal="+$p.terminal+"&token="+$p.components.buygroup.data.token+"&tokenTimeStamp="+$p.components.buygroup.data.tokenTimeStamp+"&defaultPayment="+o+"&isSeckill=1&nc=1"}}else 40051==e.resultCode?(layer.open({type:1,skin:"hbxs-serveInfo-layer-style-1",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["435px","234px"],move:!1,content:$(".realNameAuthentication-div")}),$("#realNameAuthentication-btn").on("click",function(){var e=window.location.href,t=__detailConfig.getApiPath("activityUrl")+"consumption_coupon/authentication.html?ru="+encodeURIComponent(e);window.location.href=t}),$(".realNameAuthentication-div-closed").on("click",function(){layer.closeAll()})):20002==e.resultCode?(n="您已经超过购买次数！",$("#notice_sg_msg").text(n),$("#notice_sg_times").empty(),$("#notice_sg_queue").show(),$("#notice_sg_btn").on("click",function(){$("#notice_sg_queue").hide()})):layer.msg("系统正忙，请稍后再试!")})):20002==e.rc?(clearTimeout(r),clearTimeout(c),n="手慢啦！商品补货中，待会再来看看吧！",$("#notice_sg_msg").text(n),$("#notice_sg_times").empty(),$("#notice_sg_queue").show(),$("#notice_sg_btn").on("click",function(){$("#notice_sg_queue").hide()})):20003==e.rc?(n="当前排队"+e.data+"人，",$("#notice_sg_msg").text(n)):layer.msg("系统正忙，请稍后再试!")})},5e3);$("#notice_sg_msg").text(n),$("#notice_sg_times").text("1s"),$("#notice_sg_queue").show(),$("#notice_sg_btn").on("click",function(){$("#notice_sg_queue").hide(),clearTimeout(r),clearTimeout(c)})}else 20004==e.rc&&(n="商品火爆，请稍后再试",$("#notice_sg_msg").text(n),$("#notice_sg_times").empty(),$("#notice_sg_queue").show(),$("#notice_sg_btn").on("click",function(){$("#notice_sg_queue").hide()}))})},checkSNCode:function(e){var t=window.$p,i=this;if(layer.open({type:1,id:"sndialog",skin:"sn-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!1,area:["550px","494px"],move:!1,content:$("#checkSNcode_box")}),e)return!1;var o=$("#checkSNcode_bt").text("验证中..."),a=$("#SNcode").val();return a?void t.ajaxCheckSNCode(a,function(e){var n=e.data;if(200==e.status&&1==n.res){if(o.text("确定"),t.baseInfo.SNCode=a,!t.baseInfo.SNCode)return layer.msg("SN码验证失败"),o.text("确定"),!1;t.activity&&3==t.activity.activityType&&t.nowNumber>t.activity.buyStartTime&&t.nowNumber<t.activity.buyEndTime?i.ljgm_sg():d()}else o.text("确定"),layer.msg(n&&n.msg||"SN码验证失败")},function(){return layer.msg("系统繁忙，请稍后再试！"),!1}):($("#checkSNcode_bt").text("确定"),layer.msg("请输入SN码！"),!1)},checkIMEICode:function(e){var t=window.$p,i=this;if(layer.open({type:1,id:"sndialog",skin:"sn-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!1,area:["550px","494px"],move:!1,content:$("#checkSNcode_box")}),$("#checkSNcode_box .title-cou").text("验证IMEI码"),$("#checkSNcode_box .detail-cou").html('<span class="sn-remand">温馨提示：</span><span>IMEI是手机保修的唯一凭证， 请输入正确的IMEI, 以便服务生效。</span>'),$("#checkSNcode_box .phone").attr("placeholder","请输入IMEI码"),$("#checkSNcode_box .howToGet").hide(),e)return!1;var o=$("#checkSNcode_bt").text("验证中..."),a=$("#SNcode").val();
return a?void t.ajaxCheckIMEICode(a,function(e){var n=e.result;1==n.success?(t.baseInfo.IMEICode=a,o.text("确定"),t.activity&&3==t.activity.activityType&&t.nowNumber>t.activity.buyStartTime&&t.nowNumber<t.activity.buyEndTime?i.ljgm_sg():d()):(o.text("确定"),layer.msg("IMEI码验证失败！"))},function(){return layer.msg("系统繁忙，请稍后再试！"),!1}):($("#checkSNcode_bt").text("确定"),layer.msg("请输入IMEI码！"),!1)},checkBacknewmtm:function(e){var t=window.$p;if(layer.open({type:1,id:"sndialog",skin:"sn-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!1,area:["550px","494px"],move:!1,content:$("#checkSNcode_box")}),$("#checkSNcode_box .detail-cou").html('<span class="sn-remand">温馨提示：</span><span>此服务购买后会与您的主机绑定，请正确输入您的SN（主机编号），我们会校验是否可以购买此服务。</span>'),e)return!1;var i=$("#checkSNcode_bt").text("验证中..."),o=$("#SNcode").val();return o?void t.ajaxCheckBacknewmtm(o,function(e){200==e.statusCode&&e.data&&e.data.mtm_state&&e.data.buy_state?(t.baseInfo.BacknewmtmCode=o,i.text("确定"),$(".checkSNcode_goodsName").text(e.data.product_model),$(".checkSN_number").text(e.data.sn),$(".checkSN_price").text(e.data.mtm_price),layer.closeAll(),layer.open({type:1,skin:"sn-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!1,area:["550px","494px"],move:!1,content:$("#checkSNcode_priceBox")})):(i.text("确定"),layer.closeAll(),layer.open({type:1,skin:"sn-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!1,area:["550px","494px"],move:!1,content:$("#checkSNcode_error_box")}))},function(){return layer.msg("系统繁忙，请稍后再试！"),!1}):($("#checkSNcode_bt").text("确定"),layer.msg("请输入SN码！"),!1)}};var o=function(e){if(isNaN(e))$("#price_unit").text(""),$("#span_price").text(e);else{var t=parseFloat(e);passport.isLogin()?0==window.$p.baseInfo.salesType&&!$p.baseInfo.isIntegral&&(!window.$p.activity||$p.activity&&(3==$p.activity.activityType||5==$p.activity.activityType)&&$p.nowNumber<$p.activity.reservationStartTime||$p.activity&&(2==$p.activity.activityType||4==$p.activity.activityType)&&$p.nowNumber<$p.activity.buyStartTime)?passport.cookie&&"1"===passport.cookie.isLenovo&&121!=passport.cookie.groupCode?$(".price-desc").text("企业价").css("color","#E22319"):$p.baseInfo.isCombinedGoods?($("#price_des").text("套餐价："),$(".price-desc").text("套餐价").css("color","#E22319")):($("#price_des").text("会员价："),$(".price-desc").text("会员价").css("color","#E22319")):2!=$p.baseInfo.salesType&&($p.baseInfo.isCombinedGoods?($("#price_des").text("套餐价："),$(".price-desc").text("套餐价").css("color","#E22319")):($("#price_des").text("会员价："),$(".price-desc").text("会员价").css("color","#E22319"))):2!=$p.baseInfo.salesType&&($("#price_des").text("商城价："),$(".price-desc").text("商城价").css("color","#434242")),2==$p.baseInfo.salesType&&$p.presellObj&&1!=$p.presellObj.presellway&&$p.baseInfo.marketable?$("#nail_price").text(parseFloat(t).toFixed(2)):$("#span_price").text(parseFloat(t))}},a=function(e){var t=e||"";(0==window.$p.baseInfo.salesType||2==window.$p.baseInfo.salesType&&"undefined"!=typeof $p.presellObj&&1==$p.presellObj.presellway)&&$(".price-desc, .sign-prc-group, .sign-prc-group-del").hide(),t?($(".originalPrice-desc").text(t.desc),$("#originalPrice").text("¥"+t.price)):(0==window.$p.baseInfo.salesType?(!$p.activity||"undefined"==typeof $p.activity.activityType||2!=$p.activity.activityType&&4!=$p.activity.activityType?passport.cookie&&"1"===passport.cookie.isLenovo&&121!=passport.cookie.groupCode?$(".originalPrice-desc").text("企业价"):$p.baseInfo.isCombinedGoods?$(".originalPrice-desc").text("套餐价"):$(".originalPrice-desc").text("会员价"):$(".originalPrice-desc").text("秒杀价"),$(".price-desc, .sign-prc-group, .sign-prc-group-del").hide()):2==$p.baseInfo.salesType&&$(".originalPrice-desc").text("预售价"),$("#originalPrice").text("¥"+$p.baseInfo.price))},n=function(e){var t=parseFloat(e);$(".couponBestPriceNum").text(t),$(".couponBestPriceBuyNum").html("券后￥"+t)},s=function(e){if(!$p.baseInfo.isShowPrice&&"暂无报价"==e.price)return void $("#span_price").text(e.price);var t=e.price;0!=parseFloat(t)&&$("#span_price").text(parseFloat(t)),"V_0"==$p.baseInfo.virtualAreaCode&&$("#span_price_integral").text(e.virtualPrice).parent().removeClass("hidden"),"V_1"==$p.baseInfo.virtualAreaCode&&$("#span_price_virtual").text(e.virtualPrice).parent().removeClass("hidden"),"V_3"==$p.baseInfo.virtualAreaCode&&$("#span_price_virtual").text(e.virtualPrice).siblings("#span_price_virtual_txt").text("企业积分").parent().removeClass("hidden"),t&&""!=$.trim(t)&&0!=parseFloat(t)||($(".sign-prc-group").hide(),$(".price-sign-virtual").hide(),$(".sign-prc-group-virtual").css("margin",0),$(".price-sign-integral").hide())},r=function(){for(var e=[code],t=window.$p.components.tjxj.data.selectedArray,i=0;i<t.length;i++)e.push(t[i].code);return e},c=function(){var t=window.$p;try{var o={page_name:"商品详情页",click_name:"立即购买",material_cd:window.$p.baseInfo.materialNumber,goods_pay_subtotal:t.calcPrice(),goods_unit_prc:parseFloat(t.calcAllSingelPrice()),goods_number:parseFloat($("#buy_number").val())},a=$.extend(window.$p.public_obj,o);sensors2022_05_16.track("SubBeforeClick",a)}catch(e){console.log(e)}try{if(("7ef1d628-5bd3-4651-9530-793678cc02af"==faid&&!t.isProActivityBefore||t.proStockByOptions)&&t.buyProNumber>window.$p.baseInfo.stock)return layer.msg("库存不足，请更新购买数量!"),!1;if(!t.components.guige.isExist_gg())return!1;var n=r(),s=n.length>1?2:0,c=(__detailConfig.getApiPath("ljgm_js")+"api/cart/directbuy.jhtml",window.location.search.substr(1)),l="",d="?ss="+(new Date).getMilliseconds()+"&itemtype="+s+"&gcodes="+n.join(",")+"&icount="+$("#buy_number").val()+"&opgcode="+t.components.kxzp.getKXZP().join()+"&servicecode="+t.components.service.getSelectedService().join()+"&customids=&sharecode="+t.shareCode+"&terminal="+t.terminal;""!==c&&(d+="&"+c);var p=$(".installment-dropdown-wrapper.checked"),u=p.attr("data-paytype")+"|"+p.attr("data-cycle");if(""!==p.find(".installment-info span").text()&&p.find(".installment-info span").text().indexOf("选择分期")===-1&&(d+="&defaultPayment="+encodeURIComponent(u),l="&defaultPayment="+encodeURIComponent(u)),t.baseInfo.deliveryPrice&&t.baseInfo.deliveryPrice.offerDetailList&&t.baseInfo.deliveryPrice.offerDetailList.length>0&&(d+="&salesCouponId="+t.baseInfo.deliveryCouponIdList.join()),90==t.baseInfo.buOwner){if(""==$("#showpop").val())return layer.msg("请选择号码"),!1;var m=$("div.de_info_section1 .de_sec_main").eq(1).find("span.active").attr("code");d+="&phoneServiceNumber="+$("#showpop").val()+"&dpackageId="+m,d+="&goodsId="+$("#showpop").attr("goodsid")}if(t.isLcodeProduct()){var h=t.baseInfo.LCode;d+="&kcode="+h}if(window.passport&&window.passport.isLogin()){if(t.baseInfo.isNeedSN&&t.baseInfo.isService&&"1"==t.baseInfo.serviceType){if(!t.baseInfo.SNCode)return t.components.buygroup&&t.components.buygroup.checkSNCode("isOnSwitch"),!1;d+="&sn="+t.baseInfo.SNCode}if(t.baseInfo.isNeedSN&&t.baseInfo.isService&&"4"==t.baseInfo.serviceType){if(!t.baseInfo.IMEICode)return t.components.buygroup&&t.components.buygroup.checkIMEICode("isOnSwitch"),!1;d+="&sn="+t.baseInfo.IMEICode}if(t.baseInfo.isNeedSN&&t.baseInfo.isService&&"6"==t.baseInfo.serviceType){if(!t.baseInfo.BacknewmtmCode)return t.components.buygroup&&t.components.buygroup.checkBacknewmtm("isOnSwitch"),!1;d+="&sn="+t.baseInfo.BacknewmtmCode}if(t.baseInfo.isHasPersonal&&!t.baseInfo.isIntegral&&window.passport.cookie&&90==window.passport.cookie.groupCode&&1===window.shopId&&!window.$p.components.srdz.isSelcetedSrdz())return layer.msg("亲！您需要选择私人定制信息才能购买！"),!1;if(t.activity&&1==t.baseInfo.activityType&&1==t.activity.purchaseLimiting&&t.jsonpIsTuangouUser(function(e){0==e.rc&&1==t.activity.hasPurchased&&(t.components.buygroup.setBuyButton("您已参团",!0),layer.msg("您已参团"))}),t.baseInfo.isHasPersonal)if(t.components.srdz&&2==t.components.srdz.upload_type){var f=t.components.srdz.getdz();f?(f=JSON.parse(decodeURIComponent(t.components.srdz.getdz())),f.push({customize:2,ptside:"A",ptmode:1,pttype:1}),d+="&personalization="+encodeURIComponent(JSON.stringify(f))):d+="&personalization="+encodeURIComponent(JSON.stringify([{customize:2,ptside:"A",ptmode:1,pttype:1}]))}else d+="&personalization="+t.components.srdz.getdz();if(t.baseInfo.isIntegral)if("V_0"==t.baseInfo.virtualAreaCode)t.jsonpgetIntegral(null,function(e){if(0==e.ret){var o=e.data&&e.data.effectiveValue||0;o<t.baseInfo.virtualPrice*$("#buy_number").val()?layer.msg("亲，您的消费积分当前余额不够,请赶快去赚取！"):(d+="&virtualCoinType=0",i(d,function(){window.location.href=__detailConfig.getApiPath("ljgm_js")+"checkout/lenovopc.html?buytype=1&nc=1"+l}))}else layer.msg("系统繁忙，请稍后重试！")});else if("V_1"==t.baseInfo.virtualAreaCode)t.jsonpgetIntegral({type:1},function(e){if(0==e.ret){var o=e.data||0;if(!(o<t.baseInfo.virtualPrice*$("#buy_number").val()))return d+="&virtualCoinType=1",i(d,function(){window.location.href=__detailConfig.getApiPath("ljgm_js")+"checkout/lenovopc.html?buytype=1&nc=1"+l}),!1;$("#ledou-not-enough span").unbind().click(function(){layer.closeAll()}),layer.open({type:1,title:!1,skin:"ledou-not-enough-layer",closeBtn:0,anim:2,shadeClose:!0,area:"417px",content:$("#ledou-not-enough")})}else layer.msg("系统繁忙，请稍后重试！")});else{if("V_3"!=t.baseInfo.virtualAreaCode)return i(d,function(){window.location.href=__detailConfig.getApiPath("ljgm_js")+"checkout/lenovopc.html?buytype=1&nc=1"+l}),!1;t.jsonpgetIntegral({type:3},function(e){if(0==e.ret){var o=e.data||0;o<t.baseInfo.virtualPrice*$("#buy_number").val()?layer.msg("亲，您的企业积分当前余额不够,请赶快去赚取！"):(d+="&virtualCoinType=3",i(d,function(){window.location.href=__detailConfig.getApiPath("ljgm_js")+"checkout/lenovopc.html?buytype=1&nc=1"+l}))}else layer.msg("系统繁忙，请稍后重试！")})}else{if(!((2==t.baseInfo.activityType||3==t.baseInfo.activityType)&&t.activity&&t.nowNumber>t.activity.buyStartTime&&t.nowNumber<t.activity.buyEndTime))return 90==t.baseInfo.buOwner?(i(d,function(e){e.t&&(window.location.href=__detailConfig.getApiPath("ljgm_js")+"toIdentity.jhtm?phoneServiceNumber="+$("#showpop").val()+"&buyType=1&softReservationId="+e.t+"&nc=1")}),!1):(i(d,function(e){window.location.href=__detailConfig.getApiPath("ljgm_js")+"checkout/lenovopc.html?buytype=1&nc=1"+l+(e.t&&e.t.salesCouponId?"&salesCouponId="+e.t.salesCouponId:"")}),!1);t.components.buygroup.sg_queue()}}else window.$p.loginToPage()}catch(t){e.warn("BuyGroup组件=> ljgm方法错误 ------------->"),e.warn(t),layer.msg(e.errorMessage.busy)}},l=function(){try{if(("7ef1d628-5bd3-4651-9530-793678cc02af"==faid&&!$p.isProActivityBefore||$p.proStockByOptions)&&$p.buyProNumber>window.$p.baseInfo.stock)return layer.msg("库存不足，请更新购买数量!"),!1;if(!window.$p.components.guige.isExist_gg())return!1;var t=r(),i=t.length>1?2:0,o="",a=$p.components.srdz.getdz();$p.components.srdz&&2==$p.components.srdz.upload_type?a?(a=JSON.parse(decodeURIComponent($p.components.srdz.getdz())),a.push({customize:2,ptside:"A",ptmode:1,pttype:1}),o=encodeURIComponent(JSON.stringify(a))):o=encodeURIComponent(JSON.stringify([{customize:2,ptside:"A",ptmode:1,pttype:1}])):o=a?decodeURIComponent(a):"",window.$p.jsonpAddItemToCart({terminal:window.$p.terminal,itemtype:i,gcodes:t.join(","),opgcode:window.$p.components.kxzp.getKXZP().join(),servicecode:window.$p.components.service.getSelectedService().join(),personalization:o,icount:$("#buy_number").val()},function(t){40017==t.resultCode||20028==t.resultCode||10028==t.resultCode||20047==t.resultCode?(e.warn("additemtocart return data fail"+t.resultCode),layer.msg(t.resultMsg)):0==t.resultCode?window.location.href=window.$p.enterpriseLoop(__detailConfig.getApiPath("gwc"))+"cart/index.html?plat="+window.$p.terminal:10027==t.resultCode||10029==t.resultCode?(layer.msg(t.resultMsg),setTimeout(function(){location.reload()},1500)):(e.warn("additemtocart return data fail"+t.resultCode),layer.msg(t.resultMsg))},function(e){$("#modal-layer .img-tips").attr("src","../series/product/xiaoxin/images/line-up-tips.jpg"),window.$p.showTips()})}catch(t){e.warn("BuyGroup组件=> jrgwc方法错误 ------------->"),e.warn(t),layer.msg(e.errorMessage.busy)}},d=function(){c()},p=function(){try{var e={page_name:"商品详情页",click_name:"加入购物车",material_cd:$p.baseInfo.materialNumber,goods_pay_subtotal:$p.calcPrice(),goods_unit_prc:parseFloat($p.calcAllSingelPrice()),goods_number:parseFloat($("#buy_number").val())},t=$.extend(window.$p.public_obj,e);sensors2022_05_16.track("SubBeforeClick",t)}catch(e){console.log(e)}passport&&passport.isLogin&&passport.isLogin()?l():window.$p.loginToPage()};window.components||(window.components={}),window.components.BuyGroup=t}(window.PDUtil),function(e){function t(t){var i=this;this.data={totalCount:0,totalPage:0,showTabIndex:0,comments:[],labels:[],pageIndex:1,productId:0,level:0,label:"",commentIsShow:!1,firstClick:!0,onlyThis:2,isFirstLoadComment:!0},this.declarationUrl="/series/product/xiaoxin/images/newmianzeshengming.jpg",this.thinkDriverDownloadUrl="http://think.lenovo.com.cn/support/driver/mainpage.aspx#ThinkPad?from=shop",this.lenovoDriverDounloadUrl="https://newsupport.lenovo.com.cn/driveDownloads_index.html? fromsource=guanwangchanpin",this.thinkBXPZUrl="http://think.lenovo.com.cn/service/warranty/repairDeploy.html?from=shop",this.lenovoBXPZUrl="https://newsupport.lenovo.com.cn/guardeploySearch.html? fromsource=guanwangchanpin",this.thinkFWWDUrl="http://think.lenovo.com.cn/stations/TSStation.aspx?from=shop",this.lenovoFWWDUrl="http://support.lenovo.com.cn/lenovo/wsi/station/servicestation/default.aspx?from=shop",this.$container=$("#container_info"),this.$box_pagebar=$("#pj_number > ul"),this.$box_information=$("#box_information"),this.$box_configuration=$("#box_configuration"),this.$box_comment=$("#box_comment"),this.$box_service=$("#box_service"),this.$commentList=$("#assess_item"),this.$commentLabels=$("#comment_labels"),this.$button_showthis=$("#comment_only_show_this"),this.$containerTabs=$("#container_info .ul-box li"),this.data.commentIsShow=this.$containerTabs.eq(0).is(":hidden")&&this.$containerTabs.eq(1).is(":hidden"),this.$containerTabs.each(function(e,t){if("tab_ljgm"!=$(t).attr("id")){var i=$(t).text();$(t).attr("latag","latag_pc_detail_bottom_nav_"+e+"_"+i)}}),"e5c62c8b-cfae-4771-b585-bfe718a5d57a"===faid?this.$containerTabs.on("click",function(){return"tab_ljgm"!==$(this).attr("id")&&void $("html, body").scrollTop($("#container_info").offset().top)}):this.$containerTabs.on("click",function(){return"tab_ljgm"!==$(this).attr("id")&&void(0===$(document).scrollTop()||$(".detail-all-tab-container").hasClass("fixed")?$("html, body").scrollTop($("#container_info").offset().top-102):$("html, body").scrollTop($("#container_info").offset().top-52))});try{this.pagebar=new components.PageBar(this.$box_pagebar),this.pagebar.data.onPageChange=function(e){i.data.pageIndex=i.pagebar.data.pageIndex=e,i.renderComment()}}catch(t){e.warn("Configuration组件 初始错误 ---------->"),e.warn(t)}t&&this.init()}t.prototype={constructor:t,init:function(){var t=this;try{t.bindEvent()}catch(t){e.warn("Configuration.bindEvent error"),e.warn(t)}t.data.commentIsShow&&setTimeout(function(){t.renderComment()},1e3),setTimeout(function(){try{window.$p.components.configInfo.renderCommentNumber()}catch(t){e.warn("Configuration.renderCommentNumber error"),e.warn(t)}},1e3),t.adddeclaration(),t.addCustomerService(),t.addStaffService()},bindEvent:function(){var e=0,t=this;this.$box_comment.find(".assess_tRight .assess_btn").eq(0).addClass("checked");var i=this.$container.find("ul.ul-box li.checked");i&&1==i.length&&(this.data.showTabIndex=parseInt(i.attr("data-index")),2==this.data.showTabIndex&&t.$container.find(".info-box").eq(2).show());var o=0,a=$(".detail-all-tab-container");$(window).on("scroll",function(){o=$(".tab-fix-helper").offset().top-$(window).scrollTop(),"e5c62c8b-cfae-4771-b585-bfe718a5d57a"===faid||"365421ca-317e-4547-95fd-9c5b75c6f2ca"===faid?($("#container_info .detail-all-tab-container").css({top:0}),o<=52?a.addClass("fixed").parent().find(".tab-fix-helper").css({"margin-top":"52px"}):a.removeClass("fixed").parent().find(".tab-fix-helper").css({"margin-top":"0"})):o<=102?a.addClass("fixed").parent().find(".tab-fix-helper").css({"margin-top":"52px"}):a.removeClass("fixed").parent().find(".tab-fix-helper").css({"margin-top":"0"})}),$("#total-evaluate-count").on("click",function(){$(".ul-box li").each(function(){$(this).text().indexOf("评价")!==-1&&$(this).trigger("click")})}),$("#tab_ljgm span").on("mouseenter",function(){$(this).attr("title",""),$(".tab-detail-infobox").remove(),t.addPopDetailBox(),$(".tab-detail-infobox").slideDown(),$(".tabtxt").ellipsis({row:2,onlyFullWords:!0,position:"tail"})}).on("mouseleave",function(){$(".tab-detail-infobox").slideUp()}),this.$container.find("ul.ul-box li").on("click",function(){var e=$(this),i=e.attr("data-index");return t.data.showTabIndex!=i&&"tab_ljgm"!==e.attr("id")&&(t.data.firstClick&&!t.data.commentIsShow&&(t.renderComment(),t.data.firstClick=!1),e.siblings(".checked").removeClass("checked"),e.addClass("checked"),t.$container.find(".info-box").eq(t.data.showTabIndex).hide(),t.data.showTabIndex=i,t.$container.find(".info-box").eq(i).show(),void 0)}),this.$box_comment.find(".assess_tRight .assess_btn").on("click",function(){var e=$(this),i=e.attr("data-level");return t.data.level!=i&&(e.siblings(".checked").removeClass("checked"),e.addClass("checked"),t.data.level=i,t.data.label="",t.data.pageIndex=t.pagebar.data.pageIndex=1,$("#comment_labels div.mjyx_info").removeClass("mjyx_active"),t.renderComment(),void 0)}),this.$box_comment.find("#comment_labels").on("click",".mjyx_info",function(e){var i=$(this),o=i;if(i.hasClass("mjyx_info")||(o=i.parent()),o.hasClass("mjyx_active"))return!1;$("#comment_labels div.mjyx_active").removeClass("mjyx_active"),o.addClass("mjyx_active");var a=o.find("span:first");return t.data.label=a.text(),t.data.pageIndex=t.pagebar.data.pageIndex=1,t.renderComment(),!1}),this.$button_showthis.on("click",function(){t.data.pageIndex=t.pagebar.data.pageIndex=1,t.data.label="",t.$button_showthis.get(0).checked?t.data.onlyThis=1:t.data.onlyThis=2,t.renderComment(),t.renderCommentNumber()}),t.$commentList.on("click","div.assess_picBtn",function(){var t=$(this),i=e=parseInt(t.attr("data-index")||0);t.toggle(function(){t.addClass("borderActive").siblings().removeClass("borderActive"),t.find("span").slideDown(1e3),t.siblings().find("span").hide(),t.parent().parent().find("ul.assess_ul li").eq(i).show().siblings().hide(),t.parent().parent().find(".btn_div").show()},function(){t.parent().parent().find("ul.assess_ul li").eq(i).hide(),$(".btn_div").hide(),$(".assess_picBtn").eq(i).removeClass("borderActive"),$(".assess_picBtn").eq(i).find("span").hide()}),t.trigger("click")}),t.$commentList.on("click","ul.assess_ul li",function(){var e=$(this);e.hide();var t=e.index();$(".btn_div").hide(),$(".assess_picBtn").eq(t).removeClass("borderActive"),$(".assess_picBtn").eq(t).find("span").hide()}),t.$commentList.on("click","span.assess_btnRight",function(){var t=$(this).parent().parent().parent(),i=t.find(".assess_ul li").length;e++,e>=i&&(e=0);var o=t.find(".assess_picBtn").eq(e);o.addClass("borderActive").siblings().removeClass("borderActive"),o.find("span").show(),o.siblings().find("span").hide(),t.find(".assess_ul li").eq(e).show().siblings().hide()}),t.$commentList.on("click","span.assess_btnLeft",function(){var t=$(this).parent().parent().parent(),i=t.find(".assess_ul li").length;e<=0&&(e=i),e--;var o=t.find(".assess_picBtn").eq(e);o.addClass("borderActive").siblings().removeClass("borderActive"),o.find("span").show(),o.siblings().find("span").hide(),t.find(".assess_ul li").eq(e).show().siblings().hide()})},addPopDetailBox:function(){var e="x"+$("#buy_number").val(),t="";$p.baseInfo.isIntegral?$p.baseInfo.isShowPrice?("V_0"==$p.baseInfo.virtualAreaCode?e="+"+$p.baseInfo.virtualPrice+"积分":"V_1"==$p.baseInfo.virtualAreaCode&&(e="+"+$p.baseInfo.virtualPrice+"乐豆"),t=$p.baseInfo.price):t="暂无报价":(2==$p.baseInfo.salesType?t=""!==$p.baseInfo.price&&$p.baseInfo.isShowPrice?$.isEmptyObject($p.presellObj)||$p.presellObj.currentdatetime_date<$p.presellObj.presellstarttime_date?"待发布":1==$p.presellObj.displayTail?"待公布":$p.baseInfo.price:"暂无报价":0==$p.baseInfo.salesType&&(t=$p.activity&&(3==$p.activity.activityType||5==$p.activity.activityType)&&!$p.activity.showPrice&&$p.nowNumber<$p.activity.showPriceTime?"待公布":""!==$p.baseInfo.price&&$p.baseInfo.isShowPrice?$p.baseInfo.price:"暂无报价"),$p.baseInfo.deliveryPrice&&$p.baseInfo.deliveryPrice.deliverPrice&&$p.baseInfo.deliveryPrice.deliverPrice.price&&(t=parseFloat($p.baseInfo.deliveryPrice.deliverPrice.price)));var i='<div class="tab-detail-infobox" style="display: none;"><div class="arrow-wrap tab-pop-arrow"><div class="up-arrow pre-arrow"></div><div class="up-arrow curr-arrow"></div></div><div class="tab-img-wrap"><img id="tabimg" src="'+$p.baseInfo.thumbnailsURL.path+'" alt=""></div><div class="tab-detail-txt"><p class="tabtxt">'+$p.baseInfo.name+'</p><div class="tab-price-info"><span class="tab-price-sign">¥</span><span id="tabprice">'+t+'</span><span id="tabcount">'+e+"</span></div></div></div>";$("#tab_ljgm").append(i)},getShowCodes:function(){var t=this;try{if(t.$button_showthis[0].checked)return window.code;var i=[],o=$p.components.guige.data||{};return $.each(o,function(e,t){i.push(t)}),i.join(",")}catch(t){return e.warn("configuration.getShowCodes报错了-------->"),e.warn(t),window.code}},adddeclaration:function(){try{var t=this.$box_information.find("div.images");t.find("img").length>0&&t.append('<p><img src="'+this.declarationUrl+'"></p>')}catch(t){e.warn("configuration组件=> adddeclaration方法报错了-------->"),e.warn(t)}},renderComment:function(){var e=window.$p,t=this;t.data.productId=window.code,t.$commentList.html('<div style="text-align:center;">加载评论...</div>');var i=t.getShowCodes();e.jsonpEvaluateList(i,t.data.pageIndex,t.data.productId,t.data.level,t.data.label,t.data.onlyThis,function(e){t.data.isFirstLoadComment&&(t.data.isFirstLoadComment=!1,t.renderCommentLables(e)),t.callback_commentListSuccess(e,t.data.level,t.data.label)},function(){t.$commentList.html("<p style='text-align:center; padding-top:24px; color:#999;'>暂无评价内容.</p>")})},renderCommentLables:function(t){var i=window.$p.components.configInfo;i.$commentLabels.empty();try{var o="";if(t.data.lables.length>0&&"000000"==t.code){for(var a=0;a<t.data.lables.length;a++)o+='<div class="mjyx_info"><span>'+t.data.lables[a].lable+"</span>（"+t.data.lables[a].num+"）</div>";window.$p.components.configInfo.$commentLabels.append(o).parent().show()}else window.$p.components.configInfo.$commentLabels.parent().hide()}catch(t){e.warn("configuration.renderCommentLables 中 $p.jsonpEvaluateList回调函数 错误 --------------->"),e.warn(t)}},renderCommentNumber:function(){var t=this,i=$("#total-evaluate-count").attr("latag","latag_pc_detail_top_commentCount_null_"+window.code).html("0"),o=$("#comment_level_haoping").html("0"),a=$("#comment_level_zhongping").html("0"),n=$("#comment_level_chaping").html("0"),s=$("#comment_level_pic").html("0"),r=$("#comment_level_zhuip").html("0"),c=$("#comment_haopinglv").html("100%"),l=t.getShowCodes();window.$p.jsonpEvaluateRate(l,function(l){try{if("000000"==l.code){t=window.$p.components.configInfo;var l=t.commentNumberObj=l.data;i.html(l.total),$("#comment_level_all").html(l.total),o.html(l.good),a.html(l.medium),n.html(l.bad),s.html(l.picnum),r.html(l.isAdd||0);var d=l.favorRate;if(0!==l.total){c.html(d+"%");var p=t.$container.find("ul.ul-box li:eq(2)");p.text("商品评价("+l.total+")")}}}catch(t){e.warn("configuration.renderCommentNumber 中 $p.jsonpEvaluateNumber回调函数 错误 --------------->"),e.warn(t)}})},callback_commentListSuccess:function(t,i,o){function a(e){if(e){var t=e.indexOf(null);t>-1&&(e.splice(t,1),a(e))}}function n(e,t){var i=t.find(".addcomment-pic-list li").removeClass("borderActive").eq(e).addClass("borderActive");t.find(".addcomment-pic-list li .sanjiao2").hide(),i.find(".sanjiao2").show();var o=i.find("img").attr("data-big");t.find(".playBigPic2").show().find(".playBigPic2Img").html('<img src="'+o+'" />')}try{var s=this;if(s.$commentList.empty(),"000000"==t.code&&t.data.comment.length>0){var r=this.data.comments=t.data.comment;if(t.data.comment[t.data.comment.length-1].totalPage<=1)s.data.totalCount=s.pagebar.data.totalCount=r.length-1;else if(s.commentNumberObj){s.data.totalCount=s.pagebar.data.totalCount=10*t.data.comment[t.data.comment.length-1].totalPage}else s.data.totalCount=s.pagebar.data.totalCount=10*t.data.comment[t.data.comment.length-1].totalPage;s.pagebar.render();for(var c=0;c<r.length-1;c++){var l="";if(l+='<div class="assess_item"> ',l+=' \t<div class="assess_left">',l+=' \t\t<div class="assess_name">'+r[c].euser+"</div>",l+='\t\t<span class="start_bg start'+r[c].escore+'"></span>',l+=' \t\t<div class="assess_time">'+r[c].etime+"</div>",l+=" \t</div>",l+=' \t<div class="assess_right">',l+=' \t\t<div class="assess_con">'+r[c].edesc+"</div>",r[c].eimagelist.length>0){l+=' \t\t<div class="assess_picDiv">',l+=' \t\t\t<div class="assess_picTop">';for(var d=0;d<r[c].eimagelist.length;d++)l+=' \t\t\t\t<div class="assess_picBtn" data-index="'+d+'"><img src='+r[c].eimagelist[d].miniUrl+'><span class="sanjiao"></span></div>';l+="\t\t\t</div>",l+="\t\t\t<div>",l+='\t\t\t\t<ul class="assess_ul">';for(var p=0;p<r[c].eimagelist.length;p++)l+="\t\t\t\t\t<li><img src="+r[c].eimagelist[p].picUrl+"></li>";l+="\t\t\t\t</ul>",l+='\t\t\t\t<div class="btn_div">',l+='\t\t\t\t\t<span class="assess_btnLeft"></span>',l+='\t\t\t\t\t<span class="assess_btnRight"></span>',l+="\t\t\t\t</div>",l+="\t\t\t</div>",l+="\t\t</div>"}if(r[c].reply.length>0)for(var u=0;u<r[c].reply.length;u++)l+='\t\t<div class="service_info">',l+='\t\t\t<div class="info_top">'+r[c].reply[u].retname+r[c].reply[u].rettime+"</div>",l+="\t\t\t<div>"+r[c].reply[u].retdesc+"</div>",l+="\t\t</div>";if(r[c].addList&&r[c].addList.length)for(var m=0,h=r[c].addList.length;m<h;m++){var f="【追评】",v=r[c].totalDay;if(isNaN(v)||(v=+v,f=v>=1?"【购买"+v+"天后追评】":"【购买当天追评】"),l+='                                <div class="addcomment">                                    <p class="addcomment-days">'+f+'</p>                                    <p class="addcomment-con">'+r[c].addList[m].addDesc+"</p>",r[c].addList[m].addEimagelist&&r[c].addList[m].addEimagelist.length){l+='<div class="addcomment-pic"><ul class="addcomment-pic-list">';for(var y=0,g=r[c].addList[m].addEimagelist,D=g.length;y<D;y++)l+='<li data-index="'+y+'"><span class="sanjiao2"></span><img src="'+g[y].miniUrl+'" data-big="'+g[y].picUrl+'" data-date="'+g[y].uploadtime+'" style="width:60px;height:60px;" /></li>';l+='</ul><div style="clear:both;height:0;"></div>',l+='<div class="playBigPic2"><span class="assess_btnLeft"></span><span class="assess_btnRight"></span><div class="playBigPic2Img"></div></div>',l+="</div>"}var b=r[c].addList[m].addReturnList;if(a(b),b&&b.length)for(var y=0,D=b.length;y<D;y++)l+='<div class="addcomment-ap">',l+='<p class="addcomment-ap-tit">'+b[y].retname+" "+b[y].rettime+"</p>",l+='<p class="addcomment-ap-con">'+b[y].retdesc+"</p>",l+="</div>";l+="</div>"}l+="\t</div>",l+="</div>",this.$commentList.append(l),$(".addcomment-pic-list li").off().on("click",function(){n($(this).index(),$(this).closest(".addcomment"))}),$(".playBigPic2Img").off().on("click",function(){$(this).closest(".playBigPic2").hide().prevAll(".addcomment-pic-list").find("li").removeClass("borderActive").find(".sanjiao2").hide()}),$(".playBigPic2 .assess_btnLeft,.playBigPic2 .assess_btnRight").off().on("click",function(){var e=$(this).closest(".addcomment"),t=e.find(".addcomment-pic-list li").length,i=e.find(".addcomment-pic-list li.borderActive").index();$(this).hasClass("assess_btnLeft")?i--:i++,i>=t&&(i=0),i<0&&(i=t-1),n(i,e)})}}else"000000"==t.code&&0==t.data.comment.length?this.$commentList.html('<div style="text-align:center;">没有更多评论了</div>'):this.$box_comment.html("<p style='text-align:center; padding-top:24px; color:#999;'>暂无评价内容.</p>")}catch(t){e.warn("configuration.callback_commentListSuccess 错误 --------------->"),e.warn(t)}},addCustomerService:function(){var e=this,t=new RegExp(/^(84|85|86)$/),i=new RegExp(/^(09|48|A4|76|74|47|04|35|B3|84|85|86)$/),o=$p.baseInfo.productGroupNo;i.test(o)&&($("#container_info .ul-box li[data-index=3]").show(),t.test(o)?($("#box_service .service-box").removeClass("lenovo-service-box").find(".self-service-item").eq(2).hide(),$("#box_service .self-service .self-service-qd").attr("href",e.thinkDriverDownloadUrl),$("#box_service .self-service .self-service-cx").attr("href",e.thinkBXPZUrl)):($("#box_service .self-service .self-service-qd").attr("href",e.lenovoDriverDounloadUrl),$("#box_service .self-service .self-service-cx").attr("href",e.lenovoBXPZUrl)))},addStaffService:function(){var e=this,t=new RegExp(/^35$/),i=$p.baseInfo.productGroupNo;t.test(i)&&(e.$box_service.find(".rg-item-last").hide(),e.$box_service.find(".rg-service-item").addClass("rg-item-only").find(".rg-service-wx").addClass("rg-service-ipad-wx"))}},window.components||(window.components={}),window.components.Configuration=t}(window.PDUtil),function(){function e(e){this.data={couponObj:{}},this.$couponCard=$(".coupon-cart"),this.$couponCard.attr("latag","latag_pc_detail_top_null_coupon_"+window.code),e&&this.init()}function t(e,t){var i=null;return function(){var o=this,a=arguments;clearTimeout(i),i=setTimeout(function(){e.apply(o,a)},t)}}e.prototype={constructor:e,init:function(){this.eventBindCoupon(),$p.baseInfo.isIntegral||96==$p.baseInfo.salesType&&$p.isBusinessDetail||this.getCoupon()},getCoupon:function(e,t){var i=this;$.ajax({type:"GET",url:__detailConfig.getApiPath("coupon")+"couponnew/api/coupon/getCouponsByProductTemplateWithBestWay.jhtm?ss="+(new Date).getMilliseconds(),data:{categoryCode:$p.baseInfo.categoryCode,faId:faid,goodsCode:code,getTerminal:$p.terminal,shopId:window.shopId,skipDiscountCoupon:e||0},dataType:"jsonp",jsonp:"callbackparam",jsonpCallback:"jQueryJSONP_getCouponsByProductTemplate",timeout:5e3,success:function(e){if(1==e.success){if(e.t&&e.t.salesCouponTemplateWithHasCouponList){i.data.couponObj.couponArr=[];for(var t=0,o=e.t.salesCouponTemplateWithHasCouponList;t<o.length;t++)i.data.couponObj.couponArr.push({templeteType:o[t].templeteType,thumbnail:o[t].thumbnail,id:o[t].salesCouponInfo.id,token:o[t].salesCouponInfo.token||"",name:o[t].salesCouponInfo.name,validityTime:o[t].salesCouponInfo.validityTime,description:o[t].salesCouponInfo.description,terminal:o[t].salesCouponInfo.terminal,title:o[t].salesCouponInfo.title,type:o[t].salesCouponInfo.type,conditions:o[t].salesCouponInfo.condition||"",specialTag:"undefined"!=typeof o[t].specialTag&&o[t].specialTag||""});if(passport&&passport.isLogin()){if(i.data.couponObj.couponArr&&i.data.couponObj.couponArr.length>0){for(var a=0,n=[];a<i.data.couponObj.couponArr.length;a++)n.push(i.data.couponObj.couponArr[a].id);i.isCouponOwned(n,i.renderCoupon)}}else i.renderCoupon()}e.t&&"undefined"!=typeof e.t.bestCouponId&&"undefined"!=typeof e.t.bestPrice&&(i.data.couponObj.bestCouponId=e.t.bestCouponId,i.data.couponObj.amount=e.t.bestPrice,window.$p.buyNowEstimateButton())}else console.log("优惠券信息接口异常！")},error:function(e){pd.log("the ajax is fail"+e.responseText+"--"+e.statusText,"warn")},complete:function(){t&&"function"==typeof t&&t()}})},isCouponOwned:function(e,t){var i=this;e&&$.ajax({type:"GET",url:__detailConfig.getApiPath("coupon")+"couponnew/api/coupon/getUserIshaveTheCoupon.jhtm?ss="+(new Date).getMilliseconds(),data:{salesCouponIds:e.join(","),shopId:window.shopId},dataType:"jsonp",jsonp:"callbackparam",jsonpCallback:"jQueryJSONP_getUserIshaveTheCoupon",timeout:5e3,success:function(e){if(1==e.success){if(e.t)for(var t=0;t<e.t.length;t++)for(var o=0;o<i.data.couponObj.couponArr.length;o++)i.data.couponObj.couponArr[o].id===e.t[t].id&&(i.data.couponObj.couponArr[o].has=e.t[t].has)}else console.log("优惠券查询接口异常！")},error:function(e){console.log("the ajax is fail"+e.responseText+"--"+e.statusText,"warn")},complete:function(){t&&"function"==typeof t&&t()}})},getApplyCoupon:function(e,t,i){var o=function(e,t){layer.msg(e,{time:t,area:["182px","50px"]})};e&&$.ajax({type:"GET",url:__detailConfig.getApiPath("coupon")+"couponnew/api/coupon/bindForOnce.jhtm?ss="+(new Date).getMilliseconds(),
data:{token:e.token,salesCouponId:e.id,getTerminal:$p.terminal,shopId:window.shopId},dataType:"jsonp",jsonp:"callbackparam",timeout:5e3,success:function(i){1==i.success?(o("领取成功",2e3),t.off().text("可用商品").attr({href:__detailConfig.getApiPath("couponGoodsList")+"?couponId="+e.id,target:"_blank"}).parent(".coupon-item-right").addClass("coupon-item-select-right").parents(".coupon-card-li").addClass("taken").find(".card-evaluate-terminal, .card-evaluate-date").addClass("card-gray-text"),t.parents(".coupon-card-li").find(".coupon-item-left").append('<div class="card-item-has"></div>')):"10008"===i.resultCode?o("此券已领完!",2e3):"02"===i.resultCode?o(i.resultMsg,2e3):"10006"===i.resultCode?o("此券已过期!",2e3):console.log("领取优惠券接口异常！")},error:function(e){pd.log("the ajax is fail"+e.responseText+"--"+e.statusText,"warn")},complete:function(){i&&"function"==typeof i&&i()}})},renderCoupon:function(){var e=$p.components.couponCard,t=e.data.couponObj.couponArr,i="",o="";if(t&&t.length>0){$p.baseInfo.couponIconNum++;var a='<div class="yhq_detail"><div class="coupon-state-info"><span class="coupon-state-txt">可用优惠券</span></div><div class="coupon-check-link"><a href="" class="couponlink" target="_blank">查看我的优惠券<i></i></a></div><ul class="coupon-card-ul"></ul></div>';$("#coupon-layer-new-wrap .coupon-popup-cont .coupon-text").length>0?$("#coupon-layer-new-wrap .coupon-popup-cont .coupon-text").after(a):$("#coupon-layer-new-wrap .estimated-delivery-price-div").length>0?$("#coupon-layer-new-wrap .estimated-delivery-price-div").after(a):$("#coupon-layer-new-wrap .coupon-popup-upgradeGoods").length>0?$("#coupon-layer-new-wrap .coupon-popup-upgradeGoods").after(a):$("#coupon-layer-new-wrap .coupon-popup-cont").prepend(a),1==t.length&&$(".coupon-popup-cont").addClass("coupon-popup-single-count");for(var n=0,s=[];n<t.length;n++){if(1==t[n].templeteType)if(1==t[n].type||4==t[n].type||6==t[n].type){var r=t[n].thumbnail.replace("￥","");i+='<div class="amount-coupon" latag="latag_pc_detail_top_null_优惠券_'+window.code+'"><span class="amount-num">'+r+"元</span>"+(t[n].specialTag?'<span class="coupon-bg">'+(t[n].specialTag.newUserFlag||"券")+"</span>":'<span class="coupon-bg">券</span>')+"</div>"}else i+='<div class="amount-coupon" latag="latag_pc_detail_top_null_优惠券_'+window.code+'"><span class="amount-num">'+t[n].thumbnail+"</span>"+(t[n].specialTag?'<span class="coupon-bg">'+(t[n].specialTag.newUserFlag||"券")+"</span>":'<span class="coupon-bg">券</span>')+"</div>";else i+='<div class="amount-coupon" latag="latag_pc_detail_top_null_优惠券_'+window.code+'"><span class="amount-num">'+t[n].thumbnail+"</span>"+(t[n].specialTag?'<span class="coupon-bg">'+(t[n].specialTag.newUserFlag||"券")+"</span>":'<span class="coupon-bg">券</span>')+"</div>";passport&&passport.isLogin()&&t[n].has?1==t[n].templeteType?o+='<li class="coupon-card-li taken"><div class="coupon-item-left coupon-countitem-left"><div class="coupon-item-prc-box"><i class="currency-sign">¥</i><span class="coupon-price">'+parseFloat(t[n].title)+'</span><span class="coupon-item-mjinfo">'+t[n].conditions+'</span></div><div class="coupon-item-title" title="'+t[n].name+'">'+t[n].name+'</div><div class="card-evaluate-terminal card-gray-text" title="'+t[n].terminal+'">'+t[n].terminal+'</div><div class="card-evaluate-date card-gray-text">'+t[n].validityTime+'</div><div class="card-item-des">详细说明 <i class="card-item-icon"></i></div><div class="card-item-info"><div class="card-item-info-desc">'+t[n].description+'</div></div><div class="card-item-has"></div></div><div class="coupon-item-right coupon-item-select-right"><a class="coupon-taken-btn" href="'+__detailConfig.getApiPath("couponGoodsList")+"?couponId="+t[n].id+'" target="_blank" latag="latag_pc_detail_top_null_优惠券可用商品_'+window.code+'">可用商品</a></div></li>':2==t[n].templeteType?o+='<li class="coupon-card-li taken"><div class="coupon-item-left coupon-fenqi-left"><div class="coupon-item-prc-box"><span class="no-interest-text1">'+t[n].title+'</span><span class="no-interest-text2">'+t[n].conditions.replace(/\、/g,"/").replace(/\s+/g,"")+'</span></div><div class="coupon-item-title" title="'+t[n].name+'">'+t[n].name+'</div><div class="card-evaluate-terminal card-gray-text" title="'+t[n].terminal+'">'+t[n].terminal+'</div><div class="card-evaluate-date card-gray-text">'+t[n].validityTime+'</div><div class="card-item-des">详细说明 <i class="card-item-icon"></i></div><div class="card-item-info"><div class="card-item-info-desc">'+t[n].description+'</div></div><div class="card-item-has"></div></div><div class="coupon-item-right coupon-item-select-right"><a class="coupon-taken-btn" href="'+__detailConfig.getApiPath("couponGoodsList")+"?couponId="+t[n].id+'" target="_blank" latag="latag_pc_detail_top_null_优惠券可用商品_'+window.code+'">可用商品</a></div></li>':3==t[n].templeteType&&(o+='<li class="coupon-card-li"><div class="coupon-item-left coupon-zhekou-left"><div class="coupon-item-prc-box"><span class="coupon-discount">'+e.getStringByIndex(t[n].title)[0]+'</span><span class="coupon-discount-icon">'+e.getStringByIndex(t[n].title)[1]+'</span><i class="currency-sign">折</i><span class="coupon-item-mjinfo">'+t[n].conditions+'</span></div><div class="coupon-item-title" title="'+t[n].name+'">'+t[n].name+'</div><div class="card-evaluate-terminal card-gray-text" title="'+t[n].terminal+'">'+t[n].terminal+'</div><div class="card-evaluate-date card-gray-text">'+t[n].validityTime+'</div><div class="card-item-des">详细说明 <i class="card-item-icon"></i></div><div class="card-item-info"><div class="card-item-info-desc">'+t[n].description+'</div></div><div class="card-item-has"></div></div><div class="coupon-item-right coupon-item-select-right"><a class="coupon-taken-btn" href="'+__detailConfig.getApiPath("couponGoodsList")+"?couponId="+t[n].id+'" target="_blank" latag="latag_pc_detail_top_null_优惠券可用商品_'+window.code+'">可用商品</a></div></li>'):1==t[n].templeteType?o+='<li class="coupon-card-li"><div class="coupon-item-left coupon-countitem-left"><div class="coupon-item-prc-box"><i class="currency-sign">¥</i><span class="coupon-price">'+parseFloat(t[n].title)+'</span><span class="coupon-item-mjinfo">'+t[n].conditions+'</span></div><div class="coupon-item-title" title="'+t[n].name+'">'+t[n].name+'</div><div class="card-evaluate-terminal" title="'+t[n].terminal+'">'+t[n].terminal+'</div><div class="card-evaluate-date">'+t[n].validityTime+'</div><div class="card-item-des">详细说明 <i class="card-item-icon"></i></div><div class="card-item-info"><div class="card-item-info-desc">'+t[n].description+'</div></div></div><div class="coupon-item-right"><a class="coupon-taken-btn" data-token="'+t[n].token+'" data-id="'+t[n].id+'" latag="latag_pc_detail_top_null_优惠券领取_'+window.code+'"></a></div></li>':2==t[n].templeteType?o+='<li class="coupon-card-li"><div class="coupon-item-left coupon-fenqi-left"><div class="coupon-item-prc-box"><span class="no-interest-text1">'+t[n].title+'</span><span class="no-interest-text2">'+t[n].conditions.replace(/\、/g,"/").replace(/\s+/g,"")+'</span></div><div class="coupon-item-title" title="'+t[n].name+'">'+t[n].name+'</div><div class="card-evaluate-terminal" title="'+t[n].terminal+'">'+t[n].terminal+'</div><div class="card-evaluate-date">'+t[n].validityTime+'</div><div class="card-item-des">详细说明 <i class="card-item-icon"></i></div><div class="card-item-info"><div class="card-item-info-desc">'+t[n].description+'</div></div></div><div class="coupon-item-right"><a class="coupon-taken-btn" data-token="'+t[n].token+'" data-id="'+t[n].id+'" latag="latag_pc_detail_top_null_优惠券领取_'+window.code+'"></a></div></li>':3==t[n].templeteType&&(o+='<li class="coupon-card-li"><div class="coupon-item-left coupon-zhekou-left"><div class="coupon-item-prc-box"><span class="coupon-discount">'+e.getStringByIndex(t[n].title)[0]+'</span><span class="coupon-discount-icon">'+e.getStringByIndex(t[n].title)[1]+'</span><i class="currency-sign">折</i><span class="coupon-item-mjinfo">'+t[n].conditions+'</span></div><div class="coupon-item-title" title="'+t[n].name+'">'+t[n].name+'</div><div class="card-evaluate-terminal" title="'+t[n].terminal+'">'+t[n].terminal+'</div><div class="card-evaluate-date">'+t[n].validityTime+'</div><div class="card-item-des">详细说明 <i class="card-item-icon"></i></div><div class="card-item-info"><div class="card-item-info-desc">'+t[n].description+'</div></div></div><div class="coupon-item-right"><a class="coupon-taken-btn" data-token="'+t[n].token+'" data-id="'+t[n].id+'" latag="latag_pc_detail_top_null_优惠券领取_'+window.code+'"></a></div></li>'),2!==t[n].templeteType&&(14!=t[n].type&&1!=t[n].type&&13!=t[n].type||(1==t[n].type&&(t[n].thumbnail=t[n].thumbnail.replace("￥","减")),s.push(t[n].thumbnail)))}if($("#couponbox .coupons_content").empty().append(i).addClass("couponInline"),$(".coupon-look-detail").addClass("couponInlineblock"),$(".coupon-look-detail span").text("领券"),$("#couponbox").show(),o){$("#coupon-layer-new-wrap .coupon-card-ul").html(o);var c=130*Math.ceil($("#coupon-layer-new-wrap .coupon-card-ul li").length/2)+25*(Math.ceil($("#coupon-layer-new-wrap .coupon-card-ul li").length/2)-1);$("#coupon-layer-new-wrap .coupon-card-ul").height(c)}}e.eventBindCouponList()},renderBestPriceBtn:function(e){},cancelBestPriceBtn:function(){$(".couponBestPriceWrap").remove(),$p.components.buygroup.setBuyButton("已售罄",!0)},eventBindCoupon:function(){var e=this;$(".coupon-look-detail,.ld-exchange-text").attr("latag","latag_pc_detail_top_null_优惠详情_"+window.code),$("#couponbox").on("click",".coupon-look-detail,.coupon-upgradeGoods,.coupon-combination,.coupon-interestFree,.amount-coupon,.full-discount,.coupon-zp, .ld-exchange-text",function(){layer.open({type:1,skin:"coupon-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["760px","600px"],move:!1,content:$("#coupon-layer-new-wrap")}),$(".coupon-item-right").off("click").on("click",function(){var t=$(this).find(".coupon-taken-btn"),i={id:t.attr("data-id"),token:t.attr("data-token")};if(passport&&passport.isLogin()){if("可用商品"===t.text())return void window.open(t.attr("href"));e.getApplyCoupon.call(this,i,t)}else $p.baseInfo.isIntegral&&(url=window.location.href),layer.closeAll(),window.$p.loginToPage()}),$(".coupon-item-title").ellipsis({row:1,onlyFullWords:!0,position:"tail"}),$(".card-eva-info").ellipsis({row:1,onlyFullWords:!0,position:"tail"})})},eventBindCouponList:function(){var e=this;$(".coupon-popup-title .layer-close-icon").on("click",function(){layer.closeAll()}),$(".couponlink").attr("latag","latag_pc_detail_top_null_查看我的优惠券_"+window.code),$(".couponlink").attr("href",__detailConfig.getApiPath("sgjs")+"mycenter/mycoupon.html"),$(".card-item-des").delegate($(".card-item-icon"),"mouseenter mouseleave",function(e){"mouseenter"==e.type?$(this).css("color","#252525").find("i").addClass("card-item-fight-icon").parents(".coupon-item-left").find(".card-item-info").show():"mouseleave"==e.type&&$(this).css("color","#979797").find("i").removeClass("card-item-fight-icon").parents(".coupon-item-left").find(".card-item-info").hide()}),$(".card-item-info").delegate($(".card-item-info-des"),"mouseenter mouseleave",function(e){"mouseenter"==e.type?$(this).show():"mouseleave"==e.type&&$(this).hide()}),$(".coupon-item-right").delegate($(".coupon-taken-btn"),"mouseenter mouseleave",function(e){return!$(this).hasClass("coupon-item-select-right")&&void("mouseenter"==e.type?$(this).siblings().css("borderColor"," #FF2F2F"):"mouseleave"==e.type&&$(this).siblings().css("borderColor"," #E9E9E9"))}),$("#coupon-layer-new-wrap").on("mouseenter mouseleave",".coupon-check-link",function(e){"mouseenter"==e.type?($(".coupon-check-link .couponlink").css("color","#E1140A"),$(".coupon-check-link .couponlink i").css({"border-left":"1px solid #E1140A","border-bottom":"1px solid #E1140A"})):"mouseleave"==e.type&&($(".coupon-check-link .couponlink").css("color","#606060"),$(".coupon-check-link .couponlink i").css({"border-left":"1px solid #979797","border-bottom":"1px solid #979797"}))}),$(".coupon-popup-cont").on("scroll",function(t){var i=t.target,o=i.scrollHeight,a=i.offsetHeight,n=o-a,s=i.scrollTop;if(!(n<=0)){var r=$(".scroll-bar-wrapper"),c=Math.floor(a*a/o),s=s/n*(a-c);$(".scroll-bar-pointer").attr("style","top:"+s+"px;height:"+c+"px"),r.attr("style","opacity: 1;"),e.hideScrollBar()}})},getStringByIndex:function(e){var t=[];return e.indexOf(".")>-1?(t=e.split("."),t[1]="."+t[1]):t=[e,""],t},hideScrollBar:t(function(){var e=$(".scroll-bar-wrapper");e.attr("style","opacity: 0;")},1e3)},window.components||(window.components={}),window.components.couponCard=e}(),function(){function e(e){this.hasEnterprisePoints=!1,this.itemList=[],this.itemListObj={},this.data={enterprisePointsObj:{}},this.enterprisePointFlag=!1;var t=this;setTimeout(function(){e&&t.init()},500)}e.prototype={constructor:e,init:function(){$p.baseInfo.isIntegral||$p.baseInfo.isService&&0==$p.baseInfo.isPhysical||!$p.baseInfo.isShowPrice||!$p.baseInfo.price||96==$p.baseInfo.salesType&&$p.isBusinessDetail||passport&&!passport.isLogin()||(this.hasEnterprisePoints=!0,this.itemListObj.faId=faid,this.itemListObj.goodsCode=window.code,this.itemListObj.num=$p.buyProNumber||1,this.itemListObj.isMainGood=1,$p.baseInfo.deliveryPrice&&$p.baseInfo.deliveryPrice.offerDetailList&&$p.baseInfo.deliveryPrice.offerDetailList.length>0?this.itemListObj.amount=!!$p.baseInfo.deliveryPrice.deliverPrice&&parseFloat($p.baseInfo.deliveryPrice.deliverPrice.price):this.itemListObj.amount=$p.baseInfo.price,this.itemList.push(this.itemListObj),this.getGoodsEnterprisePoints(this.itemList),this.eventBindIntegration())},getGoodsEnterprisePoints:function(e,t){var i=this;$.ajax({type:"GET",url:PDUtil.getItemDomain()+"/goods/api/query/points?ss="+(new Date).getMilliseconds(),data:{shopId:1,itemList:JSON.stringify(e),terminal:1,fa:window.faid},dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_queryPoints",timeout:5e3,success:function(e){"0"==e.status&&e.result&&1==e.result.ret?(i.data.enterprisePointsObj=e.result.enterprisePoint,i.renderGoodsEnterprisePoints()):console.log("企业积分信息接口异常！")},error:function(e){pd.log("the ajax is fail"+e.responseText+"--"+e.statusText,"warn")},complete:function(){t&&"function"==typeof t&&t()}})},renderGoodsEnterprisePoints:function(){var e=$p.components.enterprisePoints,t=e.data.enterprisePointsObj.points,i=e.data.enterprisePointsObj.type,o=e.data.enterprisePointsObj.goodsItemList,a="",n="";if(0==t)return $(".coupon-interestFree, .enterPointsListItem").remove(),e.enterprisePointFlag&&(1==$p.baseInfo.couponIconNum&&$("#couponbox").hide(),$p.baseInfo.couponIconNum--),void(e.enterprisePointFlag=!1);if("ep"==i){if($p.activity||2==$p.baseInfo.salesType)return;o&&o.length>0&&(2==o[0].ruleType?(a='<div class="event-list enterPointsListItem"><div class="list-title">获取积分</div><div class="list-content">'+PDUtil.formatShortDate(o[0].deadLineTime.replace(/-/g,"/"),1)+"前预计最高可获得"+t+'积分。<a href="javascript:;" class="integration-infoPage" latag="latag_pc_detail_top_null_integration_'+window.code+'">积分规则 ></a></div></div>',n='<span class="coupon-s coupon-interestFree" latag="latag_pc_detail_top_null_积分_'+window.code+'">最高得'+t+"企业积分</span>"):(a='<div class="event-list enterPointsListItem"><div class="list-title">获取积分</div><div class="list-content">预计最高可获得'+t+'积分。<a href="javascript:;" class="integration-infoPage" latag="latag_pc_detail_top_null_integration_'+window.code+'">积分规则 ></a></div></div>',n='<span class="coupon-s coupon-interestFree" latag="latag_pc_detail_top_null_积分_'+window.code+'">最高得'+t+"企业积分</span>"),e.enterprisePointFlag=!0,$p.baseInfo.couponIconNum++,$(".enterPointsListItem, .coupon-interestFree").remove(),0==$("#coupon-layer-new-wrap .coupon-popup-cont .coupon-text").length&&($("#coupon-layer-new-wrap .estimated-delivery-price-div").length>0?$("#coupon-layer-new-wrap .estimated-delivery-price-div").after('<div class="coupon-text"><div class="cx_text">促销</div></div>'):$("#coupon-layer-new-wrap .coupon-popup-upgradeGoods").length>0?$("#coupon-layer-new-wrap .coupon-popup-upgradeGoods:last").after('<div class="coupon-text"><div class="cx_text">促销</div></div>'):$("#coupon-layer-new-wrap .coupon-popup-cont").prepend('<div class="coupon-text"><div class="cx_text">促销</div></div>')),$(".coupon-text").append(a),$("#cxy_contents").after(n),$(".coupon-look-detail").css("display","inline-block"),$("#couponbox").show())}else if("ld"==i){if(!e.dealAllTypePromotionsShowLedou())return;window.$p.baseInfo.deliveryPrice&&window.$p.baseInfo.deliveryPrice.ledouDesc?(a='<div class="list-title">乐豆</div><div class="list-content">'+window.$p.baseInfo.deliveryPrice.ledouDesc+"，购买后最高可返"+t+"乐豆</div>",$(".ledouListItem").html(a)):(a='<div class="event-list ledouListItem"><div class="list-title">乐豆</div><div class="list-content">购买后最高可返'+t+"乐豆</div></div>",0==$("#coupon-layer-new-wrap .coupon-popup-cont .coupon-text").length&&($("#coupon-layer-new-wrap .estimated-delivery-price-div").length>0?$("#coupon-layer-new-wrap .estimated-delivery-price-div").after('<div class="coupon-text"><div class="cx_text">促销</div></div>'):$("#coupon-layer-new-wrap .coupon-popup-upgradeGoods").length>0?$("#coupon-layer-new-wrap .coupon-popup-upgradeGoods:last").after('<div class="coupon-text"><div class="cx_text">促销</div></div>'):$("#coupon-layer-new-wrap .coupon-popup-cont").prepend('<div class="coupon-text"><div class="cx_text">促销</div></div>')),$(".ledouListItem").remove(),$(".coupon-text").append(a)),n='<span class="coupon-s coupon-interestFree" latag="latag_pc_detail_top_null_乐豆_'+window.code+'">最高返'+t+"乐豆</span>",$(".coupon-interestFree").remove(),$("#cxy_contents").after(n),$(".coupon-look-detail").addClass("couponInlineblock"),$("#couponbox").show()}},eventBindIntegration:function(){$("#coupon-layer-new-wrap").on("click",".integration-infoPage",function(){window.open("https://b.lenovo.com.cn/activity/qygjfscdh.html")})},removeIntegrationItem:function(e,t,i){if(!e||0==e.length)return"";if(!i)return e;for(var o=0;o<e.length;o++)e[o][t]==i&&e.splice(o,1);return e},updateIntegrationItem:function(e,t,i){if(!e||0==e.length)return"";for(var o=0;o<e.length;o++)e[o][t]=i;return e},dealAllTypePromotionsShowLedou:function(){var e=!1;return $p.baseInfo.price&&$p.baseInfo.isShowPrice&&(e=!0,2==$p.baseInfo.salesType&&(e=("undefined"==typeof $p.presellObj||!$.isEmptyObject($p.presellObj))&&(!(0==$p.presellObj.presellType&&0==$p.presellObj.showPriceBeforePay&&$p.nowNumber<new Date($p.presellObj.presellstarttime.replace(/-/g,"/")).getTime())&&(!(0==$p.presellObj.presellType&&1==$p.presellObj.showPriceBeforePay&&$p.nowNumber<new Date($p.presellObj.showPricetime.replace(/-/g,"/")).getTime())&&!(2==$p.presellObj.presellway&&1==$p.presellObj.displayTail&&$p.nowNumber<new Date($p.presellObj.tailTime.replace(/-/g,"/")).getTime()))))),e}},window.components||(window.components={}),window.components.enterprisePoints=e}(),function(){function e(e){this.unCkProList=[],this.cookieKey="pro_list_1",this.isHideCompareWrapper=!1,e&&this.init()}e.prototype={constructor:e,init:function(){if(!$p.baseInfo.isIntegral&&96!=$p.baseInfo.salesType){this.renderCompareIcon(),this.bindEvent();var e=this.getCookie(this.cookieKey);e&&e.split(",").length>=1&&$(".search_comparepart").show(),this.renderCompareList()}},renderCompareIcon:function(){var e='<div id="div_goodsComapre" class="good-do"><a id="a_goodsCompare" href="javascript:void(0);" latag="latag_pc_detail_underslide_对比_null_'+code+'"><span class="compare-icon"></span><span class="compare-txt">对比</span></a></div>';$("#div_sc").after(e)},getDomain:function(e){var t="";return e?location.host.indexOf("lenovouat.com")>-1?t="s.lenovouat.com":location.host.indexOf("lenovo.com.cn")>-1&&(t="s.lenovo.com.cn"):location.host.indexOf("lenovouat.com")>-1?t="lenovouat.com":location.host.indexOf("lenovo.com.cn")>-1&&(t="lenovo.com.cn"),t},arrUnique:function(e){for(var t=[],i=0;i<e.length;i++)t.indexOf(e[i])==-1&&t.push(e[i]);return t},removeCookie:function(e){this.setCookie(e,"",new Date(0))},getCookie:function(e){var t=document.cookie,i=encodeURIComponent(e)+"=",o=t.indexOf(i),a=null;if(o>-1){var n=t.indexOf(";",o);n==-1&&(n=t.length),a=decodeURIComponent(t.substring(o+i.length,n))}return a},setCookie:function(e,t,i){var o=encodeURIComponent(e)+"="+encodeURIComponent(t);i instanceof Date&&(o+="; expires="+i.toGMTString()),document.cookie=o+";path=/;domain="+this.getDomain()},setGoodsSelect:function(e,t,i,o,a,n){var s=this.getCookie(this.cookieKey),r=e+"|"+t+"|"+o+"|"+i+"|"+a+"|"+n;s=s?s+","+r:r,this.setCookie(this.cookieKey,s),this.renderCompareList()},removeGoodsSelect:function(e){var t=this.getCookie(this.cookieKey);if(t){for(var i=[],o=t.split(","),a=0;a<o.length;a++)e!=o[a].split("|")[0]&&i.push(o[a]);0==i.length?this.removeCookie(this.cookieKey):this.setCookie(this.cookieKey,i.join(","))}this.renderCompareList()},getCompareFilter:function(){var e={flag:!1,goodsIds:[],gType:""},t=0;if($("#compare_pro_list .full span.isCommont").each(function(){$(this).hasClass("selectSame")&&t++}),t<=1)return e;var i=[];$("#compare_pro_list .full").each(function(){$(this).find("span.isCommont").hasClass("selectSame")&&i.push($(this).attr("data-gtype"))});var o=this.arrUnique(i);return 1==o.length?($("#compare_pro_list .full").each(function(){$(this).find("span.isCommont").hasClass("selectSame")&&e.goodsIds.push($(this).attr("data-id"))}),e.gType=o[0],e.flag=!0):e={flag:!1,goodsIds:[],gType:""},e},renderSpace:function(e){var t="";if(4==e)for(var i=0;i<e;i++)t+="<div class='pro_item'>",t+="<div class='has_no'>",t+="<span class='pro_order'>"+(i+1)+"</span>",t+="<span class='order_desc'>您还可以继续添加</span></div></div>";else for(var o=this.getCookie(this.cookieKey),a=o.split(","),i=e;i>0;i--)t+="<div class='pro_item'>",t+="<div class='has_no'>",t+="<span class='pro_order'>"+(e-i+a.length+1)+"</span>",t+="<span class='order_desc'>您还可以继续添加</span></div></div>";$("#compare_pro_list").append($(t))},renderCompareList:function(){var e=this.getCookie(this.cookieKey);if($("#compare_pro_list").html(""),e){for(var t="",i=e.split(","),o=0;o<i.length;o++){var a=i[o].split("|");t+="<div class='pro_item full' data-gtype='"+a[4]+"' data-id='"+a[0]+"'>",t+="<div class='has_pro'>",t+=this.unCkProList.indexOf(a[0])!=-1?"<span class='isCommont'></span>":"<span class='isCommont selectSame'></span>",t+="<div class='pro_img'>",t+="<img src='"+a[3]+"'></div>",t+="<div class='pro_desc'>";var n=a[5]?a[5]:"#";t+="<p class='pro_title'><a latag='latag_pc_detail_对比_对比栏_"+o+"_"+a[1]+"' target='_blank' href='"+n+"'>"+a[1]+"</a></p>",t+="<p class='pro_price'><span>"+a[2]+"</span>",t+="<a class='btn_removecompareitem' latag='latag_pc_detail_对比_对比栏_删除' data-code='"+a[0]+"' style='display: none;'>删除</a>",t+="</p></div><div class='clear'></div></div></div>"}if($("#compare_pro_list").append($(t)),i.length<4){var s=4-i.length;this.renderSpace(s)}}else this.renderSpace(4)},getUnCkProList:function(e){var t=this;return t.unCkProList=[],e?void(t.unCkProList=[]):($("#compare_pro_list div.full").each(function(){0==$(this).find("span.isCommont").hasClass("selectSame")&&t.unCkProList.push($(this).attr("data-id"))}),void console.log(t.unCkProList))},bindEvent:function(){var e=this;$(".good_action").on("click","#div_goodsComapre",function(t){var i=e.getCookie(e.cookieKey);if(e.isHideCompareWrapper){if(i)return $(".search_comparepart").show(),void(e.isHideCompareWrapper=!1);e.isHideCompareWrapper=!1}var o=window.code,a=$p.baseInfo.name,n=$p.baseInfo.price||"暂无报价",s=picpath,r=$p.baseInfo.typeId,c=location.href;if(i&&i.indexOf(o)>-1)e.removeGoodsSelect(o);else{if(i&&i.split(",").length>=4)return void $(".cantCompare").show().text("对比栏已满，您可以删除不需要的栏内商品再继续添加哦!");$(".cantCompare").hide().text(""),e.setGoodsSelect(o,a,s,n,r,c)}$(".search_comparepart").show(),t.stopPropagation()}),$(".search_comparepart").on("click","a.btn_removecompareitem",function(t){var i=$(this).attr("data-code");e.removeGoodsSelect(i),e.removeProListChecked(i),$(".cantCompare").hide().text(""),e.getUnCkProList(),t.stopPropagation()}),$(".search_comparepart").on("click","#btn_compare_clear",function(t){e.removeCookie(e.cookieKey),e.renderCompareList(),e.removeProListChecked(),$(".cantCompare").hide().text(""),e.getUnCkProList(!0),t.stopPropagation()}),$(".search_comparepart").on("mouseover","div.pro_item",function(e){$(this).find("a.btn_removecompareitem").show(),e.stopPropagation()}),$(".search_comparepart").on("mouseout","div.pro_item",function(e){$(this).find("a.btn_removecompareitem").hide(),e.stopPropagation()}),$("#compare_pro_list").on("click","span.isCommont",function(){$(this).hasClass("selectSame")?$(this).removeClass("selectSame"):$(this).addClass("selectSame"),e.getUnCkProList(),$(".cantCompare").hide().text("")}),$(".search_comparepart").on("click","#btn_compare",function(t){var i=0;if($("#compare_pro_list div.full span.isCommont").each(function(){$(this).hasClass("selectSame")&&i++}),0==i||1==i)return void $(".cantCompare").show().text("至少添加2个同类型的商品进行对比!");var o=e.getCompareFilter();0==o.flag?$(".cantCompare").show().text("只能对同类别商品进行对比,请重新选择!"):window.open("//"+e.getDomain("search")+"/compare.html?pro_list="+o.goodsIds.join(",")+"&pro_type="+o.gType),t.stopPropagation()}),$("div.comparepart_content").on("click","#btn_compare_hide",function(){e.isHideCompareWrapper=!0,$(".search_comparepart").hide()})}},1==PDUtil.isRunInNode()&&module&&module.exports?module.exports=e:(window.components||(window.components={}),window.components.GoodsCompare=e)}(),function(){function e(e){this.$container=$("#container_guige"),this.data={},this.spec=[],this.SKUResult={},this.curSpec=[],e&&this.init()}e.prototype={constructor:e,init:function(){var e=this;$p.baseInfo.isIntegral&&!$p.baseInfo.isCombinedGoods||(1!=$p.baseInfo.marketable||96==$p.baseInfo.salesType&&$p.isBusinessDetail)&&!$p.baseInfo.isCombinedGoods||$p.jsonpGuige(function(t){if(0==t.status){var i=t.result||{};$.each(i,function(t,o){return o instanceof Array?(e.data=e.formatData_yh(i)||{},e.spec=e.formatSpec_yh(i)||[],e.curSpec=e.formatCurSpec_yh(window.code,i)||[],!1):(e.data=e.formatData(i)||{},e.spec=e.formatSpec(i)||[],e.curSpec=e.formatCurSpec(window.code,i)||[],!1)})}e.buildGuigeDom(),e.$spans=$("#guige li span"),e.initSKU(e.data),$("#guige li span").each(function(){var t=$(this),i=t.attr("title");e.SKUResult[i]||t.attr("disabled","disabled").addClass(e.constStr.classNameDisabled)}).on("click",function(){var t=$(this);"disabled"===t.attr("disabled")&&t.removeClass(e.constStr.classNameDisabled).removeAttr("disabled");try{if("undefined"!=typeof sensors2022_05_16){var i={active_type:"点击选择规格关联",active_series:t.parent().parent().find(".guige-item-title").text(),active_value:t.attr("title")},o=$.extend(i,window.$p.public_obj);sensors2022_05_16.track("GoodsDetailActive",o)}}catch(e){console.log(e)}t.toggleClass(e.constStr.classNameActive).siblings().removeClass(e.constStr.classNameActive);var a=$("#guige .active");if(a.length){var n=[];a.each(function(){n.push($(this).attr("title"))}),n.length>1&&(n=n.sort(function(e,t){return e.localeCompare(t)}));var s=[];for(var r in e.data)for(var c=r.split(";"),l=0;l<c.length;l++)c[l]==t.attr("title")&&s.push(r.split(";"));if(n.length==$("#guige .active").length){for(var d=0,r=0;r<s.length;r++)e.isContained(s[r],n)&&d++;0==d&&$("#guige .active").each(function(){var i=$(this),o=[];if(o.push(t.attr("title")),i.attr("title")!==t.attr("title")){o.push(i.attr("title"));for(var a=0,n=0,r=0;r<s.length;r++)e.isContained(s[r],o)?a++:n++;a<s.length&&i.removeClass(e.constStr.classNameActive),n==s.length&&i.attr("disabled","disabled").addClass(e.constStr.classNameDisabled).removeClass(e.constStr.classNameActive)}})}var p=$("#guige .active"),u=[];p.each(function(){u.push($(this).attr("title"))});var m=u.length;$("#guige li span").not(p).not(t).each(function(){var t=$(this).siblings(".active"),i=[];if(t.length)for(var o=t.attr("title"),a=0;a<m;a++)u[a]!=o&&i.push(u[a]);else i=u.concat();i=i.concat($(this).attr("title")),i.length>1&&(i=i.sort(function(e,t){return e.localeCompare(t)})),e.SKUResult[i.join(";")]?$(this).removeClass(e.constStr.classNameDisabled).removeAttr("disabled"):$(this).attr("disabled","disabled").addClass(e.constStr.classNameDisabled).removeClass(e.constStr.classNameActive)})}else $("#guige li span").each(function(){e.SKUResult[$(this).attr("title")]?$(this).removeClass("down_line").removeAttr("disabled"):$(this).attr("disabled","disabled").addClass(e.constStr.classNameDisabled).removeClass(e.constStr.classNameActive)});e._forwardUrl()});for(var o=0,a=e.curSpec.length;o<a;o++)$("#guige li span").each(function(){$(this).attr("title")===e.curSpec[o]&&$(this).trigger("click")})})},constStr:{classNameActive:"active",classNameDisabled:"down_line"},_forwardUrl:function(){var e,t=this,i=[],o="",a=$("#guige span."+t.constStr.classNameActive);if($.each(a,function(e,t){i.push($(t).attr("title"))}),o=i.sort(function(e,t){return e.localeCompare(t)}).join(";"),e="undefined"!==t.data[o]?t.data[o]:"",e!=window.code&&e){var n=t.removeAllQueryString(window.location.search,$p.components.srdz.checkPositions);n.indexOf("?")!=-1?n+=($p.components.srdz.checkPositions.categoryCode?"&categoryCode="+$p.components.srdz.checkPositions.categoryCode:"")+($p.components.srdz.checkPositions.mainPicCode?"&mainPicCode="+$p.components.srdz.checkPositions.mainPicCode:"")+($p.components.srdz.checkPositions.cPicName?"&cPicName="+Base64.encode($p.components.srdz.checkPositions.cPicName):""):(n+=($p.components.srdz.checkPositions.categoryCode?"?categoryCode="+$p.components.srdz.checkPositions.categoryCode:"")+($p.components.srdz.checkPositions.mainPicCode?"&mainPicCode="+$p.components.srdz.checkPositions.mainPicCode:""),n+=n.indexOf("?")!=-1?$p.components.srdz.checkPositions.cPicName?"&cPicName="+Base64.encode($p.components.srdz.checkPositions.cPicName):"":$p.components.srdz.checkPositions.cPicName?"?cPicName="+Base64.encode($p.components.srdz.checkPositions.cPicName):""),window.location.href=e+".html"+n}},buildGuigeDom:function(){var e=this,t=e.spec.length,i=e.curSpec.length;if(0==t)return e;for(var o='<ul id="guige">',a=0;a<t;a++){var n=e.spec[a];for(var s in n){o+='<li class="guige-li clearfix" id="guigeitem'+a+'" class="clearfix"><div class="guige-item-title">'+s+'</div><div class="guige-item-detail">';for(var r=0,c=n[s].length;r<c;r++)o+="1"==i?'<span title="'+n[s][r]+'" class="spec-big" latag="latag_pc_detail_规格_'+s+"_"+n[s][r]+"_"+window.code+'"><i>'+n[s][r]+"</i></span>":window.$p.pd_getByteLen(n[s][r])>10?'<span title="'+n[s][r]+'" class="spec-big" latag="latag_pc_detail_规格_'+s+"_"+n[s][r]+"_"+window.code+'"><i>'+n[s][r]+"</i></span>":'<span title="'+n[s][r]+'" class="spec-mid" latag="latag_pc_detail_规格_'+s+"_"+n[s][r]+"_"+window.code+'"><i>'+n[s][r]+"</i></span>";o+="</div></li>"}}o+="</ul>",e.$container.html(o);var l=$('.guige-li:contains("操作系统")');return l.length&&$("#guige").prepend(l),$("#guige .guige-item-detail").each(function(){var e=0,t=0;$(this).children("span").each(function(i){return!e||$(this).position().top>t?(t=$(this).position().top,e++,!0):void(3==++e&&($(this).after("<br>"),e=0))})}),$(".spec-big i").ellipsis(),$(".spec-mid i").ellipsis(),e},isExist_gg:function(){var e=this,t=!1;if(e.curSpec instanceof Array){var i=e.curSpec.length;if($("#guige span.active").length==i)t=!0;else{var o=$("#guige>li");if(o.length>0)for(var a=0;a<o.length;a++)0==$(o[a]).find("span.active").length?$(o[a]).addClass("guige-bg"):$(o[a]).removeClass("guige-bg")}}return t},formatCurSpec:function(e,t){var i=[],o=t[e]||{};return $.each(o,function(e,t){e&&t&&i.push(t)}),i},formatSpec:function(e){var t=[];return $.each(e,function(e,i){var o=0;$.each(i,function(e,i){var a=!1;t[o]||(t[o]={},t[o][e]=[i]);for(var n=0;n<t[o][e].length;n++)t[o][e][n]===i&&(a=!0);a||t[o][e].push(i),o++})}),t},formatData:function(e){var t,i={},o="";return $.each(e,function(e,a){t=[],$.each(a,function(e,i){t.push(i)}),o=t.sort(function(e,t){return e.localeCompare(t)}).join(";"),i[o]=e}),i},formatData_yh:function(e){var t={};for(var i in e){var o=[];for(var a in e[i])$.each(e[i][a],function(e,t){o.push(t);
});var n=o.sort(function(e,t){return e.localeCompare(t)}).join(";");t[n]=i}return t},formatSpec_yh:function(e){var t=[],i=[];for(var o in e)for(var a in e[o])i.push(e[o][a]);for(var n=[],o=0;o<i.length;o++)$.each(i[o],function(e,i){if(n.indexOf(e)<=-1){n.push(e);var o={};o[e]=[],t.push(o)}});for(var o=0;o<i.length;o++)for(var a=0;a<t.length;a++)$.each(i[o],function(e,i){$.each(t[a],function(o,n){e==o&&t[a][o].indexOf(i)<=-1&&t[a][o].push(i)})});return t},formatCurSpec_yh:function(e,t){var i=[],o=t[e];for(var a in o)for(var n in o[a])i.push(o[a][n]);return i},initSKU:function(e){var t,i,o=this,a=o.getObjKeys(e);for(t=0;t<a.length;t++){var n=a[t],s=e[n],r=n.split(";");r=r.sort(function(e,t){return e.localeCompare(t)});var c=o.combInArray(r);for(i=0;i<c.length;i++)o.add2SKUResult(c[i],s);o.SKUResult[r.join(";")]=s}},add2SKUResult:function(e,t){var i=this,o=e.join(";");i.SKUResult[o]||(i.SKUResult[o]=t)},combInArray:function(e){var t=this;if(!e||!e.length)return[];for(var i=e.length,o=[],a=1;a<i;a++)for(var n=t.getCombFlags(i,a);n.length;){for(var s=n.shift(),r=[],c=0;c<i;c++)s[c]&&r.push(e[c]);o.push(r)}return o},getCombFlags:function(e,t){if(!t||t<1)return[];var i,o,a,n=[],s=[],r=!0;for(i=0;i<e;i++)s[i]=i<t?1:0;for(n.push(s.concat());r;)for(a=0,i=0;i<e-1;i++){if(1==s[i]&&0==s[i+1]){for(o=0;o<i;o++)s[o]=o<a?1:0;s[i]=0,s[i+1]=1;var c=s.concat();n.push(c),c.slice(-t).join("").indexOf("0")==-1&&(r=!1);break}1==s[i]&&a++}return n},getObjKeys:function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[t.length]=i);return t},removeAllQueryString:function(e,t){for(var i="?"==e[0]?e.substr(1):e,o={},a=i.split("&"),n=!1,s=0;s<a.length;s++)a[s]=a[s].split("="),o[a[s][0]]||(o[a[s][0]]=a[s][1]);for(var r in t)"undefined"!=typeof o[r]&&(n=!0,delete o[r]);return n?"?"+JSON.stringify(o).replace(/[\"\{\}]/g,"").replace(/\:/g,"=").replace(/\,/g,"&"):e},isContained:function(e,t){if(!(e instanceof Array&&t instanceof Array))return!1;if(e.length<t.length)return!1;for(var i=0,o=0;o<e.length;o++)for(var a=0;a<t.length;a++)e[o]==t[a]&&i++;return i==t.length}},window.components||(window.components={}),window.components.Guige=e}(),function(){function e(e){this.data={all:[]},this.$container=$("#container_hotlist"),this.$box=$("#div_hotlist"),e&&this.init()}e.prototype={constructor:e,init:function(){var e=this;$p.baseInfo.isIntegral||this.getAllData(function(t){e.renderDom(),e.bindEvent(),t&&t.length>0?$p.baseInfo.isCombinedGoods||this.$container.show():e.$container.hide()})},renderDom:function(){var e=this.data.all,t="";if(0==e.length)return!1;for(var i=0;i<e.length&&3!=i;i++){var o=2==i?" noborder":"",a=e[i];t+='<div class="hot_item'+o+'"><a class="hot-item" href="'+a.detailUrl+'" target="_blank" latag="latag_pc_detail_top_middle_seller1_'+a.code+'"><img src="'+(a.path||"")+'" class="hot_pic"/><div class="hot_picTitle" title="'+a.name+'">'+a.name+'</div><div class="hot_picDec">'+(a.brief||"")+'</div><div class="hot_picMoney">RMB '+a.price+"</div></a></div>"}t.length>0&&(this.$box.append(t),this.$container.removeClass("hidden"))},bindEvent:function(){},getAllData:function(e){var t=this;$p.loadHostList({},function(i){200==i.status&&(t.data.all=i.data),e&&e(i.data)})}},window.components||(window.components={}),window.components.HotList=e}(),function(){function e(e){this.data={all:[],selectedArray:[]},this.$popDialog=$(".gift-pop-box"),this.$showPopDialog=$("#gift-status-txt"),this.$shownZengpin=$(".gift-container-list"),this.$container=$("#container_zengpin"),this.hasChecked=!1,e&&this.init()}var t=window.PDUtil;e.prototype={constructor:e,init:function(){96==$p.baseInfo.salesType&&$p.isBusinessDetail||(this.getAllData(),this.renderDom(),this.bindEvent(),this.showZengpin())},renderDom:function(){var e=$p.components.bxzp.data.all,i=this.data.all,o="",a="",n="";if(e.length>0){n+='<span class="coupon-zp-title">赠品</span><div class="selectedImgs">';for(var s=0;s<e.length;s++){var r=e[s],c=$p.promotion.goodsDetailUrl&&$p.promotion.goodsDetailUrl[r.code]||"/product/"+r.code+".html";n+='<img src="'+r.path+'" alt="">',o+=$p.isComposeProduct?'<div class="coupon-zp-img checked bixuan" style="background: url('+r.path+') no-repeat;background-size: 100% 100%;" url_src="'+r.path+'"><div class="is_checked"></div><div class="zp-details"><div class="zp-title">'+r.goodsName+'</div><a class="look-zp-details" target="_blank" href="'+c+'" latag="latag_pc_detail_top_组合详情_null_'+c+'"><span>详情</span><i></i></a></div></div>':'<div class="coupon-zp-img checked bixuan"  style="background: url('+r.path+') no-repeat;background-size: 100% 100%;" url_src="'+r.path+'"><div class="is_checked"></div><div class="zp-details"><div class="zp-title">'+r.goodsName+'</div><a class="look-zp-details" target="_blank" href="'+c+'" latag="latag_pc_detail_top_赠品详情_null_'+c+'"><span>详情</span><i></i></a></div></div>'}n+="</div>"}if(n.length>0&&($p.baseInfo.couponIconNum++,$(".coupon-zp").append(n).addClass("couponInlineblock").attr("latag","latag_pc_detail_top_null_赠品_"+window.code),$(".coupon-look-detail").addClass("couponInlineblock"),$("#couponbox").show()),o.length>0&&(0==$("#coupon-layer-new-wrap .coupon-popup-zp").length&&($("#coupon-layer-new-wrap .estimated-delivery-price-div").length>0&&$("#coupon-layer-new-wrap .rule-description").length>0?$("#coupon-layer-new-wrap .rule-description").before('<div class="coupon-popup-zp"><div class="coupon-popup-zp-title">赠品</div><div class="coupon-popup-zp-imgs"></div></div>'):$("#coupon-layer-new-wrap .coupon-popup-cont").append('<div class="coupon-popup-zp"><div class="coupon-popup-zp-title">赠品</div><div class="coupon-popup-zp-imgs"></div></div>')),$(".coupon-popup-zp-imgs").append(o)),i.length>0){0==$(".coupon-zp .coupon-zp-title").length&&($p.baseInfo.couponIconNum++,$(".coupon-zp").append('<span class="coupon-zp-title">赠品</span><div class="selectedImgs"></div>').addClass("couponInlineblock").attr("latag","latag_pc_detail_top_null_赠品_"+window.code),$(".coupon-look-detail").addClass("couponInlineblock"),$("#couponbox").show());for(var l=0;l<i.length;l++){var c=$p.promotion.goodsDetailUrl&&$p.promotion.goodsDetailUrl[i[l].code]||"/product/"+i[l].code+".html";a+=$p.isComposeProduct?'<div class="coupon-zp-img kexuan" data-code="'+i[l].code+'" img_src="'+i[l].path+'" style="background: url('+i[l].path+') no-repeat;background-size: 100% 100%;" url_src="'+i[l].path+'" latag="latag_pc_detail_top_组合_null_'+c+'"><div class="is_checked"></div><div class="zp-details"><div class="zp-title">'+i[l].goodsName+'</div><a class="look-zp-details" target="_blank" href="'+c+'" latag="latag_pc_detail_top_组合详情_null_'+c+'"><span>详情</span><i></i></a></div></div>':'<div class="coupon-zp-img kexuan" data-code="'+i[l].code+'" img_src="'+i[l].path+'" style="background: url('+i[l].path+') no-repeat;background-size: 100% 100%;" url_src="'+i[l].path+'" latag="latag_pc_detail_top_可选赠品_null_'+c+'"><div class="is_checked"></div><div class="zp-details"><div class="zp-title">'+i[l].goodsName+'</div><a class="look-zp-details" target="_blank" href="'+c+'" latag="latag_pc_detail_top_赠品详情_null_'+c+'"><span>详情</span><i></i></a></div></div>'}}a.length>0&&(0==$("#coupon-layer-new-wrap .coupon-popup-zp").length&&($("#coupon-layer-new-wrap .estimated-delivery-price-div").length>0&&$("#coupon-layer-new-wrap .rule-description").length>0?$("#coupon-layer-new-wrap .rule-description").before('<div class="coupon-popup-zp"><div class="coupon-popup-zp-title">赠品</div><div class="coupon-popup-zp-imgs"></div></div>'):$("#coupon-layer-new-wrap .coupon-popup-cont").append('<div class="coupon-popup-zp"><div class="coupon-popup-zp-title">赠品</div><div class="coupon-popup-zp-imgs"></div></div>')),$(".coupon-popup-zp-imgs").append(a),0==$(".coupon-popup-zp-imgs .zp-text").length&&($(".coupon-popup-zp-imgs").append('<div class="zp-text">赠完为止</div>'),$(".coupon-popup-zp-imgs .zp-text").prev().css("margin-right","0"))),new t.mySwiper({fid:"#kexuan-container",ul:"#kexuan-render-box",lis:".kexuan-slide",leftBtn:".kexuan-swiperBtn .left",rightBtn:".kexuan-swiperBtn .right",count:6})},bindEvent:function(){var e=this;e.$showPopDialog.on("click",function(){$(".uparrow-u").addClass("changed");var t=$("#gift-status-txt").offset().top-$("#detail_right").offset().top+26;e.$popDialog.css({top:t}).removeClass("hidden"),$(".gift-slide-desc span").ellipsis({row:2,onlyFullWords:!0,position:"tail"})}),$("#detail_right").find(".kexuan-slide").on("click",function(){t.debug("zengpin click-------------->"),t.debug("hasChecked:"+e.hasChecked),t.debug("selectedArray:"+e.data.selectedArray.length);var i=$(this);if(i.hasClass("checked"))i.removeClass("checked"),e.data.selectedArray=t.dropSome(e.data.selectedArray,function(e){return e.code==i.attr("data-code")});else{var o=i.attr("data-code"),a=i.siblings(".checked").removeClass("checked");e.data.selectedArray=t.dropSome(e.data.selectedArray,function(e){return e.code==a.attr("data-code")});var n=t.findFirst(e.data.selectedArray,function(e){return e.code==o});if(!n){var s=t.findFirst(e.data.all,function(e){return e.code==o});e.data.selectedArray.push(s)}i.addClass("checked")}}),$(".coupon-popup-title .layer-close-icon").on("click",function(){layer.closeAll()}),$("#coupon-layer-new-wrap").on("mouseenter mouseleave",".coupon-zp-img",function(e){var t=$(this);"mouseenter"==e.type?t.find(".zp-details").show():"mouseleave"==e.type&&t.find(".zp-details").hide()}),$("#coupon-layer-new-wrap").on("click",".coupon-popup-zp-imgs .coupon-zp-img.kexuan",function(){try{var i={page_name:"商品详情页",area_name:"赠品",is_banner:!1,is_recommend:!1,recommend_tactics:"",goods_pay_prc:0,goods_unit_prc:0,plat_form_prc:0},o=$.extend(i,window.$p.goods_click);sensors2022_05_16.track("GoodsClick",o)}catch(e){console.log(e)}var a=$(this);if(a.hasClass("checked"))a.removeClass("checked"),e.data.selectedArray=t.dropSome(e.data.selectedArray,function(e){return e.code==a.attr("data-code")}),$(".coupon-zp .selectedImgs img.keXuanImg").length>0&&$(".coupon-zp .selectedImgs img.keXuanImg").remove();else{var n=a.attr("data-code"),s=a.siblings(".kexuan.checked").removeClass("checked");e.data.selectedArray=t.dropSome(e.data.selectedArray,function(e){return e.code==s.attr("data-code")});var r=t.findFirst(e.data.selectedArray,function(e){return e.code==n});if(!r){var c=t.findFirst(e.data.all,function(e){return e.code==n});e.data.selectedArray.push(c)}a.addClass("checked"),$(".coupon-zp .selectedImgs img.keXuanImg").length>0&&$(".coupon-zp .selectedImgs img.keXuanImg").remove();var l='<img class="keXuanImg" src="'+a.attr("img_src")+'" alt=""></img>';$(".coupon-zp .selectedImgs").append(l)}}),$(".coupon-popup-title .layer-close-icon").on("click",function(){layer.closeAll()})},getAllData:function(){var e=$p.processKXZPNeedShowList();return this.data.all=e,e},getKXZP:function(){for(var e=[],t=0;t<this.data.selectedArray.length;t++)e.push(this.data.selectedArray[t].code);return e},closeCheckBox:function(){var e=this;0==e.hasChecked?e.$popDialog.addClass("hidden"):(e.$popDialog.addClass("hidden"),e.$showPopDialog.text("更换赠品"))},showZengpin:function(){this.$container.removeClass("hidden")}},window.components||(window.components={}),window.components.KeXuanZengPin=e}(),function(e){function t(e,t){this.data={totalCount:0,pageSize:10,pageIndex:1,interval:3,onPageChange:t},this.$container=e}t.prototype={constructor:t,render:function(){try{var t=this;if(t.$container.empty(),1==t.data.pageIndex)t.$container.append('<li class="page_btn prev disable"><a href="javascript:;" title="上一页" class="clearfix"><i></i><span>上一页</span></a></li>');else{var i=$('<li class="page_btn prev"><a href="javascript:;" title="上一页" class="clearfix"><i></i><span>上一页</span></a></li>').on("click",function(){try{t.data.onPageChange(t.data.pageIndex-1)}catch(t){e.warn(t)}return!1});t.$container.append(i)}var o=Math.ceil(t.data.totalCount/t.data.pageSize),a=Math.max(1,t.data.pageIndex-t.data.interval),n=Math.min(t.data.pageIndex+t.data.interval,o);t.data.pageIndex<t.data.interval+1&&(n=2*t.data.interval+1>o?o:2*t.data.interval+1),t.data.pageIndex+t.data.interval>o&&(a=o-2*t.data.interval<1?1:o-2*t.data.interval);for(var s=a;s<n+1;s++)if(s==t.data.pageIndex)t.$container.append('<li class="page_num active"><a href="javascript:void(0">'+s+"</a></li>");else{var r=$('<li class="page_num"><a href="javascript:void(0">'+s+"</a></li>").on("click",function(){try{t.data.onPageChange(parseInt($(this).text()))}catch(t){e.warn(t)}return!1});t.$container.append(r)}if(t.data.pageIndex==o||0==t.data.totalCount)t.$container.append('<li class="page_btn next disable"><a href="javascript:;" title="下一页" class="clearfix"><i></i><span>下一页</span></a></li>');else{var c=$('<li class="page_btn next"><a href="javascript:;" title="下一页" class="clearfix"><i></i><span>下一页</span></a></li>').on("click",function(){try{t.data.onPageChange(parseInt(t.data.pageIndex+1))}catch(t){e.warn(t)}return!1});t.$container.append(c)}t.$container.append('<li class="page_total">显示<span>'+((t.data.pageIndex-1)*t.data.pageSize+1)+"</span>-<span>"+(t.data.pageIndex*t.data.pageSize>t.data.totalCount?t.data.totalCount:t.data.pageIndex*t.data.pageSize)+"</span>条，<span>共"+o+"页</span><li>");var l=$('<li class="page_goto">到第<input type="text" value="1"/>页</li>'),d=$('<li class="page_sure"><input type="button" value="确定"/></li>').on("click",function(){try{var i=parseInt(l.find("input").val());if(i>o||i<=0||isNaN(i))return alert("当前一共"+o+"页，请输入正确的页码。"),!1;t.data.onPageChange(i)}catch(t){e.warn(t)}});t.$container.append(l).append(d)}catch(t){e.warn("PageBar组件=> render方法错误 ----------->"),e.warn(t)}}},window.components||(window.components={}),window.components.PageBar=t}(window.PDUtil),function(){function e(e){this.data={initPicList:[]},this.$container=$("#detail_playPicture"),this.$winpic=$("#winpic"),this.$button_left=$("#play_picture_leftbtn"),this.$button_right=$("#play_picture_rightbtn"),this.$div_list=$("#detail_playPicture_list"),this.$ul=$("#detail_playPicture_list ul"),this.maxShowNumber=5,this.currentIndex=1,this.windowIndex=1,this.page=1,this.totalPage=1,this.totalCount=0,e&&this.init()}e.prototype={constructor:e,init:function(){try{this.__initCount(),this.__initGoodPicList()}catch(e){window.PDUtil.debug("轮播图__initCount方法error--------->"),window.PDUtil.warn(e)}this.bindEvent(),$p.baseInfo.isCombinedGoods||this.$container.show(),this.showWithIndex(1)},__initGoodPicList:function(){var e=this;$p.baseInfo.adPicture&&e.data.initPicList.push({src:$p.baseInfo.adPicture,name:""}),this.$ul.find(" > li > a > img").each(function(){var t=$(this);e.data.initPicList.push({src:t.attr("src"),name:t.attr("alt")})})},__initCount:function(){this.currentIndex=1,this.windowIndex=1,this.page=1,this.totalCount=this.$ul.find(">li").length,this.totalCount==this.maxShowNumber?this.totalPage=1:this.totalPage=parseInt(this.totalCount/this.maxShowNumber)+1,this.setButtonShow()},setButtonShow:function(){var e=this;e.currentIndex<=1?e.$button_left.css("opacity","0.3").attr("disable","disable"):e.$button_left.css("opacity","1.0").removeAttr("disable"),e.currentIndex>=this.totalCount?e.$button_right.css("opacity","0.3").attr("disable","disable"):e.$button_right.css("opacity","1.0").removeAttr("disable")},bindEvent:function(){var e=this;this.$ul.on("click mouseenter mouseleave","li",function(){var t=$(this);if(t.hasClass("checked"))return!1;var i=parseInt(t.attr("data-index"));e.showWithIndex(i),e.setButtonShow()}),this.$button_left.on("click",function(){return!(e.currentIndex<=1)&&(1==e.windowIndex?e.gotoPrevPage():e.showWithIndex(e.currentIndex-1),void e.setButtonShow())}),this.$button_right.on("click",function(){return!(e.currentIndex>=e.totalCount)&&(e.windowIndex==e.maxShowNumber?e.gotoNextPage():e.showWithIndex(e.currentIndex+1),void e.setButtonShow())})},renderAdvertisingPicture:function(){var e=[];if($p.baseInfo.adPicture){e.push({src:$p.baseInfo.adPicture,name:""});for(var t="",i=0;i<e.length;i++)t+='<li data-index="'+(i+1)+'"><a href="javascript:;"><img src="'+e[i].src+'" alt="'+(e[i].name||"")+'"></a></li>';$("#detail_playPicture_list li").each(function(e,t){$(t).attr("data-index",e+2)}),this.$ul.find("li").eq(0).before(t),$("#winpic").attr("src",$p.baseInfo.adPicture),this.__initCount(),this.showWithIndex(1)}},renderPicture:function(e){if(e&&e instanceof Array){0==e.length&&(e=this.data.initPicList);for(var t="",i=0;i<e.length;i++)t+='<li data-index="'+(i+1)+'"><a href="javascript:;"><img src="'+e[i].src+'" alt="'+(e[i].name||"")+'"></a></li>';this.$ul.empty().append(t),this.__initCount(),this.showWithIndex(1)}},showWithIndex:function(e){var t=this.$ul.find("li").eq(e-1);this.currentIndex=e,this.getWindowIndex(),this.setCheckImage(),this.showBigImage(t.find("img").first().attr("src"))},gotoNextPage:function(){return!(this.page>=this.totalPage)&&(this.$ul.css("left","-="+96*this.maxShowNumber),this.page++,void this.showFirstImage())},gotoPrevPage:function(){return!(this.page<=1)&&(this.$ul.css("left","+="+96*this.maxShowNumber),this.page--,void this.showMaxImage())},showBigImage:function(e){var t=this.getBigPicSrc(e);return!!t&&void this.$winpic.attr("src",t)},getBigPicSrc:function(e){if(!e)return"";var t=e.replace(/w\d{2,3}\.(jpg|png|jpeg|gif)$/gi,"$1");return t},getWindowIndex:function(){return this.windowIndex=this.currentIndex-(this.page-1)*this.maxShowNumber},setCheckImage:function(){var e=this;e.$ul.find("li.checked").removeClass("checked"),e.$ul.find("li").eq(e.currentIndex-1).addClass("checked")},showFirstImage:function(){this.currentIndex=(this.page-1)*this.maxShowNumber+1;var e=this.$ul.find("li").eq(this.currentIndex-1);this.getWindowIndex(),this.setCheckImage(),this.showBigImage(e.find("img").first().attr("src"))},showMaxImage:function(){this.currentIndex=this.page*this.maxShowNumber;var e=this.$ul.find("li").eq(this.currentIndex-1);this.getWindowIndex(),this.setCheckImage(),this.showBigImage(e.find("img").first().attr("src"))}},1==window.PDUtil.isRunInNode()&&module&&module.exports?module.exports=e:(window.components||(window.components={}),window.components.PlayPicture=e)}(),function(){var e={},t={},i=!1,o=/^1[3-9]\d{9}$/;"undefined"!=typeof global&&global&&"object"==typeof module&&module.exports?(i=!0,e=require("../../../../base/pdbase").PDUtil,t=require("jquery")):(e=window.PDUtil,t=window.$);var a=function(e,t){function i(e){try{this.MIN_PRICE=0,this.MAX_PRICE=Number.MAX_VALUE,this.price=0,this.$priceInput=t("#reminder-price-input"),this.$priceInputErr=t("#price-input-err"),this.$phoneInput=t("#reminder-phone-input"),this.$phoneInputErr=t("#phone-input-err"),this.$phoneCloseBtn=t("#input-phone-close"),e&&this.init()}catch(e){console.log("error:",e)}}return i.prototype={constructor:i,init:function(){t("#price-reminder-btn").attr("latag","latag_pc_detail_top_降价通知_null_"+window.code),t("#remind-price-submit-btn").attr("latag","latag_pc_detail_top_降价通知提交_null_"+window.code),$p.baseInfo.isIntegral||""==$p.baseInfo.price||0==$p.baseInfo.isShowPrice||2==$p.baseInfo.salesType&&("undefined"==typeof $p.presellObj||t.isEmptyObject($p.presellObj)||1!=$p.presellObj.disabled||$p.presellObj.currentdatetime_date<$p.presellObj.presellstarttime_date||1==$p.presellObj.displayTail)||(t("#price-reminder-btn").removeClass("hidden"),this.bindEvent())},bindEvent:function(){var i=this;t("#price-reminder-btn").on("click",function(){if(window.passport&&window.passport.isLogin()){layer.open({type:1,skin:"reminder-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["436px","424px"],move:!1,scrollbar:!0,content:t("#price-reminder-wrap")}),i.MAX_PRICE=$p.baseInfo.price>0?$p.baseInfo.price:Number.MAX_VALUE,i.price=$p.baseInfo.price>0?$p.baseInfo.price:0;var a=window.passport.cookie&&window.passport.cookie.loginName||"";a&&o.test(a)&&(i.$phoneInput.val(a),i.$phoneCloseBtn.show(),i.clearPhoneErr()),i.setFormatPrice(i.price),i.clearPriceErr()}else try{window.$p.loginToPage()}catch(t){e.warn("立即预约失败。。"),e.warn(t)}}),t("#reminder-layer-close, #reminder-layer-success-close").on("click",function(){layer.closeAll()}),this.$priceInput.on("input",function(){i.price=parseFloat(this.value)}),this.$priceInput.on("blur",function(){i.checkPriceValidation()}),this.$phoneInput.on("input",function(){this.value?i.$phoneCloseBtn.show():i.$phoneCloseBtn.hide()}),this.$phoneInput.on("blur",function(){i.checkPhoneValidation(this.value)}),this.$phoneCloseBtn.on("click",function(){i.$phoneInput.val(""),i.clearPhoneErr(),i.$phoneCloseBtn.hide()}),t("#remind-price-submit-btn").on("click",function(){var e=i.price,t=i.$phoneInput.val();i.checkPriceValidation()&&i.checkPhoneValidation(t)&&i.submit(e,t)})},checkPriceValidation:function(){return!this.price||this.price<this.MIN_PRICE?(this.setPriceErr("请填写正确价格"),!1):this.price>=this.MAX_PRICE?(this.setPriceErr("需低于当前价格"),!1):(this.clearPriceErr(),this.price=Math.round(100*this.price)/100,this.setFormatPrice(this.price),!0)},checkPhoneValidation:function(e){return e?o.test(e)?(this.clearPhoneErr(),!0):(this.setPhoneErr("请输入正确的手机号"),!1):(this.setPhoneErr("请输入手机号"),!1)},setFormatPrice:function(e){this.$priceInput.val(parseFloat(e).toFixed(2))},setPriceErr:function(e){this.$priceInputErr.html(e),this.$priceInput.addClass("error"),t("#price-symbol").addClass("error-font-color")},clearPriceErr:function(){this.$priceInputErr.html(""),this.$priceInput.removeClass("error"),t("#price-symbol").removeClass("error-font-color")},setPhoneErr:function(e){this.$phoneInputErr.html(e),this.$phoneInput.addClass("error")},clearPhoneErr:function(){this.$phoneInputErr.html(""),this.$phoneInput.removeClass("error")},submit:function(e,i){var o=this;t.ajax({type:"GET",url:__detailConfig.getApiPath("pro3d")+"goods/price/subscription",data:{goodsCode:window.code,lenovoId:window.passport.cookie.lenovoId,terminal:1,subscriptionPrice:e,mobile:i},dataType:"jsonp",jsonp:"jsonpCallback",success:function(e){console.log("data:",e),0===e.status?(layer.closeAll(),o.setPriceReminderSuccess(),setTimeout(function(){o.openSuccessModal()},500)):layer.msg(e.massage||"订阅失败，请稍后重试")},error:function(e){PDUtil.debug("invoke 3D interface error ------------->"),layer.msg("订阅失败，请稍后重试")}})},openSuccessModal:function(){layer.open({type:1,skin:"reminder-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["435px","236px"],move:!1,scrollbar:!0,content:t("#price-reminder-success-wrap")})},setPriceReminderSuccess:function(){$p.components.scComponent.isSc||$p.components.scComponent.$sc.click()}},i}(e,t);i?module.exports=a:(window.components||(window.components={}),window.components.PriceReminder=a)}(),function(e){function t(e){this.data={},this.firstSingleTxt="",this.secondSingleTxt="",this.$container=$("#container_cuxiao"),this.$activeBar=$(".active-title-box"),this.$labelBox=$("#pro_label_box"),this.$djsBox=$("#count-down-wrap"),this.$djsTxt=$("#countdown-text"),this.$preSellBox=$(".presell-price-detail-wrap"),this.$hb_preSellBox=$(".beAnAlternate_div"),this.$preSellAllBox=$(".presellall-price-detail-wrap"),this.$priceDes=$(".price-desc"),this.$price=$("#span_price"),this.$preSellPrice=$("#presell_price"),this.$nailPrice=$("#nail_price"),this.cashDiscount=0,this.reservationId=0,this.$activeBox=$(".container-active"),this.$activeTitle=$("#active-title"),this.$activePrice=$("#active-price"),this.$activeTimer=$("#active-timer"),this.$activeTime=$(".active-time"),this.$countdownText=$("#countdown-text"),this.$djs=$(".djs"),this.$setMsRemind=$("#setMsRemind"),this.$delPriceBox=$(".sign-prc-group-del"),this.$delPrice=$("#span_price-del"),this.$activeWrap=$(".active-several-container"),this.$yyGroup=$(".yy-sign-prc-group"),this.$ljgmBtn=$("#ljgm"),this.installmentCount=0,this.$yhPromotions=$("#cxy_contents"),e&&this.init()}var i=0,o=0;t.prototype={constructor:t,init:function(){96!=$p.baseInfo.salesType&&($p.components.kxzp.getAllData().length>0||$p.components.bxzp.getAllData().length>0)&&i++,this.bindPromotionsEvent(),this.renderDom(),this.setInstallment()},bindPromotionsEvent:function(){$(".cxy_content").on("click",".cxy_more",function(){layer.open({type:1,skin:"serveInfo-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["760px","496px"],move:!1,content:$(".event-details")}),$(".event-details").removeClass("hidden")}),$(".event-details .close-event-details").on("click",function(){layer.closeAll()}),$(".cxy_content").on("click",".cxy_brief",function(){var e=$(this);e.attr("data_url")&&window.open(e.attr("data_url"))}),$(".beAnAlternate_div").on("click",".view_aternate_instructions",function(){layer.open({type:1,skin:"hbxs-serveInfo-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["760px","496px"],move:!1,content:$(".hbxs-details")})}),$(".hbxs-details .close-hbxs-details").on("click",function(){layer.closeAll()}),$("#coupon-layer-new-wrap").on("click",".estimated-delivery-price-div .threeSpan.yhq-whole",function(){$(this).parent().hide().siblings(".calculate-price-details").show()});var e;$("#coupon-layer-new-wrap").on("click",".viewRules",function(){e=layer.open({type:1,skin:"guize-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["779px","600px"],move:!1,scrollbar:!0,content:$(".delivery-price-rule")});var t="https://lecs.lenovo.com.cn";window.location.href.indexOf("lenovouat.com")!=-1&&(t="https://lecs.lenovouat.com");var i="";i+="e5c62c8b-cfae-4771-b585-bfe718a5d57a"==faid?"/chat.html?ttc=1&gc="+window.code+"&buc="+$p.baseInfo.buOwner:"/chat.html?ttc=1&gc="+window.code+"&buc="+$p.baseInfo.buOwner,$(".delivery-price-rule .bottom-div-text a").attr({href:t+i,latag:"latag_pc_detail_top_null_到手价规则联系客服_"+window.code}),$p.isCheckDeliveryRule||($("#delivery-price-rule-content").attr("src",__detailConfig.getApiPath("windowAdvert")+"/lenovo_detail_front/deliveryPriceRules.html"),$p.isCheckDeliveryRule=!0)}),$(".delivery-price-rule-close").on("click",function(){layer.close(e)}).attr("latag","latag_pc_detail_top_null_点击关闭到手价规则弹窗_"+window.code)},renderDom:function(){var e=window.$p.baseInfo,t=window.$p.promotion,a=window.$p.activity,n=window.$p.nowNumber;if(t&&(this.setXDLJ(t,n),this.setMJ(t,n)),a&&(2==a.activityType?this.setShangou(!0):4==a.activityType?this.setShangouTimer(!0):3==a.activityType?this.setYuyueQg(!0):5==a.activityType&&this.setYuyue(!0)),this.setDeliveryInfo(),this.setPresell(!0),0==$p.baseInfo.marketable)return!1;if(e.pcPromotion){if(e.pcPromotion.brief){if($(".cxy_content .cxy_brief").html(e.pcPromotion.brief),e.pcPromotion.url&&($(".cxy_content .cxy_brief").attr("data_url",e.pcPromotion.url),$(".cxy_content .cxy_brief").css("cursor","pointer")),e.pcPromotion.msgs&&e.pcPromotion.msgs.length>0){for(var s=e.pcPromotion.msgs,r="",c=0;c<s.length;c++)(s[c].tag||s[c].content)&&(r+='<div class="event-list">',s[c].tag&&(r+='<div class="list-title">'+s[c].tag+"</div>"),s[c].content&&(r+='<div class="list-content">'+s[c].content+"</div>"),r+="</div>");r.length>0&&($(".event-details .event-content").html(r),$(".event-details .event-content a").each(function(e,t){var i=$(t).attr("href");$(t).attr("latag","latag_pc_detail_top_活动详情_"+window.code+"_"+i)}))}else $(".cxy_content .cxy_more").hide();$(".cxy_content").removeClass("hidden"),$(".cxy_brief").attr("data_url")?$(".cxy_brief").attr("latag","latag_pc_detail_top_导语_"+window.code+"_"+$(".cxy_brief").attr("data_url")):$(".cxy_brief").attr("latag","latag_pc_detail_top_导语_"+window.code),$(".cxy_content .cxy_more").attr("latag","latag_pc_detail_top_null_导语更多_"+window.code)}$(".event-content .list-container a").each(function(e,t){var i=$(t).attr("href");$(t).attr("latag","latag_pc_detail_top_促销语_"+e+"_"+i)})}e.extensionTerminal&&e.extensionTerminal.indexOf("pc")!==-1&&e.extensionContent&&i++,i&&this.$container.removeClass("hidden"),o&&(a||this.$activeBox.show()),$(".coupon-popup-title .layer-close-icon").on("click",function(){layer.closeAll()}).attr("latag","latag_pc_detail_top_null_点击关闭优惠弹窗_"+window.code)},setXDLJ:function(t,i){if(!($p.baseInfo.isIntegral||96==$p.baseInfo.salesType&&$p.isBusinessDetail)){var o=this,a="";if(t.saleReduction&&i<t.saleReduction.totime){$p.baseInfo.couponIconNum++;var n='<span class="coupon-s full-discount" latag="latag_pc_detail_top_null_下单立减_'+window.code+'">下单立减'+t.saleReduction.discountAmount+"元</span>";o.$yhPromotions.append(n).addClass("couponInline"),$(".coupon-look-detail").addClass("couponInlineblock"),$("#couponbox").show(),i<t.saleReduction.fromtime?a+='<div class="event-list"><div class="list-title">下单立减</div><div class="list-content">该商品下单立减'+t.saleReduction.discountAmount+"元，活动开始时间："+t.saleReduction.fromtimeStr+"</div></div>":(a+='<div class="event-list"><div class="list-title">下单立减</div><div class="list-content">该商品下单立减'+t.saleReduction.discountAmount+'元，<em id="pro_xdlj_djs"></em></div></div>',e.timer(t.saleReduction.totime-i,function(e){$("#pro_xdlj_djs").html("剩余时间  "+e)},function(){window.location=window.location.href})),0==$("#coupon-layer-new-wrap .coupon-popup-cont .coupon-text").length&&($("#coupon-layer-new-wrap .estimated-delivery-price-div").length>0?$("#coupon-layer-new-wrap .estimated-delivery-price-div").after('<div class="coupon-text"><div class="cx_text">促销</div></div>'):$("#coupon-layer-new-wrap .coupon-popup-upgradeGoods").length>0?$("#coupon-layer-new-wrap .coupon-popup-upgradeGoods:last").after('<div class="coupon-text"><div class="cx_text">促销</div></div>'):$("#coupon-layer-new-wrap .coupon-popup-cont").prepend('<div class="coupon-text"><div class="cx_text">促销</div></div>')),$(".coupon-text").append(a)}}},setMJ:function(t,i){if(!($p.baseInfo.isIntegral||96==$p.baseInfo.salesType&&$p.isBusinessDetail)){var o=this;try{if(t.fullReduction&&i>t.fullReduction.fromtime&&i<t.fullReduction.totime){$p.baseInfo.couponIconNum++;var a="",n="",s=t.fullReduction.fullsetList,r=[],c="";if(t.fullReduction&&t.fullReduction.description&&1===JSON.parse(t.fullReduction.description).matchType){if(c=PDUtil.formatShortDate(t.fullReduction.totimeStr,1),7===JSON.parse(t.fullReduction.description).discountType)for(var l=0;l<s.length;l++)a+='<span class="coupon-s full-discount" latag="latag_pc_detail_top_null_满减_'+window.code+'">满'+parseFloat(s[l].full)+"件减"+parseFloat(s[l].reduce)+"</span>",r.push("满"+parseFloat(s[l].full)+"件减"+parseFloat(s[l].reduce));else if(10===JSON.parse(t.fullReduction.description).discountType)for(var l=0;l<s.length;l++)a+='<span class="coupon-s full-discount" latag="latag_pc_detail_top_null_满减_'+window.code+'">满'+parseFloat(s[l].full)+"件"+(100-parseFloat(s[l].reduce))/10+"折</span>",r.push("满"+s[l].full+"件"+(100-parseFloat(s[l].reduce))/10+"折")}else if(t.fullReduction&&t.fullReduction.description&&2===JSON.parse(t.fullReduction.description).matchType)if(c=PDUtil.formatShortDate(t.fullReduction.totimeStr,1),7===JSON.parse(t.fullReduction.description).discountType)for(var l=0;l<s.length;l++)a+='<span class="coupon-s full-discount" latag="latag_pc_detail_top_null_满减_'+window.code+'">满'+parseFloat(s[l].full)+"元减"+parseFloat(s[l].reduce)+"</span>",r.push("满"+parseFloat(s[l].full)+"元减"+parseFloat(s[l].reduce));else if(10===JSON.parse(t.fullReduction.description).discountType)for(var l=0;l<s.length;l++)a+='<span class="coupon-s full-discount" latag="latag_pc_detail_top_null_满减_'+window.code+'">满'+parseFloat(s[l].full)+"元"+(100-s[l].reduce)/10+"折</span>",r.push("满"+parseFloat(s[l].full)+"元"+(100-s[l].reduce)/10+"折");r.length>0&&(n+='<div class="event-list"><div class="list-title">满减</div><div class="list-content">该商品支持全场'+r.join("、")+"，活动截止时间"+c+"</div></div>"),o.$yhPromotions.append(a).addClass("couponInline"),$(".coupon-look-detail").addClass("couponInlineblock"),$("#couponbox").show(),0==$("#coupon-layer-new-wrap .coupon-popup-cont .coupon-text").length&&($("#coupon-layer-new-wrap .estimated-delivery-price-div").length>0?$("#coupon-layer-new-wrap .estimated-delivery-price-div").after('<div class="coupon-text"><div class="cx_text">促销</div></div>'):$("#coupon-layer-new-wrap .coupon-popup-upgradeGoods").length>0?$("#coupon-layer-new-wrap .coupon-popup-upgradeGoods:last").after('<div class="coupon-text"><div class="cx_text">促销</div></div>'):$("#coupon-layer-new-wrap .coupon-popup-cont").prepend('<div class="coupon-text"><div class="cx_text">促销</div></div>')),
$(".coupon-text").append(n)}}catch(t){e.warn("促销组件=> setMJ方法错误------------>"),e.warn(t)}}},setDeliveryInfo:function(){var e=window.$p.baseInfo.deliveryPrice;if(e&&!$p.baseInfo.isIntegral){var t=e.deliverPrice,i=e.bestCouponList,o=e.originalPrice,a=e.timeLimitedRedPocketDesc,n=e.timeLimitRedPocketLinkUrl,s=e.ledouDesc,r=e.offerDetailList;if(r&&r.length>0){var c="";c+='<div class="estimated-delivery-price-div"><div class="estimated-delivery"><span class="delivery-price">'+t.currencySymbol+parseFloat(t.price)+'</span><span class="textBiref">'+t.desc+'</span></div><div class="delivery-price-symbol">=</div><div class="calculate-price-div"><div class="calculate-price"><span>'+o.currencySymbol+parseFloat(o.price)+"</span><span>"+o.desc+"</span></div>";for(var l=0;l<r.length;l++)c+='<div class="delivery-price-symbol-del">-</div><div class="calculate-price-yhDetails"><div class="calculate-price"><span>'+r[l].currencySymbol+parseFloat(r[l].price)+"</span><span>"+r[l].desc+"</span></div>"+(8==r[l].type?'<div class="calculate-price-details"></div></div>':"</div>");if(c+="</div></div>",$("#coupon-layer-new-wrap .coupon-popup-cont").prepend(c),0==$("#coupon-layer-new-wrap .coupon-popup-cont .rule-description").length&&$("#coupon-layer-new-wrap .coupon-popup-cont").after('<div class="rule-description"><span>以上优惠仅为初步预估，不代表最终价格，</span><span class="viewRules" latag="latag_pc_detail_top_null_点击查看优惠规则_'+window.code+'">点击查看规则<i>?</i></span></div>'),$(".estimated-delivery-price-div").removeClass().addClass("estimated-delivery-price-div").addClass("zNum"+($(".delivery-price-symbol-del").length+1)),i&&i.length>0){for(var d="",p=0;p<i.length;p++)0==i[p].couponIsCollected&&$p.baseInfo.deliveryCouponIdList.push(i[p].couponId),d+='<span class="oneSpan" couponId="'+i[p].couponId+'">'+i[p].couponDesc+"</span>";if($("#coupon-layer-new-wrap .estimated-delivery-price-div .calculate-price-details").html(d),$("#coupon-layer-new-wrap .estimated-delivery-price-div .calculate-price-details span.oneSpan").length>3){$("#coupon-layer-new-wrap .estimated-delivery-price-div .calculate-price-details").hide();var u='<div class="calculate-price-details_fold"><span class="oneSpan">'+$("#coupon-layer-new-wrap .estimated-delivery-price-div .calculate-price-details span.oneSpan:eq(0)").text()+'</span><div class="hr_div"></div><span class="threeSpan yhq-whole" latag="latag_pc_detail_top_null_查看全部优惠券_'+window.code+'">全部<i class="bottom_arrow"></i></span></div>';$("#coupon-layer-new-wrap .estimated-delivery-price-div .calculate-price-details").after(u)}}}if(s||a){0==$("#coupon-layer-new-wrap .coupon-popup-cont .coupon-text").length&&($("#coupon-layer-new-wrap .estimated-delivery-price-div").length>0?$("#coupon-layer-new-wrap .estimated-delivery-price-div").after('<div class="coupon-text"><div class="cx_text">促销</div></div>'):$("#coupon-layer-new-wrap .coupon-popup-upgradeGoods").length>0?$("#coupon-layer-new-wrap .coupon-popup-upgradeGoods:last").after('<div class="coupon-text"><div class="cx_text">促销</div></div>'):$("#coupon-layer-new-wrap .coupon-popup-cont").prepend('<div class="coupon-text"><div class="cx_text">促销</div></div>'));var m="";s&&(m+='<div class="event-list ledouListItem"><div class="list-title">乐豆</div><div class="list-content">'+s+"</div></div>"),a&&(m+='<div class="event-list"><div class="list-title">限时红包</div><div class="list-content">'+a+(n?'<a href="'+n+'" target="_blank" latag="latag_pc_detail_top_null_点击领取限时红包_'+window.code+'">点击领取 ></a>':"")+"</div></div>"),$(".coupon-text").append(m)}e.detailPageDesc&&($(".ld-exchange-text").text(e.detailPageDesc),$("#couponbox").show())}window.$p.buyNowEstimateButton()},setPresell:function(t){function i(){if("undefined"!=typeof h.presellObj){var e=h.presellObj;m.cashDiscount=e.deduction,m.coordinationNum=e.coordinationNum,e.presellType&&1==e.presellType?(m.$activeTitle.text("候补").show(),l(e)):(m.$activeTitle.text("预售").show(),a(e))}}function a(i){if($("#button_dhtz").hide(),$.isEmptyObject(i))$("#presell-adv-txt").show(),$("#detail_main .con_right .price-area .price-detail-wrap .prc-container .price-desc").text("预售价").css("color","#E22319"),$(".originalPrice-desc, #coupon-layer-new-wrap .calculate-price span:eq(1)").text("预售价"),$("#span_price").text("待发布");else{if(1!=i.disabled)return!1;if(i.terminalname&&i.terminalname.indexOf("PC")<0)return h.components.buygroup&&h.components.buygroup.setBuyButton("商品不在该平台预售",!0),!1;if(1==i.presellway?(m.$preSellAllBox.removeClass("hidden"),i.deposit=h.baseInfo.price):m.$preSellBox.removeClass("hidden"),m.$price.text(i.deposit),i.activitystarttime_date=new Date(i.activitystarttime.replace(/-/g,"/")),i.activityendtime_date=new Date(i.activityendtime.replace(/-/g,"/")),i.presellstarttime_date=new Date(i.presellstarttime.replace(/-/g,"/")),i.currentdatetime_date=new Date(i.currenttime.replace(/-/g,"/")),i.tailTime&&(i.tailTime_date=new Date(i.tailTime.replace(/-/g,"/"))),i.currentdatetime_date<i.presellstarttime_date)if(i.process=1,m.$activeTitle.text("预售").show(),n(i),m.$djsBox.removeClass("hidden"),1==i.showPriceBeforePay){if(i.showPricetime&&""!==i.showPricetime&&null!==i.showPricetime)if(i.showpricetime_date=new Date(i.showPricetime.replace(/-/g,"/")),i.currentdatetime_date>i.showpricetime_date)if($(".presell-rule").removeClass("presell-isShow-rule"),$(".presell-prc-container:lt(2)").show(),$(".presell-prc-container").eq(2).hide(),1===i.presellway){if(m.$priceDes.text("预售价").css("color","#E22319"),$(".originalPrice-desc, #coupon-layer-new-wrap .calculate-price span:eq(1)").text("预售价"),m.$preSellPrice.text(parseFloat(h.baseInfo.price)),$(".presell-cash-discount").addClass("hidden"),h.baseInfo.isUpgradeGoods)var o=m.formatDate(i.activityendtime_date.getTime()+24*i.taildeliveryday*60*60*1e3+2592e5);else var o=m.formatDate(i.activityendtime_date.getTime()+24*i.taildeliveryday*60*60*1e3);i.presell_deliverytime=PDUtil.formatShortDate(o,1),$("#presell_deliverytime").text(i.presell_deliverytime)}else m.$activeTitle.text("预售").addClass("active-title").show(),m.$priceDes.text("定金").css("color","#E22319"),m.$price.text(parseFloat(i.deposit)),m.$preSellPrice.text(parseFloat(h.baseInfo.price)),h.baseInfo.deliveryPrice&&h.baseInfo.deliveryPrice.offerDetailList&&h.baseInfo.deliveryPrice.offerDetailList.length>0?($("#pre-cash-dis").text("付尾款时可抵"+parseFloat(m.cashDiscount)+"元"),$(".presell-price-detail-wrap .presell-prc-container").eq(0).hide(),$(".price-detail-wrap").addClass("deliveryWrap"),$(".presell-rule").css("top","40px"),$("#span_price").css("fontSize","13px")):$("#pre-cash-dis").text("可抵现金"+parseFloat(m.cashDiscount)+"元"),$(".presell-cash-discount").removeClass("hidden"),h.baseInfo.deliveryPrice&&h.baseInfo.deliveryPrice.offerDetailList&&h.baseInfo.deliveryPrice.offerDetailList.length>0&&"undefined"!=typeof h.baseInfo.deliveryPrice.restPaymentPrice?0==h.baseInfo.deliveryPrice.restPaymentPrice?m.$nailPrice.text(0):m.$nailPrice.text(parseFloat(h.baseInfo.deliveryPrice.restPaymentPrice).toFixed(2)):0==i.deduction?m.$nailPrice.text(0):m.$nailPrice.text(parseFloat(h.baseInfo.price-i.deduction).toFixed(2));else s(i),m.$preSellBox.hide(),m.$preSellAllBox.hide(),m.$priceDes.text("预售价").css("color","#E22319"),m.$price.text("待发布"),$(".originalPrice-desc, #coupon-layer-new-wrap .calculate-price span:eq(1)").text("预售价")}else m.$preSellBox.hide(),m.$preSellAllBox.hide(),m.$priceDes.text("预售价").css("color","#E22319"),m.$price.text("待发布"),$(".originalPrice-desc, #coupon-layer-new-wrap .calculate-price span:eq(1)").text("预售价");else if(i.currentdatetime_date>=i.presellstarttime_date&&i.currentdatetime_date<i.activityendtime_date){if(i.process=2,$("#presell-personNum").removeClass("hidden").find("#presell-count").text(m.coordinationNum),m.$preSellBox.show(),m.$preSellAllBox.show(),h.components.arrivalTime||(h.components.arrivalTime=new components.ArrivalTime((!0),i)),1==i.displayTail?($(".presell-prc-container:lt(2)").hide(),$(".presell-rule").addClass("presell-isShow-rule"),$(".presell-price-time").text(PDUtil.formatShortDate(i.tailTime,1)),t&&e.timer(i.tailTime_date-i.currentdatetime_date,function(){},function(){location.reload()})):($(".presell-rule").removeClass("presell-isShow-rule"),$(".presell-prc-container:lt(2)").show(),$(".presell-prc-container").eq(2).hide()),h.baseInfo.stock<=0){if(1===i.presellway){if(m.$priceDes.text("预售价").css("color","#E22319"),$(".originalPrice-desc, #coupon-layer-new-wrap .calculate-price span:eq(1)").text("预售价"),m.$preSellPrice.text(parseFloat(h.baseInfo.price)),$(".presell-cash-discount").addClass("hidden"),h.baseInfo.isUpgradeGoods)var o=m.formatDate(i.activityendtime_date.getTime()+24*i.taildeliveryday*60*60*1e3+2592e5);else var o=m.formatDate(i.activityendtime_date.getTime()+24*i.taildeliveryday*60*60*1e3);i.presell_deliverytime=PDUtil.formatShortDate(o,1),$("#presell_deliverytime").text(i.presell_deliverytime)}else m.$activeTitle.text("预售中").addClass("active-title").show(),m.$priceDes.text("定金").css("color","#E22319"),m.$price.text(parseFloat(i.deposit)),m.$preSellPrice.text(parseFloat(h.baseInfo.price)),h.baseInfo.deliveryPrice&&h.baseInfo.deliveryPrice.offerDetailList&&h.baseInfo.deliveryPrice.offerDetailList.length>0?($("#pre-cash-dis").text("付尾款时可抵"+parseFloat(m.cashDiscount)+"元"),$(".presell-price-detail-wrap .presell-prc-container").eq(0).hide(),$(".price-detail-wrap").addClass("deliveryWrap"),$(".presell-rule").css("top","40px"),$("#span_price").css("fontSize","13px")):$("#pre-cash-dis").text("可抵现金"+parseFloat(m.cashDiscount)+"元"),$(".presell-cash-discount").removeClass("hidden"),h.baseInfo.deliveryPrice&&h.baseInfo.deliveryPrice.offerDetailList&&h.baseInfo.deliveryPrice.offerDetailList.length>0&&"undefined"!=typeof h.baseInfo.deliveryPrice.restPaymentPrice?0==h.baseInfo.deliveryPrice.restPaymentPrice?m.$nailPrice.text(0):m.$nailPrice.text(parseFloat(h.baseInfo.deliveryPrice.restPaymentPrice).toFixed(2)):0==i.deduction?m.$nailPrice.text(0):m.$nailPrice.text(parseFloat(h.baseInfo.price-i.deduction).toFixed(2));return h.components.buygroup.setBuyButtonClickHandler(),t&&e.timer(i.activityendtime_date-i.currentdatetime_date,function(e){m.$djsTxt.text("距支付定金结束还有:"),m.$djs.text(e)},function(){m.$djsTxt.text(""),m.$djs.text(""),location.reload()}),m.$djsBox.removeClass("hidden"),h.components.buygroup.setBuyButton("已售罄",!0),$("#button_dhtz").show(),!1}r(i)}else i.process=3,c(i),$("#detail_main .con_right .price-area .price-detail-wrap .prc-container .price-desc").text("预售价").css("color","#E22319"),$(".originalPrice-desc, #coupon-layer-new-wrap .calculate-price span:eq(1)").text("预售价")}}function n(t){h.components.buygroup.setBuyButton("敬请期待",!0),e.timer(t.presellstarttime_date-t.currentdatetime_date,function(e){m.$djsTxt.text("距支付定金开始还有:"),m.$djs.text(e)},function(){return m.$djs.text(""),location.reload(),!1})}function s(t){e.timer(t.showpricetime_date-t.currentdatetime_date,function(){},function(){location.reload()})}function r(i){var o=1==i.presellway?"支付全款":"支付定金";if(h.components.buygroup.setBuyButton(o,!1).off("click"),h.components.buygroup.setBuyButtonClickHandler(),t&&e.timer(i.activityendtime_date-i.currentdatetime_date,function(e){m.$djsTxt.text("距离预售结束还有:"),m.$djs.text(e)},function(){m.$djsTxt.text(""),m.$djs.text(""),location.reload()}),m.$djsBox.removeClass("hidden"),1===i.presellway){if(m.$priceDes.text("预售价").css("color","#E22319"),$(".originalPrice-desc, #coupon-layer-new-wrap .calculate-price span:eq(1)").text("预售价"),m.$preSellPrice.text(parseFloat(h.baseInfo.price)),$(".presell-cash-discount").addClass("hidden"),h.baseInfo.isUpgradeGoods)var a=m.formatDate(i.activityendtime_date.getTime()+24*i.taildeliveryday*60*60*1e3+2592e5);else var a=m.formatDate(i.activityendtime_date.getTime()+24*i.taildeliveryday*60*60*1e3);i.presell_deliverytime=PDUtil.formatShortDate(a,1),$("#presell_deliverytime").text(i.presell_deliverytime)}else{m.$activeTitle.text("预售中").addClass("active-title").show(),h.baseInfo.deliveryPrice&&h.baseInfo.deliveryPrice.offerDetailList&&h.baseInfo.deliveryPrice.offerDetailList.length>0?($("#pre-cash-dis").text("付尾款时可抵"+parseFloat(m.cashDiscount)+"元"),$(".presell-price-detail-wrap .presell-prc-container").eq(0).hide(),$(".price-detail-wrap").addClass("deliveryWrap"),$(".presell-rule").css("top","40px"),$("#span_price").css("fontSize","13px")):$("#pre-cash-dis").text("可抵现金"+parseFloat(m.cashDiscount)+"元"),$(".presell-cash-discount").removeClass("hidden");var n=PDUtil.formatShortDate(i.activityendtime)+" - "+PDUtil.formatShortDate(i.tailpaymentday);$("#lasttime_nailpay").text("("+n+")"),m.$priceDes.text("定金").css("color","#E22319"),m.$price.text(parseFloat(i.deposit)),m.$preSellPrice.text(parseFloat(h.baseInfo.price)),h.baseInfo.deliveryPrice&&h.baseInfo.deliveryPrice.offerDetailList&&h.baseInfo.deliveryPrice.offerDetailList.length>0&&"undefined"!=typeof h.baseInfo.deliveryPrice.restPaymentPrice?0==h.baseInfo.deliveryPrice.restPaymentPrice?m.$nailPrice.text(0):m.$nailPrice.text(parseFloat(h.baseInfo.deliveryPrice.restPaymentPrice).toFixed(2)):0==i.deduction?m.$nailPrice.text(0):m.$nailPrice.text(parseFloat(h.baseInfo.price-i.deduction).toFixed(2))}}function c(e){h.components.buygroup.setBuyButton("预售结束",!0),m.$priceDes.text("会员价").css("color","#E22319"),m.$price.text(h.baseInfo.price),1==e.presellway?m.$preSellAllBox.addClass("hidden"):m.$preSellBox.addClass("hidden"),$(".presell-cash-discount").addClass("hidden"),m.$activeBar.addClass("hidden")}function l(i){if($("#button_dhtz").hide(),$.isEmptyObject(i))$("#presell-adv-txt").show(),$("#detail_main .con_right .price-area .price-detail-wrap .prc-container .price-desc").text("候补价").css("color","#E22319"),$("#span_price").text("待发布");else{if(1!=i.disabled)return!1;if(i.terminalname&&i.terminalname.indexOf("PC")<0)return h.components.buygroup&&h.components.buygroup.setBuyButton("商品不在该平台预售",!0),!1;if(i.deposit=h.baseInfo.price,m.$price.text(i.deposit),i.activitystarttime_date=new Date(i.activitystarttime.replace(/-/g,"/")),i.activityendtime_date=new Date(i.activityendtime.replace(/-/g,"/")),i.presellstarttime_date=new Date(i.presellstarttime.replace(/-/g,"/")),i.currentdatetime_date=new Date(i.currenttime.replace(/-/g,"/")),i.currentdatetime_date<i.presellstarttime_date)i.process=1,m.$activeTitle.text("候补").show(),d(i),m.$djsBox.removeClass("hidden"),m.$hb_preSellBox.removeClass("hidden"),i.standByNoticeTime&&$(".beAnAlternate_div .alternate_otification_time").text(i.standByNoticeTime),m.$priceDes.text("候补价").css("color","#E22319");else if(i.currentdatetime_date>=i.presellstarttime_date&&i.currentdatetime_date<i.activityendtime_date){if($("#hb_presell-personNum").removeClass("hidden").find("#hb_presell-count").text(m.coordinationNum),m.$hb_preSellBox.removeClass("hidden"),i.standByNoticeTime&&$(".beAnAlternate_div .alternate_otification_time").text(i.standByNoticeTime),h.components.arrivalTime||(h.components.arrivalTime=new components.ArrivalTime((!0),i)),h.baseInfo.stock<=0)return m.$priceDes.text("候补价").css("color","#E22319"),h.components.buygroup.setBuyButtonClickHandler(),t&&e.timer(i.activityendtime_date-i.currentdatetime_date,function(e){m.$djsTxt.text("距离活动结束还有:"),m.$djs.text(e)},function(){m.$djsTxt.text(""),m.$djs.text(""),location.reload()}),m.$djsBox.removeClass("hidden"),h.components.buygroup.setBuyButton("名额已满",!0),$("#button_dhtz").show(),!1;p(i)}else u(),$("#detail_main .con_right .price-area .price-detail-wrap .prc-container .price-desc").text("候补价").css("color","#E22319")}}function d(t){h.components.buygroup.setBuyButton("敬请期待",!0),e.timer(t.presellstarttime_date-t.currentdatetime_date,function(e){m.$djsTxt.text("距离活动开始还有:"),m.$djs.text(e)},function(){m.$djsTxt.text(""),m.$djs.text(""),i(),location.reload()})}function p(i){var o="立即候补";m.$priceDes.text("候补价").css("color","#E22319"),h.components.buygroup.setBuyButton(o,!1).off("click"),h.components.buygroup.setBuyButtonClickHandler(),t&&e.timer(i.activityendtime_date-i.currentdatetime_date,function(e){m.$djsTxt.text("距离活动结束还有:"),m.$djs.text(e)},function(){m.$djsTxt.text(""),m.$djs.text(""),location.reload()}),m.$djsBox.removeClass("hidden")}function u(){h.components.buygroup.setBuyButton("候补结束",!0),m.$priceDes.text("候补价").css("color","#E22319"),m.$price.text(h.baseInfo.price)}var m=this,h=window.$p;return!h.baseInfo.isIntegral&&(2==h.baseInfo.salesType&&(!(1!=h.baseInfo.marketable||96==h.baseInfo.salesType&&h.isBusinessDetail)&&(o++,m.$activeTitle.text("预售").show(),$(".presell-rule a").attr("latag","latag_pc_detail_top_null_预售规则_"+window.code),void i())))},setXSQG:function(t,i){function a(){window.$p.loadAllProductionInfo(function(){n(window.$p.activity.flushSaleJson)},function(){layer.msg("暂时无法获取活动信息， 请刷新页面重试")})}function n(t){"IN"==t.status?(s.$countdownText.text("距结束还剩: "),window.$p.components.buygroup.refreshBuyButton(),e.timer(t.totime-i,function(e){s.$djs.text(e)},function(){a()}),$(".price-desc").text("秒杀价").css("color","#E22319"),$("#active-price").hide(),s.$djsBox.removeClass("hidden"),s.$delPrice.text($p.baseInfo.basePrice),s.$delPriceBox.removeClass("hidden")):"BEFORE"==t.status?(window.$p.components.buygroup.refreshBuyButton(),s.$countdownText.text("距开始还剩: "),$("#active-price").html("秒杀价   ¥"+$p.activity.discountPrice).show(),e.timer(t.fromtime-i,function(e){s.$djs.text(e)},function(){a()}),s.setPriceTagName("秒杀价"),$("#button_dhtz").hide(),s.$djsBox.removeClass("hidden")):(s.$activeBox.hide(),window.$p.baseInfo.showPrice=window.$p.baseInfo.price,window.$p.components.buygroup.updatePrice(window.$p.baseInfo.price),window.$p.components.buygroup.refreshBuyButton(),window.$p.baseInfo.stock>0&&(window.$p.components.buygroup.$button_shoppingcart.off("click"),window.$p.components.buygroup.setAddCartButtonClickHandler().show()))}if(!$p.baseInfo.isIntegral){var s=this;if("3"!=window.$p.baseInfo.activityType)return!1;if(window.$p.activity&&window.$p.activity.flushSaleJson&&"AFTER"==window.$p.activity.flushSaleJson.status)return!1;s.$activeTitle.text("限时").show(),o++,n(t.flushSaleJson)}},setShangou:function(t){function i(){var i=window.$p;if(null==i.activity||"null"==i.activity)return c.hide(),void i.components.buygroup.setBuyButton("闪购已结束",!0);var o=i.activity.ShanGou,a=i.nowNumber;if(i.activity&&i.activity.isOrdinaryPurchase||(i.activity.isOrdinaryPurchase=0),2==i.activity.activityType){if(i.baseInfo&&1!=i.baseInfo.marketable)switch(o.type){case 0:return 1==i.activity.isOrdinaryPurchase&&a<i.activity.reservationStartTime?passport&&passport.isLogin&&passport.isLogin()?void(i.baseInfo.isCombinedGoods?$(".price-desc").text("套餐价").css("color","#E22319"):$(".price-desc").text("会员价").css("color","#E22319")):void $(".price-desc").text("商城价"):0==i.activity.isOrdinaryPurchase&&a<o.startNumber?void(i.baseInfo.isCombinedGoods?$(".price-desc").text("套餐价").css("color","#E22319"):$(".price-desc").text("会员价").css("color","#E22319")):($(".price-desc").text("秒杀价").css("color","#E22319"),void r.$price.text(i.activity.discountPrice));case 1:return 1==i.activity.isOrdinaryPurchase&&a<i.activity.reservationStartTime?passport&&passport.isLogin&&passport.isLogin()?void(i.baseInfo.isCombinedGoods?$(".price-desc").text("套餐价").css("color","#E22319"):$(".price-desc").text("会员价").css("color","#E22319")):void $(".price-desc").text("商城价"):0==i.activity.isOrdinaryPurchase&&a<o.yystartNumber?void(i.baseInfo.isCombinedGoods?$(".price-desc").text("套餐价").css("color","#E22319"):$(".price-desc").text("会员价").css("color","#E22319")):($(".price-desc").text("秒杀价").css("color","#E22319"),void r.$price.text(i.activity.discountPrice));default:return $(".price-desc").text("秒杀价").css("color","#E22319"),void r.$price.text(i.activity.discountPrice)}switch(o.type){case 0:a<o.startNumber?(r.$activeBar.addClass("active-title-msBeforeBox"),r.$activeTitle.text("秒杀预告").addClass("active-title").show(),r.$activeTimer.show(),r.$setMsRemind.show(),r.$activeTime.text(PDUtil.formateHour(o.startTimeStr)),t&&(r.timerHideActiveBar(o.startNumber,r.$activeBox),i.components.buygroup.updatePrice(i.baseInfo.showPrice)),i.components.buygroup.setBuyButton("敬请期待",!0),t&&e.timer(o.startNumber-a,function(e){},function(){location.reload()}),$("#button_dhtz").hide()):a>o.startNumber&&a<o.endNumber?(r.$activeTitle.text("秒杀").addClass("active-title").show(),$(".price-desc").text("秒杀价").css("color","#E22319"),r.$countdownText.text("距结束还剩: "),i.baseInfo.stock>0?(i.components.buygroup.setBuyButton("立即购买",!1,i.components.buygroup.ljgm),window.$p.buyNowEstimateButton()):i.components.buygroup.setBuyButton("已抢光",!0),t&&e.timer(o.endNumber-a,function(e){r.$djs.text(e)},function(){location.reload()}),r.$djsBox.removeClass("hidden"),r.$delPrice.text(i.baseInfo.basePrice),r.$delPriceBox.removeClass("hidden"),r.$activeBox.show()):(c.hide(),i.components.buygroup.setBuyButton("闪购已结束",!0))}}}function a(e){e&&$p.jsonpIsSetRemind($p.activity.ShanGou.startNumber,function(e){if(1==e.success){var t=e.t;t?$("#setMsRemind").html("<i></i>取消提醒").data("remind","seton"):$("#setMsRemind").html("<i></i>设置提醒").data("remind","setoff")}}),$("#setMsRemind").off().on("click",function(){if(passport&&passport.isLogin()){var e=$("#setMsRemind").data("remind"),t=0;"setoff"==e?t=1:"seton"==e&&(t=2),1==t?layer.open({type:1,title:!1,skin:"ms-remind-phone-tip-layer",closeBtn:0,anim:2,shadeClose:!1,area:"500px",content:$("#ms-remind-phone-tip")}):2==t&&s(t),n()}else window.$p.loginToPage()})}function n(){passport&&/^1[3456789]\d{9}$/.test(passport.cookie.loginName)&&($(".ms-remind-phone").val(passport.cookie.loginName),$(".ms-remind-success-img").show()),$("#ms-remind-phone-tip span").unbind().click(function(){layer.closeAll(),$(".ms-remind-error-tip").hide(),$(".ms-remind-phone").removeClass("ms-remind-error-phone")}),$(".ms-remind-phone").off().on("input",function(){var e=$(this).val();/^1[3456789]\d{9}$/.test(e)?($(".ms-remind-error-tip").hide(),$(".ms-remind-phone").removeClass("ms-remind-error-phone"),$(".ms-remind-success-img").show()):$(".ms-remind-success-img").hide()}),$(".ms-remind-phone-submit").off().on("click",function(){var e=$(".ms-remind-phone").val(),t=$("#setMsRemind").data("remind"),i=0;"setoff"==t?i=1:"seton"==t&&(i=2),/^1[3456789]\d{9}$/.test(e)?($(".ms-remind-error-tip").hide(),$(".ms-remind-phone").removeClass("ms-remind-error-phone"),s(i,e)):0==e.length?($(".ms-remind-error-tip").show().html("请输入手机号"),$(".ms-remind-phone").addClass("ms-remind-error-phone")):($(".ms-remind-error-tip").show().html("输入的手机号有误，请重新填写"),$(".ms-remind-phone").addClass("ms-remind-error-phone"))})}function s(e,t){$p.jsonpRemindOption($p.activity.ShanGou.startNumber,e,t,function(t){if(1==t.success){layer.closeAll(),$("#ms-remind-tip span").unbind().click(function(){layer.closeAll(),clearTimeout(i)}),1==e?($(".ms-remind-info").text(" 设置成功，秒杀开始前收到通知！"),$("#setMsRemind").html("<i></i>取消提醒").data("remind","seton")):($(".ms-remind-info").text(" 取消成功"),$("#setMsRemind").html("<i></i>设置提醒").data("remind","setoff")),layer.open({type:1,title:!1,skin:"ms-remind-tip-layer",closeBtn:0,anim:2,shadeClose:!1,area:"500px",content:$("#ms-remind-tip")});var i=setTimeout(function(){layer.closeAll()},5e3)}else{layer.closeAll(),$("#ms-remind-tip span").unbind().click(function(){layer.closeAll(),clearTimeout(o)}),$(".ms-remind-icon").attr("src","https://p2.lefile.cn/product/adminweb/2020/01/14/7ae954d6-f50d-4079-b386-a670beb495a4.png"),$(".ms-remind-info").text(" 设置失败，请重新设置！"),layer.open({type:1,title:!1,skin:"ms-remind-tip-layer",closeBtn:0,anim:2,shadeClose:!1,area:"500px",content:$("#ms-remind-tip")});var o=setTimeout(function(){layer.closeAll()},5e3)}})}if(!($p.baseInfo.isIntegral||96==$p.baseInfo.salesType&&$p.isBusinessDetail)){var r=this;if(window.$p.activity&&window.$p.activity.ShanGou&&window.$p.activity.ShanGou.endNumber&&window.$p.nowNumber>window.$p.activity.ShanGou.endNumber)return!1;o++;var c=$("#promotion_shangou");$("#promotion_shangou span.des"),$("#promotion_shangou span.djs");a(t),i()}},setShangouTimer:function(t){function i(){var i=window.$p;if(null==i.activity||"null"==i.activity)return c.hide(),void i.components.buygroup.setBuyButton("闪购已结束",!0);var o=i.activity.ShanGouTimer,a=i.nowNumber;return i.activity&&i.activity.isOrdinaryPurchase||(i.activity.isOrdinaryPurchase=0),4==i.activity.activityType?i.baseInfo&&1!=i.baseInfo.marketable?1==i.activity.isOrdinaryPurchase&&a<o.startNumber?passport&&passport.isLogin&&passport.isLogin()?void(i.baseInfo.isCombinedGoods?$(".price-desc").text("套餐价").css("color","#E22319"):$(".price-desc").text("会员价").css("color","#E22319")):void $(".price-desc").text("商城价"):($(".price-desc").text("秒杀价").css("color","#E22319"),void r.$price.text(i.activity.discountPrice)):void(1==i.activity.isOrdinaryPurchase?a<o.startNumber?(r.$activeBar.addClass("active-title-msBeforeBox"),r.$activeTitle.text("秒杀预告").addClass("active-title").show(),r.$activeTimer.show(),r.$setMsRemind.show(),r.$activeTime.text(PDUtil.formateHour(o.activiyStartTimeStr)),t&&(r.timerHideActiveBar(o.activiyStartTime,r.$activeBox),i.components.buygroup.updatePrice(i.baseInfo.showPrice)),i.baseInfo.stock>0?(i.components.buygroup.setBuyButton("立即购买",!1,i.components.buygroup.ljgm),window.$p.buyNowEstimateButton(),"00f4a0a1-6860-417f-a72b-0545d20d6521"==faid&&"40"==i.baseInfo.productGroupNo&&"CESVIPA101"==i.baseInfo.materialNumber?$("#jrgwc").hide():!i.baseInfo.isCombinedGoods&&i.components.srdz&&2!==i.components.srdz.upload_type&&$("#jrgwc").show(),$("#button_dhtz").hide()):(i.components.buygroup.setBuyButton("已售罄",!0),$("#jrgwc").hide(),$("#button_dhtz").show()),t&&e.timer(o.startNumber-a,function(e){},function(){location.reload()})):a>o.startNumber&&a<o.activiyStartTime?(r.$activeTitle.text("秒杀即将开始").addClass("active-title").show(),$(".price-desc").text("秒杀价").css("color","#E22319"),r.$delPrice.text(i.baseInfo.basePrice),r.$delPriceBox.removeClass("hidden"),r.$countdownText.text("距开始还有: "),r.$ljgmBtn.css({"font-size":"12px","background-color":"gray",border:"none",opacity:".8",cursor:"default",width:"180px"}).attr("title","").off(),$("#tab_ljgm .tab-button-pay").css({"font-size":"12px","background-color":"gray",border:"1px solid gray",opacity:".8",cursor:"default"}).attr("title","").off(),t&&e.timer(o.activiyStartTime-a,function(e){r.$djs.text(e),i.baseInfo.isShowPrice&&i.baseInfo.price&&(r.$ljgmBtn.text("距开始还有 "+e),$("#tab_ljgm .tab-button-pay").html("距开始还有 "+e).removeClass("tab_deliveryPriceDesc"))},function(){location.reload()}),r.$djsBox.removeClass("hidden"),$("#button_dhtz").hide(),r.$activeBox.show()):(r.$activeTitle.text("秒杀").addClass("active-title").show(),$(".price-desc").text("秒杀价").css("color","#E22319"),r.$countdownText.text("距结束还剩: "),i.baseInfo.stock>0?(i.components.buygroup.setBuyButton("立即购买",!1,i.components.buygroup.ljgm),window.$p.buyNowEstimateButton()):i.components.buygroup.setBuyButton("已抢光",!0),t&&e.timer(o.endNumber-a,function(e){r.$djs.text(e)},function(){location.reload()}),r.$djsBox.removeClass("hidden"),r.$delPrice.text(i.baseInfo.basePrice),r.$delPriceBox.removeClass("hidden"),r.$activeBox.show()):0==i.activity.isOrdinaryPurchase&&(a<o.startNumber?(r.$activeBar.addClass("active-title-msBeforeBox"),r.$activeTitle.text("秒杀预告").addClass("active-title").show(),r.$activeTimer.show(),r.$setMsRemind.show(),r.$activeTime.text(PDUtil.formateHour(o.startTimeStr)),i.components.buygroup.setBuyButton("敬请期待",!0),t&&e.timer(o.startNumber-a,function(e){},function(){location.reload()}),r.$djsBox.removeClass("hidden"),$("#button_dhtz").hide(),r.$activeBox.show()):a>o.startNumber&&a<o.endNumber?(r.$activeTitle.text("秒杀").show(),$(".price-desc").text("秒杀价").css("color","#E22319"),r.$countdownText.text("距结束还剩: "),i.baseInfo.stock>0?(i.components.buygroup.setBuyButton("立即购买",!1,i.components.buygroup.ljgm),window.$p.buyNowEstimateButton()):i.components.buygroup.setBuyButton("已抢光",!0),t&&e.timer(o.endNumber-a,function(e){r.$djs.text(e)},function(){location.reload()}),r.$djsBox.removeClass("hidden"),r.$delPrice.text(i.baseInfo.basePrice),r.$delPriceBox.removeClass("hidden"),r.$activeBox.show()):(c.hide(),i.components.buygroup.setBuyButton("闪购已结束",!0)))):void 0}function a(e){e&&$p.jsonpIsSetRemind($p.activity.ShanGouTimer.activiyStartTime,function(e){if(1==e.success){var t=e.t;t?$("#setMsRemind").html("<i></i>取消提醒").data("remind","seton"):$("#setMsRemind").html("<i></i>设置提醒").data("remind","setoff")}}),$("#setMsRemind").off().on("click",function(){if(passport&&passport.isLogin()){var e=$("#setMsRemind").data("remind"),t=0;"setoff"==e?t=1:"seton"==e&&(t=2),1==t?layer.open({type:1,title:!1,skin:"ms-remind-phone-tip-layer",closeBtn:0,anim:2,shadeClose:!1,area:"500px",content:$("#ms-remind-phone-tip")}):2==t&&s(t),n()}else window.$p.loginToPage()})}function n(){passport&&/^1[3456789]\d{9}$/.test(passport.cookie.loginName)&&($(".ms-remind-phone").val(passport.cookie.loginName),$(".ms-remind-success-img").show()),$("#ms-remind-phone-tip span").unbind().click(function(){layer.closeAll(),$(".ms-remind-error-tip").hide(),$(".ms-remind-phone").removeClass("ms-remind-error-phone")}),$(".ms-remind-phone").off().on("input",function(){var e=$(this).val();/^1[3456789]\d{9}$/.test(e)?($(".ms-remind-error-tip").hide(),$(".ms-remind-phone").removeClass("ms-remind-error-phone"),$(".ms-remind-success-img").show()):$(".ms-remind-success-img").hide()}),$(".ms-remind-phone-submit").off().on("click",function(){var e=$(".ms-remind-phone").val(),t=$("#setMsRemind").data("remind"),i=0;"setoff"==t?i=1:"seton"==t&&(i=2),/^1[3456789]\d{9}$/.test(e)?($(".ms-remind-error-tip").hide(),$(".ms-remind-phone").removeClass("ms-remind-error-phone"),s(i,e)):0==e.length?($(".ms-remind-error-tip").show().html("请输入手机号"),$(".ms-remind-phone").addClass("ms-remind-error-phone")):($(".ms-remind-error-tip").show().html("输入的手机号有误，请重新填写"),$(".ms-remind-phone").addClass("ms-remind-error-phone"))})}function s(e,t){$p.jsonpRemindOption($p.activity.ShanGouTimer.activiyStartTime,e,t,function(t){if(1==t.success){layer.closeAll(),$("#ms-remind-tip span").unbind().click(function(){layer.closeAll(),clearTimeout(i)}),1==e?($(".ms-remind-info").text(" 设置成功，秒杀开始前收到通知！"),$("#setMsRemind").html("<i></i>取消提醒").data("remind","seton")):($(".ms-remind-info").text(" 取消成功"),$("#setMsRemind").html("<i></i>设置提醒").data("remind","setoff")),layer.open({type:1,title:!1,skin:"ms-remind-tip-layer",closeBtn:0,anim:2,shadeClose:!1,area:"500px",content:$("#ms-remind-tip")});var i=setTimeout(function(){layer.closeAll()},5e3)}else{layer.closeAll(),$("#ms-remind-tip span").unbind().click(function(){layer.closeAll(),clearTimeout(o)}),$(".ms-remind-icon").attr("src","https://p2.lefile.cn/product/adminweb/2020/01/14/7ae954d6-f50d-4079-b386-a670beb495a4.png"),$(".ms-remind-info").text(" 设置失败，请重新设置！"),layer.open({type:1,title:!1,skin:"ms-remind-tip-layer",closeBtn:0,anim:2,shadeClose:!1,area:"500px",content:$("#ms-remind-tip")});var o=setTimeout(function(){layer.closeAll()},5e3)}})}if(!($p.baseInfo.isIntegral||96==$p.baseInfo.salesType&&$p.isBusinessDetail)){var r=this;if(window.$p.activity&&window.$p.activity.ShanGouTimer&&window.$p.activity.ShanGouTimer.endNumber&&window.$p.nowNumber>window.$p.activity.ShanGouTimer.endNumber)return!1;o++;var c=$("#promotion_shangou");a(t),i()}},setYuyue:function(t){function i(){var i=window.$p,o=i.activity.YuYue,a=i.nowNumber;5==i.activity.activityType&&(i.baseInfo&&1!=i.baseInfo.marketable||(a<o.yystartNumber?i.baseInfo.stock>0?(i.components.buygroup.setBuyButton("立即购买",!1,i.components.buygroup.ljgm),!i.baseInfo.isCombinedGoods&&i.components.srdz&&2!==i.components.srdz.upload_type&&$("#jrgwc").show(),$("#button_dhtz").hide()):(i.components.buygroup.setBuyButton("已售罄",!0),$("#jrgwc").hide(),$("#button_dhtz").show()):a>=o.yystartNumber&&a<=o.yyendNumber&&(window.passport&&passport.isLogin()?i.jsonpIsYyUser(function(e){1==e.success&&1==e.t?i.components.buygroup.setBuyButton("已预约",!0):i.components.buygroup.setBuyButton("立即预约",!1,i.components.buygroup.ljyy)}):i.components.buygroup.setBuyButton("立即预约",!1,i.components.buygroup.ljyy),$("#yuyue-personNum").removeClass("hidden"),i.jsonpGetYyNum(function(e){1==e.success?$("#yuyue-count").text(e.t):layer.msg(e.resultMsg)}),o.isYyShowPrice||!o.isYyShowPrice&&a>o.showPriceTime?(""==i.baseInfo.price?n.$yyGroup.find(".yy-price-show").text("暂无报价"):n.$yyGroup.find(".yy-price-show").text(i.baseInfo.price),
new RegExp(/^(M1|M3)$/).test(i.baseInfo.productGroupNo)||new RegExp(/^(99)$/).test(i.baseInfo.productGroupNo)&&"36d0caa1-af7a-459b-b147-04b86ad25dd7"==window.faid?n.$yyGroup.find(".yy-price-date").html(""):n.$yyGroup.find(".yy-price-date").html('<span class="yy-price-time">'+PDUtil.formatShortDate(o.yyendTimeStr)+"</span>开售")):(n.$yyGroup.find(".yy-price-show").text("待公布"),n.$yyGroup.find(".yy-price-sign").hide(),new RegExp(/^(M1|M3)$/).test(i.baseInfo.productGroupNo)||new RegExp(/^(99)$/).test(i.baseInfo.productGroupNo)&&"36d0caa1-af7a-459b-b147-04b86ad25dd7"==window.faid?n.$yyGroup.find(".yy-price-date").html('<span class="yy-price-time">'+PDUtil.formatShortDate(o.showPriceTimeStr,0)+"</span>公布价格"):n.$yyGroup.find(".yy-price-date").html('<span class="yy-price-time">'+PDUtil.formatShortDate(o.showPriceTimeStr)+"</span>公布价格"),t&&e.timer(o.showPriceTime-a,function(e){},function(){location.reload()})),$(".price-detail-wrap").addClass("yy-price-detail-wrap"),$(".sign-prc-group").hide(),n.$yyGroup.removeClass("hidden"),n.$yyGroup.find(".yy-price-base").hide(),n.$priceDes.text("价格").css("color","#E22319"),n.$activeTitle.text("预约中").addClass("active-title").show(),n.$countdownText.text("距结束还剩: "),t&&e.timer(o.yyendNumber-a,function(e){n.$djs.text(e)},function(){location.reload()}),n.$djsBox.removeClass("hidden"),n.$activeBox.show(),$("#container_purchase_count").addClass("hidden"))))}function a(){location.host.indexOf("lenovouat")>=0?$(".ljyy-pop-btn").attr("href","https://i.lenovouat.com/booking/list.jhtml?sts=e40e7004-4c8a-4963-8564-31271a8337d8"):location.host.indexOf("cn")>=0&&$(".ljyy-pop-btn").attr("href","https://i.lenovo.com.cn/booking/list.jhtml?sts=e40e7004-4c8a-4963-8564-31271a8337d8"),$(".yy-close, .yy-again-btn").off().on("click",function(){$("#wsgyy_tel").val(""),$(".yy-error-tip").hide(),$("#wsgyy_tel").removeClass("error_phone"),layer.closeAll()}),$("#wsgyy_modify").off().on("click",function(){$("#wsgyy_tel").val(""),$(".yy-error-tip").hide(),$("#wsgyy_tel").removeClass("error_phone")}),$("#wsgyy_tel").off().on("input",function(){var e=$(this).val();/^1[3456789]\d{9}$/.test(e)&&($(".yy-error-tip").hide(),$("#wsgyy_tel").removeClass("error_phone"))}),$("#wsgyy_ok").off().on("click",function(){var t=$("#wsgyy_tel").val();e.checkTelNo(t)?window.$p.jsonpYuyue(t,function(e){if(1==e.success){if(new RegExp(/^(M1|M3)$/).test($p.baseInfo.productGroupNo)||new RegExp(/^(99)$/).test($p.baseInfo.productGroupNo)&&"36d0caa1-af7a-459b-b147-04b86ad25dd7"==window.faid){var t="";$("#ljyy-done-layer-wrap .ljyy-pop-btn").css({float:"none",display:"block",margin:"0 auto"})}else var t=PDUtil.formatShortDate($p.activity.YuYue.yyendTimeStr,3)+"开售，先到先得。";$("#ljyy-done-layer-wrap .ljyy-pop-txt").text(t),layer.closeAll(),layer.open({type:1,skin:"ljyy-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["580px","367px"],move:!1,content:$("#ljyy-done-layer-wrap")}),$p.jsonpGetYyNum(function(e){1==e.success?$("#yuyue-count").text(e.t):layer.msg(e.resultMsg)}),window.$p.components.buygroup.setBuyButton("已预约",!0)}else 0==e.success&&20009==e.resultCode?(layer.closeAll(),layer.open({type:1,skin:"ljyy-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["580px","204px"],move:!1,content:$("#ljyy-fail-layer-wrap")}),$("#ljyy-fail-layer-wrap .yy-info").text("您已预约！"),$("#ljyy-fail-layer-wrap .yy-again-btn").text("确定"),$("#ljyy-fail-layer-wrap .yy-close,#ljyy-fail-layer-wrap .yy-again-btn").off().on("click",function(){location.reload()})):(layer.closeAll(),layer.open({type:1,skin:"ljyy-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["580px","204px"],move:!1,content:$("#ljyy-fail-layer-wrap")}))},function(){layer.msg("发送预约信息失败！")}):0==t.length?($(".yy-error-tip").text("请输入手机号").show(),$("#wsgyy_tel").addClass("error_phone")):($(".yy-error-tip").text("输入的手机号有误，请重新填写").show(),$("#wsgyy_tel").addClass("error_phone"),$("#wsgyy_modify").show())})}if(!($p.baseInfo.isIntegral||96==$p.baseInfo.salesType&&$p.isBusinessDetail)){var n=this;if(window.$p.activity&&window.$p.activity.YuYue&&window.$p.activity.YuYue.yyendNumber&&window.$p.nowNumber>window.$p.activity.YuYue.yyendNumber)return!1;o++,a(),i()}},setYuyueQg:function(t){function i(){var i=window.$p,o=i.activity.flashYyJson,a=i.nowNumber;3==i.activity.activityType&&(i.baseInfo&&1!=i.baseInfo.marketable||(a<o.yystartNumber?i.baseInfo.stock>0?(i.components.buygroup.setBuyButton("立即购买",!1,i.components.buygroup.ljgm),!i.baseInfo.isCombinedGoods&&i.components.srdz&&2!==i.components.srdz.upload_type&&$("#jrgwc").show(),$("#button_dhtz").hide()):(i.components.buygroup.setBuyButton("已售罄",!0),$("#jrgwc").hide(),$("#button_dhtz").show()):a>=o.yystartNumber&&a<=o.yyendNumber?(window.passport&&passport.isLogin()?i.jsonpIsYyUser(function(e){1==e.success&&1==e.t?i.components.buygroup.setBuyButton("已预约",!0):i.components.buygroup.setBuyButton("立即预约",!1,i.components.buygroup.ljyy)}):i.components.buygroup.setBuyButton("立即预约",!1,i.components.buygroup.ljyy),$("#yuyue-personNum").removeClass("hidden"),i.jsonpGetYyNum(function(e){1==e.success?$("#yuyue-count").text(e.t):layer.msg(e.resultMsg)}),o.isYyShowPrice||!o.isYyShowPrice&&a>o.showPriceTime?(""==i.baseInfo.price?n.$yyGroup.find(".yy-price-show").text("暂无报价"):n.$yyGroup.find(".yy-price-show").text(i.baseInfo.price),n.$yyGroup.find(".yy-price-date").html('<span class="yy-price-time">'+PDUtil.formatShortDate(o.startTimeStr)+"</span>开始抢购"),$(".yy-price-base .yy-price-show-del").text(i.baseInfo.basePrice)):(n.$yyGroup.find(".yy-price-show").text("待公布"),n.$yyGroup.find(".yy-price-sign").hide(),n.$yyGroup.find(".yy-price-date").html('<span class="yy-price-time">'+PDUtil.formatShortDate(o.showPriceTimeStr)+"</span>公布价格"),n.$yyGroup.find(".yy-price-base").hide(),e.timer(o.showPriceTime-a,function(e){},function(){location.reload()})),$(".price-detail-wrap").addClass("yy-price-detail-wrap"),$(".sign-prc-group").hide(),n.$yyGroup.removeClass("hidden"),n.$priceDes.text("价格").css("color","#E22319"),n.$activeTitle.text("预约中").addClass("active-title").show(),n.$countdownText.text("距结束还剩: "),t&&e.timer(o.yyendNumber-a,function(e){n.$djs.text(e)},function(){location.reload()}),n.$djsBox.removeClass("hidden"),n.$activeBox.show(),$("#container_purchase_count").addClass("hidden")):a>o.yyendNumber&&a<o.startNumber?(1==o.yycondition?i.jsonpGetGMZG(function(e){1==e.success&&1==e.t?i.components.buygroup.setBuyButton("已预约",!0):i.components.buygroup.setBuyButton("未预约",!0)}):i.jsonpIsYyUser(function(e){1==e.success&&1==e.t?i.components.buygroup.setBuyButton("已预约",!0):i.components.buygroup.setBuyButton("未预约",!0)}),$("#yuyue-personNum").removeClass("hidden"),i.jsonpGetYyNum(function(e){1==e.success?$("#yuyue-count").text(e.t):layer.msg(e.resultMsg)}),o.isYyShowPrice||!o.isYyShowPrice&&a>o.showPriceTime?(""==i.baseInfo.price?n.$yyGroup.find(".yy-price-show").text("暂无报价"):n.$yyGroup.find(".yy-price-show").text(i.baseInfo.price),n.$yyGroup.find(".yy-price-date").html('<span class="yy-price-time">'+PDUtil.formatShortDate(o.startTimeStr)+"</span>开始抢购"),$(".yy-price-base .yy-price-show-del").text(i.baseInfo.basePrice)):(n.$yyGroup.find(".yy-price-show").text("待公布"),n.$yyGroup.find(".yy-price-sign").hide(),n.$yyGroup.find(".yy-price-date").html('<span class="yy-price-time">'+PDUtil.formatShortDate(o.showPriceTimeStr)+"</span>公布价格"),n.$yyGroup.find(".yy-price-base").hide(),e.timer(o.showPriceTime-a,function(e){},function(){location.reload()})),$(".price-detail-wrap").addClass("yy-price-detail-wrap"),$(".sign-prc-group").hide(),n.$yyGroup.removeClass("hidden"),$(".price-desc").text("价格").css("color","#E22319"),n.$activeTitle.text("即将开抢").addClass("active-title").show(),n.$countdownText.text("距抢购开始: "),t&&e.timer(o.startNumber-a,function(e){n.$djs.text(e)},function(){location.reload()}),n.$djsBox.removeClass("hidden"),$("#button_dhtz").hide(),n.$activeBox.show(),$("#container_purchase_count").addClass("hidden")):a>o.startNumber&&a<o.endNumber?(window.passport&&passport.isLogin()?1==o.yycondition?i.jsonpGetGMZG(function(e){1==e.success?1==e.t?i.baseInfo.stock>0?i.components.buygroup.setBuyButton("立即抢购",!1,i.components.buygroup.ljgm_sg):i.components.buygroup.setBuyButton("已抢光",!0):(i.components.buygroup.setBuyButton("未预约",!0),$("#button_dhtz").hide()):i.baseInfo.stock>0?i.components.buygroup.setBuyButton("立即抢购",!1,i.components.buygroup.ljgm_sg):i.components.buygroup.setBuyButton("已抢光",!0)}):i.baseInfo.stock>0?i.components.buygroup.setBuyButton("立即抢购",!1,i.components.buygroup.ljgm_sg):i.components.buygroup.setBuyButton("已抢光",!0):(i.components.buygroup.setBuyButton("立即抢购",!1,i.components.buygroup.ljgm_sg),$("#button_dhtz").hide()),$("#yuyue-personNum").removeClass("hidden"),i.jsonpGetYyNum(function(e){1==e.success?$("#yuyue-count").text(e.t):layer.msg(e.resultMsg)}),$(".price-desc").text("价格").css("color","#E22319"),n.$activeTitle.text("抢购中").addClass("active-title").show(),n.$countdownText.text("距结束还剩："),t&&e.timer(o.endNumber-a,function(e){n.$djs.text(e)},function(){location.reload()}),n.$djsBox.removeClass("hidden"),n.$delPrice.text(i.baseInfo.basePrice),n.$delPriceBox.removeClass("hidden"),n.$activeBox.show()):i.components.buygroup.setBuyButton("抢购已结束",!0)))}function a(){location.host.indexOf("lenovouat")>=0?$(".ljyy-pop-btn").attr("href","https://i.lenovouat.com/booking/list.jhtml?sts=e40e7004-4c8a-4963-8564-31271a8337d8"):location.host.indexOf("cn")>=0&&$(".ljyy-pop-btn").attr("href","https://i.lenovo.com.cn/booking/list.jhtml?sts=e40e7004-4c8a-4963-8564-31271a8337d8"),$(".yy-close, .yy-again-btn").off().on("click",function(){$("#wsgyy_tel").val(""),$(".yy-error-tip").hide(),$("#wsgyy_tel").removeClass("error_phone"),layer.closeAll()}),$("#wsgyy_modify").off().on("click",function(){$("#wsgyy_tel").val(""),$(".yy-error-tip").hide(),$("#wsgyy_tel").removeClass("error_phone")}),$("#wsgyy_tel").off().on("input",function(){var e=$(this).val();/^1[3456789]\d{9}$/.test(e)&&($(".yy-error-tip").hide(),$("#wsgyy_tel").removeClass("error_phone"))}),$("#wsgyy_ok").off().on("click",function(){var t=$("#wsgyy_tel").val();e.checkTelNo(t)?window.$p.jsonpYuyue(t,function(e){if(1==e.success){var t=PDUtil.formatShortDate($p.activity.flashYyJson.startTimeStr,3)+"开始抢购，先到先得。";$("#ljyy-done-layer-wrap .ljyy-pop-txt").text(t),layer.closeAll(),layer.open({type:1,skin:"ljyy-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["580px","367px"],move:!1,content:$("#ljyy-done-layer-wrap")}),$p.jsonpGetYyNum(function(e){1==e.success?$("#yuyue-count").text(e.t):layer.msg(e.resultMsg)}),window.$p.components.buygroup.setBuyButton("已预约",!0)}else 0==e.success&&20009==e.resultCode?(layer.closeAll(),layer.open({type:1,skin:"ljyy-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["580px","204px"],move:!1,content:$("#ljyy-fail-layer-wrap")}),$("#ljyy-fail-layer-wrap .yy-info").text("您已预约！"),$("#ljyy-fail-layer-wrap .yy-again-btn").text("确定"),$("#ljyy-fail-layer-wrap .yy-close,#ljyy-fail-layer-wrap .yy-again-btn").off().on("click",function(){location.reload()})):(layer.closeAll(),layer.open({type:1,skin:"ljyy-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["580px","204px"],move:!1,content:$("#ljyy-fail-layer-wrap")}))},function(){layer.msg("发送预约信息失败！")}):0==t.length?($(".yy-error-tip").text("请输入手机号").show(),$("#wsgyy_tel").addClass("error_phone")):($(".yy-error-tip").text("输入的手机号有误，请重新填写").show(),$("#wsgyy_tel").addClass("error_phone"),$("#wsgyy_modify").show())})}if(!($p.baseInfo.isIntegral||96==$p.baseInfo.salesType&&$p.isBusinessDetail)){var n=this;if(window.$p.activity&&window.$p.activity.flashYyJson&&window.$p.activity.flashYyJson.endNumber&&window.$p.nowNumber>window.$p.activity.flashYyJson.endNumber)return!1;o++,a(),i()}},setInstallment:function(){function e(){var e=$("#ljgm").text();$p.ljgmText=e;var t=a.find(".installment-dropdown-wrapper");t.length>=2?($(t[0]).addClass("right"),$(t[1]).addClass("left"),$(t[1]).next(".installment-dropdown").addClass("left")):1===$(this).length&&$(t[0]).addClass("right"),a.find(".installment-dropdown-wrapper:not(#ins_unionPay)").on("click",function(){$(this).removeClass("checked"),$("#jrgwc").is(":hidden")&&$(this).next().find("li .circle .inner.checked").length&&(n&&!$p.baseInfo.isCombinedGoods&&$p.components.srdz&&2!==$p.components.srdz.upload_type&&$("#jrgwc").show(),$p.noLjgmClick?$p.components.buygroup.setBuyButton($p.ljgmText,!0):$p.baseInfo.deliveryPrice&&$p.baseInfo.deliveryPrice.offerDetailList&&$p.baseInfo.deliveryPrice.offerDetailList.length>0?window.$p.buyNowEstimateButton():$p.components.buygroup.setBuyButton($p.ljgmText,!1)),$(this).next().find("li .circle .inner.checked").removeClass("checked");var e=$(this).find(".installment-info span");e.each(function(){$(this).text($(this).data("defaulttext"))})}),a.find(".installment-item").on("click",function(){var e=$(this);if(e.find(".circle .inner.checked").length){0!=n&&!$p.baseInfo.isCombinedGoods&&$p.components.srdz&&2!==$p.components.srdz.upload_type&&$("#jrgwc").show(),$p.noLjgmClick?$p.components.buygroup.setBuyButton($p.ljgmText,!0):$p.baseInfo.deliveryPrice&&$p.baseInfo.deliveryPrice.offerDetailList&&$p.baseInfo.deliveryPrice.offerDetailList.length>0?window.$p.buyNowEstimateButton():$p.components.buygroup.setBuyButton($p.ljgmText,!1),e.find(".circle .inner.checked").removeClass("checked"),e.closest(".business-detail").find(".installment-dropdown-wrapper").removeClass("checked");var t=e.closest(".installment-dropdown").prev().find(".installment-info span");return void t.each(function(){$(this).text($(this).data("defaulttext"))})}null==n&&$("#jrgwc").is(":hidden")?n=!1:$("#jrgwc").is(":hidden")||(n=!0),$(this).parents(".business-detail").siblings().find(".inner").removeClass("checked"),$(this).parents(".business-detail").siblings().find(".installment-info span").each(function(e,t){$(t).text($(t).data("defaulttext"))}),$(this).find(".inner").addClass("checked").end().siblings().find(".inner").removeClass("checked"),$(this).parents(".business-detail").find(".installment-info span").text($(this).find(".ins-con-wrap").children("span:first-child").text()),$("#no_install").removeClass("checked"),$(".installment-dropdown-wrapper").removeClass("checked"),$(this).parents(".business-detail").find(".installment-dropdown-wrapper").addClass("checked"),$(this).parents(".business-detail").find(".installment-dropdown-wrapper").attr({"data-name":$(this).attr("data-name"),"data-cycle":$(this).attr("data-cycle"),"data-paytype":$(this).attr("data-paytype")}),($p.baseInfo.stock>0&&$("#ljgm").text().indexOf("立即购买")!==-1||$("#ljgm").text().indexOf("立即抢购")!==-1||$("#ljgm").text().indexOf("领券购买")!==-1)&&($p.components.buygroup.setBuyButton("分期支付",!1),$("#jrgwc").hide())}),$("#no_install").on("click",function(){$(".installment-dropdown-wrapper").removeClass("checked"),$(".inner").removeClass("checked"),$(".installment-info span").text("选择分期"),$(this).addClass("checked"),$("#ljgm").text().indexOf("分期支付")!==-1&&($p.components.buygroup.setBuyButton("立即购买",!1),!$p.baseInfo.isCombinedGoods&&$p.components.srdz&&2!==$p.components.srdz.upload_type&&$("#jrgwc").show())}),a.find("#install_unionPay .installment-dropdown-wrapper").on("click",function(){if($(this).hasClass("checked"))0!=n&&!$p.baseInfo.isCombinedGoods&&$p.components.srdz&&2!==$p.components.srdz.upload_type&&$("#jrgwc").show(),$p.noLjgmClick?$p.components.buygroup.setBuyButton($p.ljgmText,!0):$p.baseInfo.deliveryPrice&&$p.baseInfo.deliveryPrice.offerDetailList&&$p.baseInfo.deliveryPrice.offerDetailList.length>0?window.$p.buyNowEstimateButton():$p.components.buygroup.setBuyButton($p.ljgmText,!1),$(this).removeClass("checked");else{$(this).parents(".business-detail").siblings().find(".inner").removeClass("checked"),$(this).parents(".business-detail").siblings().find(".installment-info span").each(function(e,t){$(t).text($(t).data("defaulttext"))}),$("#no_install").removeClass("checked"),$(".installment-dropdown-wrapper").removeClass("checked"),$(this).addClass("checked"),null==n&&$("#jrgwc").is(":hidden")?n=!1:$("#jrgwc").is(":hidden")||(n=!0);var e=$(this).find(".installment-info span");e.each(function(){$(this).text($(this).data("defaulttext"))}),($p.baseInfo.stock>0&&$("#ljgm").text().indexOf("立即购买")!==-1||$("#ljgm").text().indexOf("立即抢购")!==-1||$("#ljgm").text().indexOf("领券购买")!==-1)&&($p.components.buygroup.setBuyButton("分期支付",!1),$("#jrgwc").hide())}})}function t(e){$.ajax({type:"GET",url:__detailConfig.getApiPath("installment")+"api/front/installment/get.jhtm?ss="+(new Date).getMilliseconds(),data:{gcode:code,terminal:$p.terminal,shopId:window.shopId,price:$p.baseInfo.price,group:passport&&passport.isLogin()?passport.cookie.groupCode:null},dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_installment_get",timeout:5e3,success:function(e){1==e.success?e.t&&i(e.t):console.log("分期接口异常！")},error:function(e){pd.log("the ajax is fail"+e.responseText+"--"+e.statusText,"warn")},complete:function(){e&&"function"==typeof e&&e()}})}function i(t){var i=t,a={antCheckLater:[],inviteInvestment:[],whiteStripInvestment:[],unionPayStaging:[]};if(i){if(i[11]){this.installmentCount++;for(var n=0;n<i[11].length;n++)a.antCheckLater.push({installmentName:"花呗分期",installmentPayment:i[11][n].payment,installmentStage:i[11][n].cycle,installmentInterest:i[11][n].serviceFee,installmentInterestRate:i[11][n].fee,installmentPayType:i[11][n].payType})}if(i[19]){this.installmentCount++;for(var s=0;s<i[19].length;s++)a.whiteStripInvestment.push({installmentName:"白条分期",installmentPayment:i[19][s].payment,installmentStage:i[19][s].cycle,installmentInterest:i[19][s].serviceFee,installmentInterestRate:i[19][s].fee,installmentPayType:i[19][s].payType})}if(i[36]){this.installmentCount++;for(var r=0;r<i[36].length;r++)a.unionPayStaging.push({installmentName:"银联分期",installmentPayment:i[36][r].payment,installmentStage:i[36][r].cycle,installmentInterest:i[36][r].serviceFee,installmentInterestRate:i[36][r].fee,installmentPayType:i[36][r].payType})}o(a),e()}}function o(e){var t=[],i=e,o="",a="",n="",s="",r="",c="";if($("#no_install").addClass("checked"),i.antCheckLater&&i.antCheckLater.length>0){for(var l=null,d=0;d<i.antCheckLater.length;d++)0===i.antCheckLater[d].installmentInterest?(o='<em style="color: red; font-style: normal;">免息，0手续费</em>',l?i.antCheckLater[d].installmentStage>l&&(l=i.antCheckLater[d].installmentStage):l=i.antCheckLater[d].installmentStage):o="手续费: 约￥"+(Math.ceil(100*i.antCheckLater[d].installmentInterest)/100).toFixed(2)+"/期",a+='<li data-name="花呗分期" data-cycle="'+i.antCheckLater[d].installmentStage+'" data-paytype="'+i.antCheckLater[d].installmentPayType+'" class="installment-item"><div class="ins-circle-wrap"><span class="circle"><span class="inner"></span></span></div><div class="ins-con-wrap"><span class="install-hover">¥'+(Math.round(100*i.antCheckLater[d].installmentPayment)/100).toFixed(2)+"x"+i.antCheckLater[d].installmentStage+'期</span><span class="ins-des">'+o+"</span></div></li>";l?(t.push(l),l="支持"+l+"期免息"):l="选择分期",s='<div class="business-detail hidden" id="install_huabei" latag="latag_pc_detail_top_chooseinstall_huabei_'+window.code+'"><div class="installment-dropdown-wrapper" id="ins_huabei"><div class="installment-icon"><img src="https://p3.lefile.cn/product/adminweb/2019/05/06/e655fdc5-86aa-4b71-81bd-a03e5bab0be4.png" alt=""><span class="ins-tit">花呗分期</span><div class="installment-info"><span id="mayi_info" data-defaulttext="'+l+'">'+l+'</span><i></i></div></div><div class="install-style-helper"></div></div><ul id="mayi_ul" class="installment-dropdown"></ul></div>'}if(i.inviteInvestment&&i.inviteInvestment.length>0){for(var p=null,u=0;u<i.inviteInvestment.length;u++)0===i.inviteInvestment[u].installmentInterest?(o='<em style="font-style: normal; color: red;">免息，0手续费</em>',p?i.inviteInvestment[u].installmentStage>p&&(p=i.inviteInvestment[u].installmentStage):p=i.inviteInvestment[u].installmentStage):o="手续费: 约￥"+(Math.ceil(100*i.inviteInvestment[u].installmentInterest)/100).toFixed(2)+"/期",n+='<li data-name="招行分期" data-cycle="'+i.inviteInvestment[u].installmentStage+'" data-paytype="'+i.inviteInvestment[u].installmentPayType+'" class="installment-item"><div class="ins-circle-wrap"><span class="circle"><span class="inner"></span></span></div><div class="ins-con-wrap"><span class="install-hover">¥'+(Math.round(100*i.inviteInvestment[u].installmentPayment)/100).toFixed(2)+"x"+i.inviteInvestment[u].installmentStage+'期</span><span class="ins-des">'+o+"</span></div></li>";p?(t.push(p),p="支持"+p+"期免息"):p="选择分期",r='<div class="business-detail hidden" id="install_zhaoshang"><div class="installment-dropdown-wrapper" id="ins_zhaoshang"><div class="installment-icon"><img src="https://p1.lefile.cn/product/adminweb/2019/05/07/b919c0d4-96be-4ba3-a2bf-b710c73ec117.png" alt=""><span class="ins-tit">招商银行</span><div class="installment-info"><span id="zhaoshang_info" data-defaulttext="'+p+'">'+p+'</span><i></i></div></div><div class="install-style-helper"></div></div><ul id="zhaoshang_ul" class="installment-dropdown"></ul></div>'}if(i.whiteStripInvestment&&i.whiteStripInvestment.length>0){for(var m=null,h=0;h<i.whiteStripInvestment.length;h++)0===i.whiteStripInvestment[h].installmentInterest?(o='<em style="font-style: normal; color: red;">免息，0手续费</em>',m?i.whiteStripInvestment[h].installmentStage>m&&(m=i.whiteStripInvestment[h].installmentStage):m=i.whiteStripInvestment[h].installmentStage):o="手续费: 约￥"+(Math.ceil(100*i.whiteStripInvestment[h].installmentInterest)/100).toFixed(2)+"/期",n+='<li data-name="白条分期" data-cycle="'+i.whiteStripInvestment[h].installmentStage+'" data-paytype="'+i.whiteStripInvestment[h].installmentPayType+'" class="installment-item"><div class="ins-circle-wrap"><span class="circle"><span class="inner"></span></span></div><div class="ins-con-wrap"><span class="install-hover">¥'+(Math.round(100*i.whiteStripInvestment[h].installmentPayment)/100).toFixed(2)+"x"+i.whiteStripInvestment[h].installmentStage+'期</span><span class="ins-des">'+o+"</span></div></li>";m?(t.push(m),m="支持"+m+"期免息"):m="选择分期",r='<div class="business-detail hidden" id="install_baitiao" latag="latag_pc_detail_top_chooseinstall_baitiao_'+window.code+'"><div class="installment-dropdown-wrapper" id="ins_baitiao"><div class="installment-icon"><img src="https://p3.lefile.cn/product/adminweb/2020/03/08/76da00ca-136c-4d8d-9fb7-86db374a85d9.png" alt=""><span class="ins-tit">白条分期</span><div class="installment-info"><span id="baitiao_info" data-defaulttext="'+m+'">'+m+'</span><i></i></div></div><div class="install-style-helper"></div></div><ul id="zhaoshang_ul" class="installment-dropdown"></ul></div>'}if(i.unionPayStaging&&i.unionPayStaging.length>0){for(var f=null,v=3,y=36,g=0;g<i.unionPayStaging.length;g++)0===i.unionPayStaging[g].installmentInterest&&(f?i.unionPayStaging[g].installmentStage>f&&(f=i.unionPayStaging[g].installmentStage):f=i.unionPayStaging[g].installmentStage);f?(t.push(f),f="支持"+f+"期免息"):f="使用银联分期",c='<div class="business-detail hidden" id="install_unionPay" latag="latag_pc_detail_top_chooseinstall_unionPay_'+window.code+'"><div class="installment-dropdown-wrapper" id="ins_unionPay" data-name="银联分期" data-cycle="'+v+'" data-paytype="'+y+'"><div class="installment-icon"><img src="https://p1.lefile.cn/fes/cms/2020/12/15/0yqlslgpwaimgsqjtxf06h3tbachf1758020.png" alt=""><span class="ins-tit">银联分期</span><div class="installment-info"><span id="yilian_info" data-defaulttext="'+f+'">'+f+'</span></div></div><div class="install-style-helper"></div></div></div>'}if(t.length>0){for(var D=t[0],d=0;d<t.length;d++)t[d]>D&&(D=t[d]);$p.baseInfo.couponIconNum++;var b='<span class="coupon-s interestFree-coupon" latag="latag_pc_detail_top_null_免息_'+window.code+'">'+D+"期免息</span>";$(".coupon-zp").before(b),$("#couponbox").show()}$("#container_installment").append('<div class="installment_wrap"></div>'),a&&($(".installment_wrap").append(s),$("#mayi_ul").html(a),$("#install_huabei").removeClass("hidden")),n&&($(".installment_wrap").append(r),$("#zhaoshang_ul").html(n),$("#install_baitiao").removeClass("hidden")),c&&($(".installment_wrap").append(c),$("#install_unionPay").removeClass("hidden")),(n||a)&&$("#container_installment").removeClass("hidden")}var a=$("#container_installment"),n=($(".install-style-helper"),null);return 96==$p.baseInfo.salesType&&$p.isBusinessDetail?void $(".price-detail-wrap").addClass("hidden"):void(1==$p.baseInfo.marketable&&t())},setPriceTagName:function(e){e&&window.passport&&passport.isLogin()&&$(".price-desc").text(e).css("color","#E22319")},timerHideActiveBar:function(e,t){var i=this;$.ajax({url:PDUtil.getItemDomain()+"/cache/time",dataType:"jsonp",jsonp:"callback",success:function(o){var a=1e3*o.curTime;a+864e5<e?PDUtil.timer(e-(a+864e5),function(e){t.hide()},function(){i.timerHideActiveBar(e,t)}):t.show()},error:function(){}})},formatDate:function(e){var t=new Date(e),i=t.getFullYear(),o=t.getMonth()+1,a=t.getDate(),n=t.getHours(),s=t.getMinutes(),r=t.getSeconds();return o<=9&&(o="0"+o),a<=9&&(a="0"+a),n<=9&&(n="0"+n),s<=9&&(s="0"+s),r<=9&&(r="0"+r),i+"-"+o+"-"+a+" "+n+":"+s+":"+r}},window.components||(window.components={}),window.components.PromotionInfo=t}(window.PDUtil),function(e){function t(t){this.data={},this.$detail_main=e("#detail_main"),this.$detail_left=e("#detail_left"),this.$detail_right=e("#detail_right"),t&&this.init()}var i=window.passport;t.prototype={constructor:t,init:function(){i.load?i.load(function(){o.init()}):o.init(),this.__initFloat()},__initFloat:function(){var t=this,i=e(document),o=1,a=0;e(window).on("scroll",function(){var e=t.$detail_main.offset(),n=e.top,s=0;if(t.$detail_left.height()+10>t.$detail_main.height())return!1;var r=i.scrollTop(),c=t.$detail_main.height()-t.$detail_left.height(),l=r-n;if(r-n>=c&&(l=c),r<=n){if(a=1,o==a)return!1;o=a,t.$detail_left.removeAttr("style")}else if(s=n+t.$detail_main.height(),r+t.$detail_left.height()<s)a=2,o=a,t.$detail_left.css({"margin-top":l});else{if(a=3,o==a)return!1;t.$detail_left.css({"margin-top":c}),o=a}})}};var o={isSc:!1,$sc:e("#a_sc"),init:function(){this.$sc=e("#a_sc"),i&&i.isLogin()?o.p_get("findfavorites.do?ss=",o.suc):o.$sc.removeClass("sc").off("click").on("click",function(){window.$p.loginToPage()})},p_get:function(e,t){i&&i.isLogin()?window.$p.loadMyFavorite({url:e},t):window.$p.loginToPage()},suc:function(e){"0"==e.rc?(o.removeFavorites(),o.isSc=!0):(o.addFavorites(),o.isSc=!1)},addFavorites:function(){o.$sc.removeClass("sc").off("click").on("click",{type:"add"},o.doSC)},removeFavorites:function(){o.$sc.addClass("sc").off("click").on("click",o.doSC)},doSC:function(e){e.data&&"add"===e.data.type?o.p_get("addfavorites.do?ss=",function(e){"0"==e.rc&&(o.removeFavorites(),o.isSc=!0)}):o.p_get("deletefavorites.do?ss=",function(e){"0"==e.rc&&(o.addFavorites(),o.isSc=!1)})}};window.components||(window.components={}),window.components.ScrollPicture=t,window.components.ScComponent=o}(window.jQuery),function(){function e(e){this.data={allService:[],all:[],selectedArray:[],checkPresell:!1},this.$box=$("#div_service"),this.$serviceBox=$("#div_service .serviceBox"),this.$container=$("#div_service"),e&&this.init()}e.prototype={constructor:e,init:function(){try{var e=this;if($p.baseInfo.isIntegral)return;if(1!=$p.baseInfo.marketable||96==$p.baseInfo.salesType&&$p.isBusinessDetail)return;this.loadData(function(){e.data.allService.length>0&&e.checkPresellInfo(function(){e.renderDom(),e.bindEvent()})})}catch(e){window.PDUtil.warn("service组件=> init方法错误 ---------->"),window.PDUtil.warn(e)}},loadData:function(e){var t=this;window.$p.loadServiceInfo({},function(i){200==i.status&&i.data&&i.data.length>0?($p.baseInfo.isHasService=1,t.data.all=i.data,t.data.allService=t.formatServiceData(i.data),e&&e()):$p.baseInfo.isHasService=0})},renderDom:function(){try{for(var e="",t=0;t<this.data.allService.length;t++){var i=this.data.allService[t],o=t<2==1?"noMarginTop":"",a=t%2==0?"noMarginLeft":"",n=t%2==1?"leftBox":"",s=t%2?"":" left-li";if(e+='<li class="item '+o+" "+a+s+'" data-categoryName="'+i.categoryName+'" data-code="'+i.list[0].code+'" latag="latag_pc_detail_chooseservice_null_'+i.list[0].code+"_"+code+'"><div class="s-title-wrap"><span class="ellipsis outer-1" title="'+i.list[0].serviceGoodsName+'">'+i.list[0].serviceGoodsName+'</span> ￥<span class="recommend-price-outer">'+i.list[0].price+'</span><i class="icon"></i></div>',e+='<div class="hoverBox '+n+'"><div class="shade"><div class="s-title-wrap-hover"><span class="ellipsis middle-1">'+i.list[0].serviceGoodsName+'</span> ￥<span class="recommend-price-middle">'+i.list[0].price+'</span><i class="icon"></i></div></div>',i.list.length>0){for(var r=0;r<i.list.length;r++){var c=i.list[r];e+='<div class="detail clearfix"  data-categoryName="'+i.categoryName+'" data-code="'+c.code+'" latag="latag_pc_detail_chooseservice_null_'+c.code+"_"+code+'"><div class="clickBox"><span class="circle"><span class="inner"></span></span><p class="content" title="'+(c.serviceGoodsBrief?c.serviceGoodsBrief:c.serviceGoodsName)+'">'+c.serviceGoodsName+'</p><span class="recommend-opt"> ￥<b class="recommend-price">'+c.price+'</b></span></div><a class="more" href="/product/'+c.code+'.html" target="_blank" latag="latag_pc_detail_chooseservice_detail_/product/'+c.code+".html_"+code+'"><u>详情</u><span>></span></a></div>'}e+="</div>"}e+="</li>"}e.length>0&&(this.$serviceBox.append(e),this.$container.removeClass("hidden"))}catch(e){window.PDUtil.warn("service组件=> renderDom方法错误 ---------->"),window.PDUtil.warn(e)}},bindEvent:function(){var e=this,t=this.$serviceBox.find(".item"),i=t.find(".hoverBox .detail .clickBox"),o=t.find(".s-title-wrap-hover");i.on("click",function(){var t=$(this),i=t.parent(".detail"),o=t.parents(".detail").attr("data-code");if(i.hasClass("selected")){i.removeClass("selected"),t.parents(".item").removeClass("selected"),e.removeSelectedService(i.attr("data-code"));var a=$(this).closest(".hoverBox").children(".detail").eq(0),n=a.find(".content").text(),s=a.find(".recommend-price").text();$(this).parents(".item").find(".middle-1").text(n).attr("title",n),$(this).parents(".item").find(".recommend-price-middle").text(s),$(this).parents(".item").find(".outer-1").text(n).attr("title",n),$(this).parents(".item").find(".recommend-price-outer").text(s),$p.components.enterprisePoints&&$p.components.enterprisePoints.hasEnterprisePoints&&($p.components.enterprisePoints.removeIntegrationItem($p.components.enterprisePoints.itemList,"goodsNumber",o),$p.components.enterprisePoints.getGoodsEnterprisePoints($p.components.enterprisePoints.itemList))}else{var r=i.siblings(".selected").attr("data-code");if(e.removeSelectedService(r),e.addSelectedService(i.attr("data-code")),i.addClass("selected").siblings().removeClass("selected"),i.parents(".item").addClass("selected"),$(this).parents(".item").find(".middle-1").text($(this).find(".content").text()).attr("title",$(this).find("content").text()),$(this).parents(".item").find(".recommend-price-middle").text($(this).find(".recommend-price").text()),$(this).parents(".item").find(".outer-1").text($(this).find(".content").text()).attr("title",$(this).find(".content").text()),$(this).parents(".item").find(".recommend-price-outer").text($(this).find(".recommend-price").text()),$p.components.enterprisePoints&&$p.components.enterprisePoints.hasEnterprisePoints){$p.components.enterprisePoints.removeIntegrationItem($p.components.enterprisePoints.itemList,"goodsNumber",r);var c={};c.faId=faid,c.goodsCode=o,c.num=$p.buyProNumber||1,c.amount=$(this).find(".recommend-price").text(),c.goodsNumber=o,$p.components.enterprisePoints.itemList.push(c),$p.components.enterprisePoints.getGoodsEnterprisePoints($p.components.enterprisePoints.itemList)}}t.parents(".item").attr("data-code",o),"7ef1d628-5bd3-4651-9530-793678cc02af"!=faid||!$p.isProActivityBefore||$p.baseInfo.isUpgradeGoods||$p.baseInfo.isCombinedGoods||(2!=$p.baseInfo.salesType&&!$p.isHideArrivalTime||2==$p.baseInfo.salesType&&$p.isPresellShowArrivalTime)&&$p.components.arrivalTime.data.checkItemCode.provinceCode&&$p.components.arrivalTime&&$p.components.arrivalTime.getArrivalTimeByFa.call(this,function(){
$p.components.arrivalTime&&$p.components.arrivalTime.checkSpeedUpIcon.call(this)})}),$("ul.serviceBox li").on("mouseleave",function(){var t=$(this).attr("data-code");$(this).hasClass("selected")?(e.addSelectedService(t),$(this).attr("latag","latag_pc_detail_chooseservice_null_"+code+"_"+t).removeClass("item-hover")):e.removeSelectedService(t),$(this).find(".icon").css({"background-image":"url(/series/product/xiaoxin/images/arrow-group.png)","background-position":"-47px 0px","background-repeat":"no-repeat"}),$(this).find(".hoverBox").css({display:"none"}).removeClass("hover-event")}).on("mouseenter",function(){$(this).find(".icon").css({"background-image":"url(/series/product/xiaoxin/images/arrow-group.png)","background-position":"-28px 0px","background-repeat":"no-repeat"}),$(this).find(".hoverBox").css({display:"block"}).addClass("hover-event")}),o.on("click",function(){var t=$(this).parent().siblings(".detail.selected"),i=t.data("code");t.removeClass("selected"),$(this).closest("li").removeClass("selected"),e.removeSelectedService(i);var o=$(this).closest(".hoverBox").children(".detail").eq(0),a=o.find(".content").text(),n=o.find(".recommend-price").text();$(this).parents(".item").find(".middle-1").text(a).attr("title",a),$(this).parents(".item").find(".recommend-price-middle").text(n),$(this).parents(".item").find(".outer-1").text(a).attr("title",a),$(this).parents(".item").find(".recommend-price-outer").text(n),$p.components.enterprisePoints&&$p.components.enterprisePoints.hasEnterprisePoints&&($p.components.enterprisePoints.removeIntegrationItem($p.components.enterprisePoints.itemList,"goodsNumber",i),$p.components.enterprisePoints.getGoodsEnterprisePoints($p.components.enterprisePoints.itemList)),"7ef1d628-5bd3-4651-9530-793678cc02af"!=faid||!$p.isProActivityBefore||$p.baseInfo.isUpgradeGoods||$p.baseInfo.isCombinedGoods||(2!=$p.baseInfo.salesType&&!$p.isHideArrivalTime||2==$p.baseInfo.salesType&&$p.isPresellShowArrivalTime)&&$p.components.arrivalTime.data.checkItemCode.provinceCode&&$p.components.arrivalTime&&$p.components.arrivalTime.getArrivalTimeByFa.call(this,function(){$p.components.arrivalTime&&$p.components.arrivalTime.checkSpeedUpIcon.call(this)})})},formatServiceData:function(e){try{for(var t=[{productCode:code,cateCode:e[0].cateCode,categoryName:e[0].categoryName,list:[e[0]]}],i=!1,o=1;o<e.length;o++){i=!1;for(var a=0;a<t.length;a++)if(e[o].cateCode==t[a].cateCode){t[a].list.push(e[o]),i=!0;break}i||t.push({productCode:code,cateCode:e[o].cateCode,categoryName:e[o].categoryName,list:[e[o]]})}return t}catch(e){return window.PDUtil.warn("service组件=>formatServiceData方法错误 ------------>"),window.PDUtil.warn(e),[]}},getSelectedService:function(){for(var e=[],t=0;t<this.data.selectedArray.length;t++)e.push(this.data.selectedArray[t].code);return e},addSelectedService:function(e){var t=window.PDUtil.findFirst(this.data.selectedArray,function(t){return t.code==e});t||this.data.selectedArray.push(window.PDUtil.findFirst(this.data.all,function(t){return t.code==e}))},removeSelectedService:function(e){this.data.selectedArray=window.PDUtil.dropSome(this.data.selectedArray,function(t){return t.code==e})},checkPresellInfo:function(e){var t=this;2==$p.baseInfo.salesType&&"undefined"!=typeof $p.presellObj&&"{}"!=JSON.stringify($p.presellObj)?(t.data.checkPresell=!0,e&&e()):e&&e()}},window.components||(window.components={}),window.components.Service=e}(),function(){var e={},t={},i=!1;"undefined"!=typeof global&&global&&"object"==typeof module&&module.exports?(i=!0,e=require("../../../../base/pdbase").PDUtil,t=require("jquery")):(e=window.PDUtil,t=window.$);var o=function(e,t){function i(){try{var t=this;this.classPrefix="jiathis",this.data={buttonList:{weibo:{id:"weibo",className:t.classPrefix+"_button_tsina",title:"分享到微博",icon:"share-icon-weibo"},qzone:{id:"qzone",className:t.classPrefix+"_button_qzone",title:"分享到QQ空间",icon:"share-icon-qzone"},renren:{id:"renren",className:t.classPrefix+"_button_renren",title:"分享到人人网",icon:"share-icon-renren"},weixin:{id:"weixin",className:t.classPrefix+"_button_weixin",title:"分享到微信",icon:"share-icon-weixin"}}},this.webMapping={weibo:"weibo",qzone:"qzone",renren:"renren",weixin:"weixin"},this.classPrefix="jiathis",this.$container=null,this.before_click=null,this.couponId="96f9c1b44910c5f6",this.shareCode="",this.shareInfo=null,this.clickTag=!1}catch(t){e.warn("私人定制组件=> init方法错误--------->"),e.warn(t)}}return i.prototype={constructor:i,getButtonByKey:function(e){var t=this,i=t.data.buttonList;for(var o in i)if(o==e)return i[o];return i.qzone},getButtonByClassName:function(e){var t=this,i=t.data.buttonList;for(var o in i)if(i[o].className==e)return i[o];return i.qzone},init:function(){window.jiathis_config=null,t("body").append('<a href="" target="_blank" style="display: none;"><span id="pd_share_entry_btn">分享</span></a>'),this.renderDom(),this.renderRightShare(),this.bindEvent(),this.__initShare()},__initShare:function(){t("#div_share").on("mouseover",function(){t(".share_box").show()}).on("mouseleave",function(){t(".share_box").hide()}),this.before_click=function(){if(!window.passport.isLogin())return window.$p.loginToPage(),t(".share_box").hide(),!1}},bindEvent:function(){var i=this;i.$container.on("click",".share_box .jiathis_style > a",function(){if(!window.passport)return e.warn("分享时，登录模块没有正确加载"),!1;var o=t(this);i.before_click&&"function"==typeof i.before_click&&i.before_click.call(o,i);var a=i.data.buttonList[o.attr("data-key")];a&&i.share(a.id)}),i.$container.on("click","#a_share",function(){try{sensors2022_05_16.track("ShareClick",{page_name:document.title,share_detail:$p.baseInfo.name,share_id:window.code,share_type:"商品"})}catch(e){console.log(e)}if(!i.clickTag){if(i.clickTag=!0,!window.passport)return e.warn("分享时，登录模块没有正确加载"),!1;var o=t(this);isC2C&&!window.$p.baseInfo.isIntegral||t("#a_share_info").hide(),i.before_click&&"function"==typeof i.before_click&&i.before_click.call(o,i),i.shareModle(!1)}}),t("#share_wechat_close").on("click",function(){return t("#share_dialog_box").hide(),!1});try{1==shopId&&(i.shareCode=PDUtil.queryString("sharecode"),i.shareCode&&t.ajax({url:PDUtil.getItemDomain()+"/api/c2c/sharedby.do",type:"GET",data:{sharecode:i.shareCode,sourceurl:i.getShareCodeUrl(),promotionType:"0",promotionName:"为你推荐款好商品，一起下单还有专属优惠券速来看看呀！"},dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_c2c_sharedby",timeout:5e3}),t("#fixed_share_btn").click(function(){var e=t(this);i.before_click&&"function"==typeof i.before_click&&i.before_click.call(e,i),i.shareModle(!0)}))}catch(e){}},renderDom:function(){var e=this;if(e.$container){var i=e.$container.find(".jiathis_style a");i.each(function(){var i=t(this),o=e.getButtonByClassName(i.attr("class")),a=o&&o.icon;i.attr("data-key",o.id).append('<span class="share-icon '+(a||"")+'"></span>')})}},share:function(i){var o=this,a=window.jiathis_config;if(!a)return e.debug("全局config文件没有读取到"),!1;var n="";switch(i){case o.webMapping.weibo:n="http://service.weibo.com/share/share.php?title="+a.title+"&url="+a.url+"&source=bookmark&pic="+a.pic;break;case o.webMapping.qzone:n="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+a.url+"&title="+a.title+"&summary="+a.summary+"&pics="+a.pic;break;case o.webMapping.renren:n="http://widget.renren.com/dialog/share?resourceUrl="+a.url+"&srcUrl="+a.url+"&title="+a.title+"&pic="+a.pic+"&description="+a.summary;break;case o.webMapping.weixin:t("#share_wechat_image").empty();var n=decodeURIComponent(a.url),s=navigator.appName,r=navigator.appVersion,c=r.split(";"),l=(c[1]||c[0]).replace(/[ ]/g,"");return"Microsoft Internet Explorer"==s&&"MSIE6.0"==l?t("#share_wechat_image").qrcode({render:"table",width:220,height:220,text:n}):"Microsoft Internet Explorer"==s&&"MSIE7.0"==l?t("#share_wechat_image").qrcode({render:"table",width:220,height:220,text:n}):"Microsoft Internet Explorer"==s&&"MSIE8.0"==l?t("#share_wechat_image").qrcode({render:"table",width:220,height:220,text:n}):t("#share_wechat_image").qrcode({width:220,height:220,text:n}),t("#share_dialog_box").show(),!1;default:n="error"}return"error"==n?(window.PDUtil.debug("url匹配错误"),alert("分享失败，分享参数错误！"),!1):(t("#pd_share_entry_btn").parent().attr("href",n),void t("#pd_share_entry_btn").trigger("click"))},getmyShare:function(e){var i,o,a=this,n="";n=window.$p.baseInfo.pcPromotion?t("#pc_promotion").text():t("#div_product_dec").text(),1!==isC2C||window.$p.baseInfo.isIntegral?(a.clickTag=!1,i="我的小伙伴购买联想电脑下单，快来看看吧！",o=window.$p.baseInfo.isIntegral?location.protocol+"//"+location.host+location.pathname+location.search:location.protocol+"//"+location.host+location.pathname,window.jiathis_config={url:encodeURIComponent(o),title:window.$p.getShareTitle(),summary:n,pic:t("#winpic").attr("src")},a.shareInfo={url:o,title:i,summary:n,pic:t("#winpic").attr("src")},e&&e()):(i="为你推荐款好商品，一起下单还有专属优惠券速来看看呀！",o=location.protocol+"//"+location.host+location.pathname+"?sharecode="+passport.cookie.lenovoId+"&promotionType=0",a.c2cGeneralize().then(function(s){s&&200==s.status?(a.clickTag=!1,window.jiathis_config={url:encodeURIComponent(s.data),title:window.$p.getShareTitle(),summary:n,pic:t("#winpic").attr("src")},a.shareInfo={url:s.data,title:i,summary:n,pic:t("#winpic").attr("src")},e&&e()):(window.jiathis_config={url:encodeURIComponent(o),title:window.$p.getShareTitle(),summary:n,pic:t("#winpic").attr("src")},a.shareInfo={url:o,title:i,summary:n,pic:t("#winpic").attr("src")},e&&e())},function(){window.jiathis_config={url:encodeURIComponent(o),title:window.$p.getShareTitle(),summary:n,pic:t("#winpic").attr("src")},a.shareInfo={url:o,title:i,summary:n,pic:t("#winpic").attr("src")},e&&e()}))},renderRightShare:function(){},getMd5Code:function(){var e=")(*&^%$#@!MNBVCX76543",i=this.couponId,o=passport.cookie.lenovoId,a=passport.cookie.loginName,n=o+a+i+e;return t.md5(n)},getShareCodeUrl:function(){var e="",t=window.location.href;return e=this.shareCode?t.substring(0,t.indexOf("?")):t},shareModle:function(e){var i=this;try{if(!passport.isLogin())return void window.$p.loginToPage();var o=passport.cookie.lenovoId,a=$p.components.share;if(e)try{t.ajax({url:__detailConfig.getApiPath("gwc")+"coupons/bindCouponsForOnce.jhtm",type:"GET",data:{shopId:"1",lenovoId:o,memberCode:passport.cookie.loginName,couponId:a.couponId,sign:a.getMd5Code()},dataType:"jsonp",jsonp:"callbackparam",jsonpCallback:"jQueryJSONP_products_bindCouponsForOnce",timeout:5e3})}catch(e){}var n={url:window.location.href,title:"联想商城",summary:"联想商城",pic:"//shop.lenovo.com.cn/images/tempimage.gif"};$p.components.share.getmyShare(function(){var e=t.extend(n,i.shareInfo);t("#urlInfo1").val(e.title),t("#urlInfo2").val(e.url),t("#urlInfo3").val(e.summary),t(".modelUrlCont_imgList").html('<li class="modelUrlCont_img_active"><img src="'+e.pic+'"><span class="gou_active"></span></li>'),t(".modelUrlModel").addClass("modelShow"),t(".modelUrlCont").addClass("modelShow"),gettextLength()})}catch(e){}},c2cGeneralize:function(){var e=t.Deferred();return t.ajax({url:PDUtil.getItemDomain()+"/spread/siteSpread/c2cGeneralize",type:"GET",data:{gCode:window.code.toString(),channel:$p.terminal,domain:location.host,targetUrl:location.protocol+"//"+location.host+location.pathname,targetParams:'{"sharecode":'+passport.cookie.lenovoId.toString()+', "promotionType":"0"}'},dataType:"jsonp",jsonp:"callback"}).then(function(t){e.resolve(t)},function(t,i,o){console.log(t,i,o),e.reject()}),e.promise()}},i}(e,t);i?module.exports=o:(window.components||(window.components={}),window.components.Share=o)}(),function(){function e(e,t){var i=null;return function(){var o=this,a=arguments;clearTimeout(i),i=setTimeout(function(){e.apply(o,a)},t)}}function t(e,t,i){if(!(e.length<=0)){var o=t&&t.activeTabCode,a=t&&t.id,n=t&&t.selectedID,s=!1;o&&e.forEach(function(e){e.code==o&&(s=!0)}),this.datas=e||[],this.id=a||"alayer",this.activeTabCode=s?+o:e[0]&&e[0].code||"",this.selectedID=n||"",this.selectedThemeName="",this.defaultPicUrl=function(){var e=PDUtil.queryString("default_a_pic")?Base64.decode(PDUtil.queryString("default_a_pic")):"";if(e)return e;var t=window.$p.components.playpic.data.initPicList&&window.$p.components.playpic.data.initPicList[0].src||"";return t?window.$p.components.playpic.getBigPicSrc(t)||"":""}(),this.$box_content=$("#personalType_con_div"),this.$tmpl=$("#tmpl_srdz_image"),this.$showPriceTmpl=$("#tmpl_srdz_image_price"),this.cacheTabPics={},this.cachePicUrls={},this.cachePageDatas={},this.isInit=!1,this.render(),this.getActiveTabPics(this.activeTabCode,function(){setTimeout(function(){i&&i()},0)}),this.bindEvent()}}var i={},o={},a=!1;"undefined"!=typeof global&&global&&"object"==typeof module&&module.exports?(a=!0,i=require("../../../../base/pdbase").PDUtil,o=require("jquery")):(i=window.PDUtil,o=window.$),t.prototype={constructor:t,render:function(e,t){try{var i={},o=this,a=0;if(this.datas.forEach(function(e,t){e.code==o.activeTabCode&&(i=e,a=t)}),this.$tmpl&&1==this.$tmpl.length){var n=this.$tmpl.tmpl({datas:this.datas,dataID:this.id,side:"A面",activeTabCode:this.activeTabCode,picData:this.cacheTabPics[this.activeTabCode]||[],selectTab:i,selectedID:this.selectedID,selectedThemeName:this.selectedThemeName,cachePicUrls:this.cachePicUrls,defaultPicUrl:this.defaultPicUrl,cachePageDatas:this.cachePageDatas});this.isInit?e?(t?$("#"+this.id).find(".srdz-a-pic-box-wrapper").html(n.find(".srdz-a-pic-box-wrapper").html()):$("#"+this.id).find(".srdz-a-pic-box").html(n.find(".srdz-a-pic-box").html()),$("#"+this.id).find(".srdz-a-left").html(n.find(".srdz-a-left").html()),$("#"+this.id).find("#a-tabs-scroller").find(".tab-select-text").removeClass("active"),$("#"+this.id).find("#a-tabs-scroller").find(".tab-select-text").eq(a).addClass("active")):$("#"+this.id).html(n.html()):(n.appendTo(this.$box_content),this.isInit=!0),this.bindScrollEvent()}}catch(e){console.log(e)}},renderPartOnLoading:function(){try{var e={},t=this,i=0;if(this.datas.forEach(function(o,a){o.code==t.activeTabCode&&(e=o,i=a)}),this.$tmpl&&1==this.$tmpl.length){var o=this.$tmpl.tmpl({datas:this.datas,dataID:this.id,side:"A面",activeTabCode:this.activeTabCode,picData:this.cacheTabPics[this.activeTabCode]||[],selectTab:e,selectedID:this.selectedID,selectedThemeName:this.selectedThemeName,cachePicUrls:this.cachePicUrls,defaultPicUrl:this.defaultPicUrl,cachePageDatas:this.cachePageDatas});$("#"+this.id).find(".srdz-a-pic-box").html(o.find(".srdz-a-pic-box").html()),$("#"+this.id).find(".srzd-pic-desc").html(o.find(".srzd-pic-desc").html())}}catch(e){console.log(e)}},renderBottomPrice:function(){try{var e={},t=this,i=0;if(this.datas.forEach(function(o,a){o.code==t.activeTabCode&&(e=o,i=a)}),this.$showPriceTmpl&&1==this.$showPriceTmpl.length){var o=this.$showPriceTmpl.tmpl({selectTab:e});$("#"+this.id).find(".srdz-a-bottom .price-area").html(o).show()}}catch(e){console.log(e)}},bindEvent:function(){var e=this;this.$box_content.on("click",".tab-select-text",function(){var t=$(this).attr("data-code");e.activeTabCode!==t&&(e.activeTabCode=t,e.render(!0,!0),e.scrollToTab(),e.getActiveTabPics(e.activeTabCode))}),this.$box_content.on("click",".srdz-pic-img",function(){var t=$(this).attr("data-id"),i=$(this).attr("data-name"),o=$(this).attr("data-code"),a=$(this).attr("data-cateName"),n=$(this).attr("src");if(t){e.selectedID!==t?(e.selectedID=t,e.selectedThemeName=i,e.getPalyPic(t,o,n),e.renderBottomPrice()):(e.selectedID="",e.selectedThemeName="",e.render(!0),$("#"+e.id).find(".srdz-a-bottom .price-area").hide());var s={active_type:"【A面喷绘】点击喷绘图片",active_series:a,active_value:i},r=$.extend(s,window.$p.public_obj);sensors2022_05_16.track("GoodsDetailActive",r)}}),this.$box_content.on("click",".series-arrow-btn",function(){var t=$(this).attr("data-id"),i=$(this).attr("data-type"),o=e.cachePageDatas[t];t&&o&&("prev"===i?o.pageIndex>1&&(o.pageIndex=o.pageIndex-1):"next"===i&&o.pageIndex<o.totalPage&&(o.pageIndex=o.pageIndex+1),e.cachePageDatas[t]=o,e.render(!0))})},bindScrollEvent:function(){var e=this;$(".srdz-a-pic-box").on("scroll",function(t){var i=t.target,o=i.scrollHeight,a=i.offsetHeight,n=o-a,s=i.scrollTop;if(!(n<=0)){var r=$(".scroll-bar-wrapper"),c=Math.floor(a*a/o),s=s/n*(a-c);$(".scroll-bar-pointer").attr("style","top:"+s+"px;height:"+c+"px"),r.attr("style","opacity: 1;"),e.hideScrollBar()}})},getActiveTabPics:function(e,t){var i=this;i.cacheTabPics[e]||i.getpicArrData(e).done(function(o){i.cacheTabPics[e]=o.result.data,i.handleSeriesPicPageData(o.result.data,e),i.render(!0,!0),t&&t()})},getpicArrData:function(e){return $.ajax({url:__detailConfig.getApiPath("openUrl")+"/goods/personal/category/pic?code="+e,dataType:"jsonp",jsonp:"jsonpCallback",jsonpCallback:"jQueryJSONP_cache_query",timeout:5e3})},getPalyPic:function(e,t,i){var o=this;return o.cachePicUrls[e]?void o.render(!0):(o.renderPartOnLoading(),void $.ajax({type:"get",url:__detailConfig.getApiPath("openUrl")+"/goods/personal/print?code="+t+"&materialNumber="+$p.baseInfo.materialNumber+"&goodsCodes="+window.code,dataType:"jsonp",jsonp:"jsonpCallback",jsonpCallback:"jQueryJSONP_cache_query",timeout:5e3,success:function(t){0==t.status&&t.result?(data=t.result.data,data&&data.length>0&&(o.cachePicUrls[e]=data,o.render(!0))):(o.cachePicUrls[e]=[i],o.render(!0),$util.warn(t.massage))},error:function(t){o.cachePicUrls[e]=[i],o.render(!0),$util.warn(t)}}))},handleSeriesPicPageData:function(e,t){try{var i=this;e&&e.length>0&&e.forEach(function(e){var o={pageIndex:1,totalPage:Math.ceil((e.picArr&&e.picArr.length||0)/12)||1};i.cachePageDatas[t+"@"+e.cateCode]=o})}catch(e){console.log(e)}},getSelectedPic:function(){if(!this.selectedID)return null;var e=this,t=this.selectedID.split("@"),i=t[0],o=t[1],a=t[2],n=null;if(this.datas.forEach(function(e){e.code==i&&(n=e)}),!this.cacheTabPics[i]||!n)return null;var s=null;return this.cacheTabPics[i].forEach(function(t){t.cateCode==o&&t.picArr.forEach(function(i){i.code==a&&(s={code:i.code,name:i.name,path:i.path,cateCode:t.cateCode,cateName:t.cateName,tabCode:n.code,personalType:n.personalType,price:n.price,priceName:n.priceName,showPrice:n.showPrice,activityPrice:n.activityPrice,id:e.selectedID})})}),s},clearSelected:function(){this.selectedID="",this.selectedThemeName="",this.render()},syncSelected:function(e){if(!e)return void this.clearSelected();var t=e.split("@");if(t.length&&t.length>0){var i=t[0],o=t[1],a=t[2];if(this.cacheTabPics[i]&&this.cacheTabPics[i].length>0){var n=null;this.cacheTabPics[i].forEach(function(e){e.cateCode==o&&e.picArr&&e.picArr.length>0&&e.picArr.forEach(function(e){e.code==a&&(n=e)})}),n&&(this.selectedID=e||"",this.selectedThemeName=n.name||"",this.getPalyPic(e,a,n.path),this.render())}}},scrollToTab:function(){var e=this,t=$("#a-tabs-scroller"),i=t.outerWidth(),o=$("#a-tab-box").outerWidth();if(!(i<=o)){var a=0,n=0,s=i-o,r=0,c=-40,l=!1;this.datas.forEach(function(i,o){i.code==e.activeTabCode?(selectTab=i,r=o,l=!0,0===o&&(c=0)):l||(c+=t.children().eq(o).outerWidth())}),a=c<=n?n:c>=s?s:c,t.attr("style","transform: translateX("+-a+"px);-webkit-transform: translateX("+-a+"px);-ms-transform: translateX("+-a+"px);-0-transform: translateX("+-a+"px)")}},hideScrollBar:e(function(){var e=$(".scroll-bar-wrapper");e.attr("style","opacity: 0;")},1e3)};var n=function(i,o){function a(e){try{this.data={price:0,machinePics:{}},this.$container=o("#container_dingzhi"),this.$psonPic=o("#pson-pic"),this.$box=o("#div_dingzhi"),this.selectedID="",this.postData={},this.$box_content=o("#personalType_con_div"),this.page=1,this.totalPage=1,this.w=0,this.scrollHeight=0,this.personalData=[],this.checkPositions={},this.checkPresell=!1,this.checkAId="",this.checkBId="",this.cInputValidation=!1,this.validCInputText="",this.isCheckingCInput=!1,this.selectedAPicId="",e&&this.init(),this.upload_type="1",this.uploadPicUrl="",this.UserDefinedUploadEntry=!1,this.readOrNot=!1,this.isSelectedUserDefinedUpload=!1,this.isAssigned=!1,this.middleImg_customTransmission=!1,this.middleImgPath="",this.DiImgData={},this.xieyiOpen=""}catch(e){i.warn("私人定制组件=> init方法错误--------->"),i.warn(e)}}var n={picture:{code:1,des:"私人定制喷图"},words:{code:2,des:"私人定制刻字"}};return a.prototype={constructor:a,init:function(){var e=this;$p.baseInfo.isIntegral||96==$p.baseInfo.salesType&&$p.isBusinessDetail||window.$p.baseInfo.isHasPersonal&&e.checkPresellInfo(function(){e.$container.removeClass("hidden"),e.getAllData(function(){var t=PDUtil.queryString("middleImg")||"";if(t&&"customTransmission"==t&&(e.getAllDataUpload(),e.middleImg_customTransmission=!0),window.passport&&window.passport.isLogin()){var i=localStorage.getItem("userUploadClick");if(1==i){if(localStorage.removeItem("userUploadClick"),1==localStorage.getItem("featUserDefinedUpload"))return!1;e.userDefinedUpload_layer(),e.upload_tacen(),localStorage.setItem("featUserDefinedUpload",1)}}})})},bindEvent:function(){var e=this;e.$box.on("click","#pson-pic",function(){if(e.isSelectedUserDefinedUpload)e.upload_tacen(),o(".user_defined_upload").addClass("active"),o(".official_gallery").removeClass("active"),o("#personalType_con_div").hide(),o("#upload_personal-box").show();else{var t=o(this).attr("data-id");if(e.selectedID=t,e.upload_tacen(),o(".user_defined_upload").removeClass("active"),o(".official_gallery").addClass("active"),o("#personalType_con_div").show(),o("#upload_personal-box").hide(),e.ALayerCompnent.syncSelected(e.selectedAPicId),e.selectedAPicId&&e.ALayerCompnent.renderBottomPrice(),e.ALayerCompnent.scrollToTab(),e.setElementLatag(),!e.UserDefinedUploadEntry)return o("#personal-box .uploadType_div").hide(),o("#personal-box .dz-box .srdz-a-right").css("margin-top","0"),!1;var i=PDUtil.getCookie("isFirstEnter");i||(o("#personal-box .user_defined_upload").addClass("firstEnter"),o("#personal-box .newFunction_tips").show(),o(".upload_zzc").show())}}),e.$box.on("click","#pson-txt",function(){layer.open({type:1,skin:"personal-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["1000px","614x"],move:!1,content:o("#c-wrap")});var t=o(this),i=t.attr("data-id");e.selectedID=i;var a=e.validCInputText||e.checkPositions.cPicName||"";e.updateCInput(a)}),o(".personal-des").on("mouseenter",function(){o(".personal-des").append('<div id="personaldes" ><h1>联想定制机购买须知</h1><div class="sd-des-cont"><p><span>1. </span>定制机属特殊商品，不适用于七天无理由退货，下单付款后即进入定制流程，非因产品质量问题无法做退货处理。</p><p><span>2. </span>本订单属于用户定制订单，预计在'+($p.components.arrivalTime&&$p.components.arrivalTime.data.sdDeliverDate?$p.components.arrivalTime.data.sdDeliverDate:"5")+'个工作日内完成发货</p><p><span>3. </span>笔记本电脑屏幕外壳属于非电性能部件，且不在标准保修范围之内，如需更换可能产生相关费用， 并且只能更换为原厂非原定制机型外壳。因此请小心保养您的定制机外壳。</p><p><span>4. </span>定制机外壳装饰，不在标准保修服务范围内。</p></div><div class="arrow-wrap sd-tips"><div class="up-arrow pre-arrow"></div><div class="up-arrow curr-arrow"></div></div></div>'),o("#personaldes").show()}).on("mouseleave",function(){o("#personaldes").remove()}),e.$box_content.on("click",".a-category p.item",function(t){var i=o(this),a=i.data("index"),n=i.data("code");e.page=1,e.w=0,i.hasClass("checked")?e.totalPage=1:(i.siblings(".checked").removeClass("checked"),i.addClass("checked"),e.getpicArrData(n).done(function(t){e.personalData[a].style=t.result.data,e.renderDiolog("A面",e.personalData,e.selectedID,a,"qie"),o(".scroll-container .list").css("top","0"),e.resolveDzPrice(),e.setButtonShowHide()})),t.stopPropagation()}),o("#c-wrap").on("click",".dz_OK",function(){e.eventHandlerForOKButton(),e.uploadPresellCdt()}),o("#personal-box").on("click",".dz_OK",function(){e.eventHandlerForAOKButton(!0),e.uploadPresellCdt()}),o("#c-wrap").on("click",".dz_cancel",function(){if(o("#"+(e.selectedID||"a")+" .a-content ul.list-wrap li").removeClass("checked"),o("#c-wrap .c-write textarea").val(""),e.removePostData(e.selectedID),e.clearCInputInfo(),layer.closeAll(),"7ef1d628-5bd3-4651-9530-793678cc02af"!=faid||!$p.isProActivityBefore||$p.baseInfo.isUpgradeGoods||$p.baseInfo.isCombinedGoods)(2!=$p.baseInfo.salesType&&!$p.isHideArrivalTime||2==$p.baseInfo.salesType&&$p.isPresellShowArrivalTime)&&$p.components.arrivalTime.data.checkItemCode.provinceCode&&$p.components.arrivalTime&&$p.components.arrivalTime.getArrivalTimeByFa.call(this);else{var t=$p.dealAddressJson();$p.loadFrontStock(t,!1,null,null,function(){(2!=$p.baseInfo.salesType&&!$p.isHideArrivalTime||2==$p.baseInfo.salesType&&$p.isPresellShowArrivalTime)&&$p.components.arrivalTime.data.checkItemCode.provinceCode&&$p.components.arrivalTime&&$p.components.arrivalTime.getArrivalTimeByFa.call(this,function(){$p.components.arrivalTime&&$p.components.arrivalTime.checkSpeedUpIcon.call(this)})})}e.uploadPresellCdt()}),o("#personal-box").on("click",".dz_cancel",function(){if(o("#"+(e.selectedID||"a")+" .a-content ul.list-wrap li").removeClass("checked"),o("#c-wrap .c-write textarea").val(""),e.removePostData(e.selectedID),e.ALayerCompnent.clearSelected(),e.setElementLatag(),e.selectedAPicId="",layer.closeAll(),"7ef1d628-5bd3-4651-9530-793678cc02af"!=faid||!$p.isProActivityBefore||$p.baseInfo.isUpgradeGoods||$p.baseInfo.isCombinedGoods)(2!=$p.baseInfo.salesType&&!$p.isHideArrivalTime||2==$p.baseInfo.salesType&&$p.isPresellShowArrivalTime)&&$p.components.arrivalTime.data.checkItemCode.provinceCode&&$p.components.arrivalTime&&$p.components.arrivalTime.getArrivalTimeByFa.call(this);else{var t=$p.dealAddressJson();$p.loadFrontStock(t,!1,null,null,function(){(2!=$p.baseInfo.salesType&&!$p.isHideArrivalTime||2==$p.baseInfo.salesType&&$p.isPresellShowArrivalTime)&&$p.components.arrivalTime.data.checkItemCode.provinceCode&&$p.components.arrivalTime&&$p.components.arrivalTime.getArrivalTimeByFa.call(this,function(){$p.components.arrivalTime&&$p.components.arrivalTime.checkSpeedUpIcon.call(this)})})}e.uploadPresellCdt()}),o("#personal-box").on("mouseenter","#srdz-a-desc",function(){e.UserDefinedUploadEntry?o("#personalType_con_div .a-c-desc-pop").css({top:"-80px",left:"77px"}).show():o("#personalType_con_div .a-c-desc-pop").css({top:"-20px",left:"77px"}).show()}).on("mouseleave","#srdz-a-desc",function(){o("#personalType_con_div .a-c-desc-pop").hide()}),o("#personal-box").on("mouseenter","#upload_srdz-a-desc",function(){o("#upload_personal-box .a-c-desc-pop").show()}).on("mouseleave","#upload_srdz-a-desc",function(){o("#upload_personal-box .a-c-desc-pop").hide()}),o("#c-wrap").on("mouseenter","#srdz-a-desc",function(){o("#c-wrap .a-c-desc-pop").css({top:"-60px",left:"77px"}).show()}).on("mouseleave","#srdz-a-desc",function(){o("#c-wrap .a-c-desc-pop").hide()}),o("#c-wrap, #personal-box, #personal-box").on("click","#srdz-c-close, #srdz-a-close, #upload_srdz-a-close",function(){layer.closeAll()}),o("#personal-box").on("click",".user_defined_upload",function(){return!o(this).hasClass("firstEnter")&&void e.userDefinedUpload_layer()}),o("#personal-box").on("click",".official_gallery",function(){var t=o("#pson-pic").attr("data-id");e.selectedID=t,o("#personalType_con_div").show(),o("#upload_personal-box").hide(),e.ALayerCompnent.syncSelected(e.selectedAPicId),e.ALayerCompnent.scrollToTab(),e.setElementLatag()}),o("#personal-box").on("click",".newFunction_tips_yes",function(){o("#personal-box .user_defined_upload").removeClass("firstEnter"),o("#personal-box .newFunction_tips").hide(),o(".upload_zzc").hide(),PDUtil.addCookie("isFirstEnter",!0)}),o("#personal-box").on("click",".agreement_div .no_select",function(){var t=o(this);return o(".no_select").hasClass("no_select_tips")&&o(".no_select").removeClass("no_select_tips"),e.readOrNot?(t.toggleClass("selected"),!1):void e.viewAgreement(1)}),o("#personal-box").on("click",".agreement_div .agreementDescription",function(){e.viewAgreement(2)}),o(".dz_tips_close").on("click",function(){layer.closeAll()}),o("#personal-box").on("click",".reUpload",function(){window.pic.selectPicture()}),o("#personal-layer-wrap").unbind("click").on("click",".upload_dz_OK",function(){if(!window.pic.hasSelectPic)return layer.msg("请上传图片"),!1;if(!o(".no_select").hasClass("selected"))return o(".no_select").addClass("no_select_tips"),layer.msg("请阅读并勾选用户协议"),!1;if(o(this).hasClass("hasBeenClicked"))return!1;var t=window.pic.getUploadPicture();if(3==t.status)return layer.closeAll(),!1;if(1!==t.status)return layer.msg("您上传的图片存在违规风险，请重新上传"),o("#personal-layer-wrap .upload_dz_OK").removeClass("hasBeenClicked"),!1;if(o(this).addClass("hasBeenClicked"),window.pic.isLoading)return!1;window.pic.isLoading=!0,layer.msg("上传中");var i=t.url;window.pic.uploadPictureByBase64(i,"cut",function(t){if(1==t.status){window.pic.isLoading=!1;var i=$p.components.srdz.getdz();i&&(i=JSON.parse(decodeURIComponent($p.components.srdz.getdz())),(i[0]&&"A"==i[0].ptside||i[1]&&"A"==i[1].ptside)&&(o("#"+(e.selectedID||"a")+" .a-content ul.list-wrap li").removeClass("checked"),o("#c-wrap .c-write textarea").val(""),e.removePostData(e.selectedID),e.ALayerCompnent.clearSelected(),e.setElementLatag(),e.selectedAPicId=""));var a=o("#pson-pic");a.find("span.personal-pic-txt").attr("title","自定义").text("自定义").parent().find("span.personal-pic-title").show(),a.addClass("checked"),o("#jrgwc").is(":visible")&&o("#jrgwc").hide().attr("userDefinedUpload",1),layer.closeAll(),o("#personal-layer-wrap .upload_dz_OK").removeClass("hasBeenClicked");var n=window.pic.getFusionPicture();if(window.$p.components.playpic.renderPicture([{src:n.url}]),e.upload_type=2,"7ef1d628-5bd3-4651-9530-793678cc02af"!=faid||!$p.isProActivityBefore||$p.baseInfo.isUpgradeGoods||$p.baseInfo.isCombinedGoods)(2!=$p.baseInfo.salesType&&!$p.isHideArrivalTime||2==$p.baseInfo.salesType&&$p.isPresellShowArrivalTime)&&$p.components.arrivalTime.data.checkItemCode.provinceCode&&$p.components.arrivalTime&&$p.components.arrivalTime.getArrivalTimeByFa.call(this);else{var s=$p.dealAddressJson();$p.loadFrontStock(s,!1,null,null,function(){(2!=$p.baseInfo.salesType&&!$p.isHideArrivalTime||2==$p.baseInfo.salesType&&$p.isPresellShowArrivalTime)&&$p.components.arrivalTime.data.checkItemCode.provinceCode&&$p.components.arrivalTime&&$p.components.arrivalTime.getArrivalTimeByFa.call(this,function(){$p.components.arrivalTime&&$p.components.arrivalTime.checkSpeedUpIcon.call(this)})})}e.uploadPresellCdt(),e.isSelectedUserDefinedUpload=!0,layer.open({type:1,skin:"personal-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["435px","180px"],move:!1,scrollbar:!0,content:o(".dz_tips_div")})}else 4==t.status?(layer.msg("您上传的图片存在违规风险，请重新上传"),o("#personal-layer-wrap .upload_dz_OK").removeClass("hasBeenClicked")):(layer.msg("网络异常，请刷新重试"),o("#personal-layer-wrap .upload_dz_OK").removeClass("hasBeenClicked"))})}),o("#personal-layer-wrap").on("click",".upload_dz_cancel",function(){var t=o("#pson-pic");if(2==e.upload_type&&(t.find("span.personal-pic-txt").attr("title",t.find("span.personal-pic-title").attr("data-text")).text(t.find("span.personal-pic-title").attr("data-text")).end().find("span.personal-pic-title").hide(),t.removeClass("checked"),window.$p.components.playpic.renderPicture([]),e.checkPositions.categoryCode="",e.checkPositions.mainPicCode=""),e.upload_type=1,layer.closeAll(),"7ef1d628-5bd3-4651-9530-793678cc02af"!=faid||!$p.isProActivityBefore||$p.baseInfo.isUpgradeGoods||$p.baseInfo.isCombinedGoods)(2!=$p.baseInfo.salesType&&!$p.isHideArrivalTime||2==$p.baseInfo.salesType&&$p.isPresellShowArrivalTime)&&$p.components.arrivalTime.data.checkItemCode.provinceCode&&$p.components.arrivalTime&&$p.components.arrivalTime.getArrivalTimeByFa.call(this);else{var i=$p.dealAddressJson();$p.loadFrontStock(i,!1,null,null,function(){(2!=$p.baseInfo.salesType&&!$p.isHideArrivalTime||2==$p.baseInfo.salesType&&$p.isPresellShowArrivalTime)&&$p.components.arrivalTime.data.checkItemCode.provinceCode&&$p.components.arrivalTime&&$p.components.arrivalTime.getArrivalTimeByFa.call(this,function(){$p.components.arrivalTime&&$p.components.arrivalTime.checkSpeedUpIcon.call(this)})})}if(e.uploadPresellCdt(),e.initializationUserUpload(),o("#jrgwc").attr("userDefinedUpload")&&1==o("#jrgwc").attr("userDefinedUpload")){var a=o(".installment-dropdown-wrapper.checked");""==a.find(".installment-info span").text()&&o("#jrgwc").show().removeAttr("userDefinedUpload")}}),o(".productTerms").on("click",".productTerms_close",function(){
layer.close(xieyiOpen)}),o(".productTerms").on("click",".haveRead.clickabled",function(){layer.close(xieyiOpen),o("#personal-box .agreement_div .no_select").addClass("selected"),e.readOrNot=!0}),e.bindInputEvent(),e.bindImageEvents()},viewAgreement:function(e){var t=this;if(xieyiOpen=layer.open({type:1,skin:"xieyi-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["1000px","614px"],move:!1,scrollbar:!0,content:o(".productTerms"),end:function(){i&&clearInterval(i)}}),t.isAssigned||(o("#productTerms_content").attr("src",__detailConfig.getApiPath("windowAdvert")+"/lenovo_detail_front/custom_agreement_pc.html"),t.isAssigned=!0),2==e&&t.readOrNot)return o(".haveRead").text("我已阅读并同意").addClass("clickabled"),!1;var i,a=3;o(".haveRead").text("我已阅读并同意 3s").removeClass("clickabled"),i=setInterval(function(){var e=a;if(1==e)return clearInterval(i),o(".haveRead").text("我已阅读并同意").addClass("clickabled"),!1;var t=e-1;o(".haveRead").text("我已阅读并同意 "+t+"s"),a=t},1e3)},utf16toEntities:function(e){var t=/[\ud800-\udbff][\udc00-\udfff]/g;return e=e.replace(t,function(e){var t,i,o;return 2===e.length?(t=e.charCodeAt(0),i=e.charCodeAt(1),o=1024*(t-55296)+65536+i-56320,"&#"+o+";"):e})},userDefinedUpload_layer:function(){if(window.passport&&window.passport.isLogin())o(".user_defined_upload").addClass("active"),o(".official_gallery").removeClass("active"),o("#personalType_con_div").hide(),o("#upload_personal-box").show();else try{localStorage.setItem("featUserDefinedUpload",0),localStorage.setItem("userUploadClick",1),window.$p.loginToPage()}catch(e){i.warn("自定义上传失败。。"),i.warn(e)}},setPriceListWidth:function(){var e=o(".a-category"),t=e.find("p.item"),i=0;t.each(function(e,t){i+=o(t).width()+29}),e.css("width",i+"px")},eventHandlerForOKButton:function(){var e=this,t=o("#"+e.selectedID),a=t.attr("id"),s=t.attr("data-side"),r=t.attr("data-personaltype");if("2"===r)try{var c=e.validCInputText;if(""==c.trim())return layer.msg("请输入刻字内容"),!1;c=PDUtil.emojiConvert(c,".emoji_div .emoji","emoji","_emoji_","&#").dto.replace(/&#x[a-z0-9]{4}\;/gi,"");var l=new RegExp(/^([^\u4e00-\u9fa5A-Za-z0-9,.?!，。？！\/、;；:：''""‘’“”\「\」\『\』()（）\[\]\〔\〕\{\}\【\】\<\>\《\》\〈\〉\___\~\-\——\/\—\_\·\……\s])*$/),d=new RegExp(/(?:[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC3\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDD-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF6](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC2\uDED0-\uDED9\uDEE0-\uDEE7]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?))/g);if(c&&""!==c){var p=!1;if(d.test(c))return layer.msg("您输入内容含特殊字符，请重新输入"),!1;for(var u=0;u<c.length;u++)if(l.test(c[u])){p=!0;break}if(p)return void layer.msg("您输入内容含特殊字符，请重新输入")}}catch(e){}var m=t.find(".a-category p.checked"),h=t.find("#c-price");if("1"===r&&(!m||1!=m.length))return m.attr("data-personaltype")==n.picture.code?layer.msg("请选择喷绘图片类型！"):layer.msg("请选择价格！"),!1;var f=m.attr("data-priceid")||m.attr("data-showprice"),v=h.attr("data-priceid")||h.attr("data-showprice"),$=m.attr("data-price"),y=h.attr("data-price");if(!$&&!y)return layer.msg("私人定制失败，请稍后再试！"),i.warn("price获取失败"),!1;var g=m.attr("data-activityprice"),D=h.attr("data-activityprice"),b=$p.baseInfo.materialNumber,w=$p.baseInfo.materialNumber;if(!b&&!w)return layer.msg("私人定制失败，请稍后再试！"),i.warn("materialNumber获取失败"),!1;var _=m.attr("data-code"),C=h.attr("data-code");if(!_&&!C)return layer.msg("私人定制失败，请稍后再试！"),i.warn("ptcode获取失败"),!1;if(r==n.picture.code){var x="",I=t.find(".a-content .left ul.list li.active");I.length>0&&(x=I.attr("data-catecode"));var k=t.find(".a-content .sdtp_pics ul.list-wrap li.checked");if(1!=k.length)return layer.msg("请选择喷绘图片！"),!1;var F=k.attr("data-code")||"";if(!F)return layer.msg("私人定制失败，请稍后再试！"),i.warn("imageCode获取失败"),!1;var P=k.attr("data-url");if(!P)return layer.msg("私人定制失败，请稍后再试！"),i.warn("imageUrl获取失败"),!1;var T=k.attr("data-name");if(!T)return layer.msg("私人定制失败，请稍后再试！"),i.warn("imageName获取失败"),!1;var B={price:$||y,priceID:f||v,ptmode:n.picture.code,ptside:s.replace("面",""),pttype:1,ptpicCode:F,pturl:P,picName:T,materialNumber:b||w,ptcode:_||C};e.checkPositions.categoryCode=x,e.checkPositions.mainPicCode=F,e.addPostData(a,B)}else{if("2"!=r)return layer.msg("私人定制参数错误，请重试"),!1;var S=e.validCInputText;if(e.isCheckingCInput)return layer.msg("文案校验中，请稍后。。。"),!1;if(!e.cInputValidation)return layer.msg("请重新提交您的刻字内容，您可以尝试输入名字或祝福等，为设备添加个性风格"),!1;if(""==S)return layer.msg("请输入刻字内容"),!1;var E=!1;g||D?E=!0:"0"!=g&&"0"!=D||(E=!0);var B={price:E?g||D:$||y,priceID:f||v,ptmode:n.words.code,ptside:s.replace("面",""),pttype:1,ptword:PDUtil.emojiConvert(S,".emoji_div .emoji","emoji","_emoji_","&#").dto,ptcode:_||C};e.checkPositions.cPicName=S,e.addPostData(a,B),o("#pson-txt .personal-pic-txt").text("已选择")}if(layer.closeAll(),o(".personal-pic-txt").ellipsis(),"7ef1d628-5bd3-4651-9530-793678cc02af"!=faid||!$p.isProActivityBefore||$p.baseInfo.isUpgradeGoods||$p.baseInfo.isCombinedGoods)(2!=$p.baseInfo.salesType&&!$p.isHideArrivalTime||2==$p.baseInfo.salesType&&$p.isPresellShowArrivalTime)&&$p.components.arrivalTime.data.checkItemCode.provinceCode&&$p.components.arrivalTime&&$p.components.arrivalTime.getArrivalTimeByFa.call(this);else{var A=$p.dealAddressJson();$p.loadFrontStock(A,!0,null,null,function(){(2!=$p.baseInfo.salesType&&!$p.isHideArrivalTime||2==$p.baseInfo.salesType&&$p.isPresellShowArrivalTime)&&$p.components.arrivalTime.data.checkItemCode.provinceCode&&$p.components.arrivalTime&&$p.components.arrivalTime.getArrivalTimeByFa.call(this,function(){$p.components.arrivalTime&&$p.components.arrivalTime.checkSpeedUpIcon.call(this)})})}},eventHandlerForAOKButton:function(e){var t=this;t.upload_type=1;var i=t.selectedID,a=t.ALayerCompnent.getSelectedPic();if(!a&&e&&layer.msg("请选择喷绘图片类型！"),e){var n={active_type:"【A面喷绘】点击确定",active_series:a.cateName,active_value:a.name},s=o.extend(n,window.$p.public_obj);sensors2022_05_16.track("GoodsDetailActive",s)}var r={price:"number"==typeof a.activityPrice?a.activityPrice:a.price,priceID:a.priceName,ptmode:1,ptside:"A",pttype:1,ptpicCode:a.code,pturl:a.path,picName:a.name,materialNumber:$p.baseInfo.materialNumber,ptcode:a.tabCode};if(t.checkPositions.categoryCode=a.cateCode,t.checkPositions.mainPicCode=a.code,t.selectedAPicId=a.id,t.addPostData(i,r),layer.closeAll(),!o("#jrgwc").is(":visible")&&1==o("#jrgwc").attr("userDefinedUpload")){var c=o(".installment-dropdown-wrapper.checked");if(""!==c.find(".installment-info span").text()&&c.find(".installment-info span").text().indexOf("选择分期")===-1)return!1;o("#jrgwc").show()}if(o(".personal-pic-txt").ellipsis(),"7ef1d628-5bd3-4651-9530-793678cc02af"!=faid||!$p.isProActivityBefore||$p.baseInfo.isUpgradeGoods||$p.baseInfo.isCombinedGoods)(2!=$p.baseInfo.salesType&&!$p.isHideArrivalTime||2==$p.baseInfo.salesType&&$p.isPresellShowArrivalTime)&&$p.components.arrivalTime.data.checkItemCode.provinceCode&&$p.components.arrivalTime&&$p.components.arrivalTime.getArrivalTimeByFa.call(this);else{var l=$p.dealAddressJson();$p.loadFrontStock(l,!0,null,null,function(){(2!=$p.baseInfo.salesType&&!$p.isHideArrivalTime||2==$p.baseInfo.salesType&&$p.isPresellShowArrivalTime)&&$p.components.arrivalTime.data.checkItemCode.provinceCode&&$p.components.arrivalTime&&$p.components.arrivalTime.getArrivalTimeByFa.call(this,function(){$p.components.arrivalTime&&$p.components.arrivalTime.checkSpeedUpIcon.call(this)})})}},bindImageEvents:function(){var e=this;e.$box_content.on("click",".list .table-style",function(t){var i=o(this);i.hasClass("active")||(i.siblings(".active").removeClass("active"),i.addClass("active"),e.showImageListWithCateCode(i.parents("div.a-content"),i.attr("data-tabindex"))),t.stopPropagation()}),e.$box_content.on("click",".list-wrap li",function(e){var t=o(this);t.hasClass("checked")?t.removeClass("checked"):(t.siblings("li").removeClass("checked"),t.parents(".scroll-container").siblings().find("li").removeClass("checked"),t.addClass("checked")),e.stopPropagation()})},renderData:function(e,t){var o=this;try{var a=t;if(a&&a instanceof Array&&a.length>0){var s=new Date-0;a[0]&&a[0].personalType==n.picture.code?o.renderImage(e,"srdz_image_"+s,"number"==typeof a[0].activityPrice?a[0].activityPrice:a[0].price):o.renderText(e,"srdz_text_"+s,"number"==typeof a[0].activityPrice?a[0].activityPrice:a[0].price)}}catch(e){i.warn("私人定制组件=> renderData方法错误----------------> "),i.warn(e)}},renderImage:function(e,t,i){this.checkAId=t,this.$box.append('<div class="business-detail personal-pic" id="pson-pic" data-id="'+t+'" latag="latag_pc_detail_top_choosepersonal_A_'+window.code+'"><span class="personal-pic-title" data-text=" '+e+"喷绘"+(i||0)+'元起" style="display: none;">A面喷绘:</span><span class="personal-pic-txt">'+e+"喷绘"+(i||0)+"元起</span></div>")},renderText:function(e,t,i){this.checkBId=t,this.$box.append('<div class="business-detail personal-pic" id="pson-txt" data-id="'+t+'" latag="latag_pc_detail_top_choosepersonal_C_'+window.code+'"><span class="personal-pic-title" data-text="'+e+"刻字限时"+(i||0)+'元" style="display: none;">C面定制:</span><span class="personal-pic-txt">'+e+"刻字限时"+(i||0)+"元</span></div>")},renderDiolog:function(e,t,a,n,s){var r=this,n=n||0,c=PDUtil.queryString("categoryCode")||"",l=PDUtil.queryString("mainPicCode")||"",d=PDUtil.queryString("cPicName")||"";try{var p=t;if(p&&p instanceof Array&&p.length>0)if("A面"==e){this.$box_content.empty();var u=o("#tmpl_srdz_image");u&&1==u.length&&(u.tmpl({datas:p,dataID:a,side:e,categoryCode:c,mainPicCode:l}).appendTo(this.$box_content),o("#"+a+" div.a-category p.item:eq("+n+")").addClass("checked"),this.showFirstTabStyle(a,n),this.scrollButtonEvent(),this.setButtonShowHide())}else{var u=o("#tmpl_srdz_text");u&&1==u.length&&(u.tmpl({datas:p,dataID:a,side:e}).appendTo(".c-inner"),o.ajax({url:PDUtil.getItemDomain()+"/openapi/common.emotions.getCEmoji",type:"GET",data:{},dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_sd_emoji",timeout:5e3,success:function(e){var t=e.data;if(0==t.status&&t.res&&t.res.emojiList.length>0){for(var i="",n=0;n<t.res.emojiList.length;n++)i+='<span class="emoji lenovo-emoji" latag="latag_pc_detail_私人定制_C面刻字_'+window.code+"_"+t.res.emojiList[n].code+'" id="'+t.res.emojiList[n].id+'" emoji='+t.res.emojiList[n].code.replace("&#","_emoji_")+">"+t.res.emojiList[n].code+"</span>";o(".emoji_div").html(i)}if(d){var s=Base64.decode(d);r.checkInputValidationBase(s,!0,function(e){e&&(r.selectedID=a,r.eventHandlerForOKButton())})}},error:function(e){if(console.log(e),d){var t=Base64.decode(d);r.checkInputValidationBase(t,!0,function(e){e&&(r.selectedID=a,r.eventHandlerForOKButton())})}}}))}}catch(e){i.warn("私人定制组件=> renderData方法错误----------------> "),i.warn(e)}},judge:function(e,t){var i=this;"A面"==e||"C面"==e&&i.validCInputText&&(i.selectedID=o("#pson-txt").attr("data-id"),i.eventHandlerForOKButton())},renderPalyPic:function(e,t,a){o.ajax({type:"get",url:__detailConfig.getApiPath("openUrl")+"/goods/personal/print?code="+e+"&materialNumber="+t+"&goodsCodes="+window.code,dataType:"jsonp",jsonp:"jsonpCallback",jsonpCallback:"jQueryJSONP_cache_query",timeout:5e3,success:function(e){if(0==e.status&&e.result){var t=[],o=e.result.data;if(o)for(var n=0;n<o.length;n++)t.push({src:o[n]});window.$p.components.playpic.renderPicture(t)}else window.$p.components.playpic.renderPicture([{src:a}]),i.warn(e.massage)},error:function(e){window.$p.components.playpic.renderPicture([{src:a}]),i.warn(e)}})},setButtonShowHide:function(){var e=this;e.page>=e.totalPage?o("#srdz_style_bottombtn").removeClass("visible"):o("#srdz_style_bottombtn").addClass("visible"),e.page<=1?o("#srdz_style_topbtn").removeClass("visible"):o("#srdz_style_topbtn").addClass("visible")},scrollButtonEvent:function(){var e=this;o("#srdz_style_topbtn").on("click",function(){e.page>1&&(e.page--,e.w+=e.scrollHeight,o(".scroll-container ul.list").animate({top:e.w+"px"},300),e.setButtonShowHide())}),o("#srdz_style_bottombtn").on("click",function(){e.page<e.totalPage&&(e.page++,e.w-=e.scrollHeight,o(".scroll-container ul.list").animate({top:e.w+"px"},300),e.setButtonShowHide())})},getAllData:function(e){var a=this;try{if("undefined"!=typeof $p.baseInfo.positionData&&"{}"!=JSON.stringify($p.baseInfo.positionData)){var n=$p.baseInfo.positionData;for(var s in n)if("A面"==s){if(n[s].length>0){var r=n[s];a.renderData(s,r);var c="",l="";n.currentTab&&n.currentTab[1]&&(c=n.currentTab[1]),c&&PDUtil.queryString("categoryCode")&&PDUtil.queryString("mainPicCode")&&(l=c+"@"+PDUtil.queryString("categoryCode")+"@"+PDUtil.queryString("mainPicCode"),a.selectedID=a.checkAId,a.selectedAPicId=l),a.ALayerCompnent=new t(r,{id:a.checkAId,activeTabCode:c,selectedID:l},function(){l&&(a.selectedID=a.checkAId,a.eventHandlerForAOKButton(!1))})}}else"C面"==s&&n[s]instanceof Array&&n[s].length>0&&(a.renderData(s,n[s]),a.renderDiolog(s,n[s],a.checkBId));null!==n.machinePics&&n.machinePics&&n.machinePics.aPic&&(a.data.machinePics=n.machinePics,a.UserDefinedUploadEntry=!0,$p.loadGuangGaoDialogScript(__detailConfig.getApiPath("fusion"),function(){a.UserDefinedUploadEntry=!0,o("#personal-box .dz-box .srdz-a-right").css("margin-top","-70px"),a.newFusionPic(n)})),a.bindEvent(),a.setElementLatag(),"function"==typeof e&&e()}}catch(e){i.warn("私人定制组件=> getAllData方法错误 ------------->"),i.warn(e)}},getAllDataUpload:function(e){var t=this,a=(new Date).getMilliseconds();o.ajax({type:"GET",url:PDUtil.getItemDomain()+"/batch/openapi/goods/personal/position?code="+window.code+"&type=2&ss="+a,dataType:"jsonp",jsonp:"jsonpCallback",jsonpCallback:"jQueryJSONP_batch_getupload",timeout:5e3,success:function(a){try{if(0==a.status&&a.result){var a=JSON.parse(JSON.stringify(a.result));null!==a.machinePics&&a.machinePics&&a.machinePics.aPic&&$p.loadGuangGaoDialogScript(__detailConfig.getApiPath("fusion"),function(){if(t.UserDefinedUploadEntry=!0,o("#personal-box .dz-box .srdz-a-right").css("margin-top","-70px"),a.customUploadPic&&null!==a.customUploadPic&&a.customUploadPic.length>0)for(var e=0;e<a.customUploadPic.length;e++){if("cut"==a.customUploadPic[e].tag){t.upload_type=2,t.middleImgPath=a.customUploadPic[e].fileUrl,t.DiImgData=a,o("#upload_personal-box .reUpload").show(),o(".no_select").addClass("selected"),t.readOrNot=!0;var i=o("#pson-pic");i.find("span.personal-pic-txt").attr("title","自定义").text("自定义").parent().find("span.personal-pic-title").show(),i.addClass("checked"),t.isSelectedUserDefinedUpload=!0,o("#jrgwc").is(":visible")&&o("#jrgwc").hide().attr("userDefinedUpload",1),$p.components.arrivalTime.getSdDeliverDate(function(){o("#container_arrivalTime .arrivalTimeInfo").removeClass("arrivalTimeNoStockTip").text($p.components.arrivalTime.data.sdDeliverInfo?$p.components.arrivalTime.data.sdDeliverInfo:"16:00点前完成下单，预计7个工作日内发货"),o(".frontPositionTip, .frontPositionPresellTip").remove()},"jQueryJSONP_userDefined_cdt")}"composite"==a.customUploadPic[e].tag&&window.$p.components.playpic.renderPicture([{src:a.customUploadPic[e].fileUrl}])}}),t.setElementLatag(),"function"==typeof e&&e()}}catch(e){i.warn("私人定制组件=> getAllData方法错误 ------------->"),i.warn(e)}},error:function(e){i.warn(e)}})},getpicArrData:function(e){return o.ajax({url:__detailConfig.getApiPath("openUrl")+"/goods/personal/category/pic?code="+e,dataType:"jsonp",jsonp:"jsonpCallback",jsonpCallback:"jQueryJSONP_cache_query",timeout:5e3})},showFirstTabStyle:function(e,t){var i=o(".a-content");i.find(".list .table-style").hide();var a=o("#"+e).find(".list .tab-price"+t),n=a.length;if(0==n?this.totalPage=1:this.totalPage=n%10==0?n/10:parseInt(n/10)+1,a.show(),a.removeClass("active"),a.eq(0).addClass("active"),0==o("#"+e).find(".list li.active").length)this.showImageListWithCateCode(i,a.eq(0).attr("data-tabindex"));else{var s=o("#"+e).find(".list .tab-price"+t+".active").index();this.showImageListWithCateCode(i,i.find(".list .table-style").eq(s).attr("data-tabindex"))}},showImageListWithCateCode:function(e,t){e.find("div.sdtp_pics").hide(),e.find("div.sdtp_pics."+t).show(),new this.scrollBar({container:e.find("div.sdtp_pics."+t),clientArea:e.find("div.sdtp_pics."+t).find(".list-wrap")})},addPostData:function(e,t){if(!t)return!1;var i=0;this.postData[e]&&(i=this.postData[e].price),this.postData[e]=t;var a=o('.personal-pic[data-id="'+e+'"]'),s="";s=t.ptmode==n.picture.code?t.picName+"("+t.price+"元)":"c面刻字限时("+t.price+"元)",a.find("span.personal-pic-txt").attr("title",s).text(t.picName).end().find("span.personal-pic-title").show(),a.addClass("checked"),this.data.price=this.data.price-i+parseFloat(t.price),t.ptmode==n.picture.code&&this.renderPalyPic(t.ptpicCode,t.materialNumber,t.pturl)},removePostData:function(e){var t=this.postData[e];if(!t)return i.warn("取消私定时没有对象！"+e),!1;var a=t.price,s=o('.personal-pic[data-id="'+e+'"]');s.find("span.personal-pic-txt").attr("title",s.find("span.personal-pic-title").attr("data-text")).text(s.find("span.personal-pic-title").attr("data-text")).end().find("span.personal-pic-title").hide(),s.removeClass("checked"),this.data.price=this.data.price-a,t.ptmode==n.picture.code?(window.$p.components.playpic.renderPicture([]),this.checkPositions.categoryCode="",this.checkPositions.mainPicCode=""):(this.checkPositions.cPicName="",o("#pson-txt .personal-pic-txt").text("C面刻字限时"+(a||0)+"元")),delete this.postData[e]},getdz:function(){var e="";try{if(!o.isEmptyObject(this.postData)){var t=[];for(var a in this.postData)t.push(this.postData[a]);e=JSON.stringify(t)}i.debug("私人定制数据：-------------->"),i.debug(e)}catch(e){i.warn("私人定制组件=>getdz 方法错误-------------->"),i.warn(e)}return encodeURIComponent(e)},isSelcetedSrdz:function(){var e=!1,t=o("#div_dingzhi div.personal-pic");return o.each(t,function(t,i){o(i).hasClass("checked")&&(e=!0)}),e},scrollBar:function(e){function t(e,t){"sb"==e?(t<0?t=0:t>m-u&&(t=m-u),l.css("top",t),p.css("margin-top",t*$)):"content"==e&&(t>0?t=0:-t>h-m&&(t=-(h-m)),l.css("top",-t/$),p.css("margin-top",t))}function i(e){p.css("margin-top",-e*$)}function a(e){var t=!1;e>0?(e=0,t=!0):-e>h-m&&(e=-(h-m),t=!0),p.css("margin-top",e);var i=-e/$;return l.css("top",i),t}function n(e,t){return"mouseover"==r(e).type?!(s(t,r(e).relatedTarget||r(e).fromElement)||(r(e).relatedTarget||r(e).fromElement)===t):!(s(t,r(e).relatedTarget||r(e).toElement)||(r(e).relatedTarget||r(e).toElement)===t)}function s(e,t){return e.contains?e!=t&&e.contains(t):!!(16&e.compareDocumentPosition(t))}function r(e){return e||window.event}if(this.clientArea=e.clientArea||null,this.container=e.container||null,!this.clientArea instanceof jQuery||!this.container instanceof jQuery)return!1;if(!(this.container.find(".mlc-wrap").length>0&&this.container.find(".scroll-div").length>0)){this.visibleArea=o('<div class="mlc-wrap"></div>'),this.clientArea.addClass("mlc-list"),this.container.addClass("scroll-container"),this.container.append(this.visibleArea.append(this.clientArea));var c=o('<div class="scroll-div"></div>'),l=o('<div class="scroll-block"></div>');if(this.clientArea.height()<=this.container.height())return c.remove(),!1;this.container.append(c.append(l));var d=this.visibleArea.height(),p=this.clientArea,u=l.height(),m=l.parent().height(),h=this.clientArea.outerHeight(),f=30,v=!1;if(h<=m)return!1;u=m/h*m,u<60&&(u=60),l.css("height",u);var $=(h-m)/(m-u);l.mousedown(function(e){var t=e.clientY,a=o(this).position().top,e=e||event;return document.onmousemove=function(e){var e=e||event,o=a+e.clientY-t;o<0?o=0:o>m-u&&(o=m-u),l.css("top",o),i(o)},o(this).mouseup(function(){document.onmousemove=null,document.onmouseup=null}),document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null},e.preventDefault(),!1}),this.container.mouseover(function(e){n(e,this)&&(v=!0)}),this.container.mouseout(function(e){n(e,this)&&(v=!1)}),this.visibleArea.bind("mousewheel",function(e,t){var i=parseInt(p.css("margin-top")),o=e.originalEvent.wheelDelta||-e.originalEvent.detail,t=Math.max(-1,Math.min(1,o));if(t<0){if(!a(i-f))return!1}else if(!a(i+f))return!1}),c.click(function(e){if(e.target==this){var i=e.clientY,a=o("html").scrollTop(),n=i+a,s=l.offset().top;n>s?t("content",parseInt(p.css("margin-top"))-d):t("content",parseInt(p.css("margin-top"))+d)}})}},checkPresellInfo:function(e){var t=this;2==$p.baseInfo.salesType&&"undefined"!=typeof $p.presellObj&&"{}"!=JSON.stringify($p.presellObj)?(t.checkPresell=!0,e&&e()):e&&e()},resolveDzPrice:function(){if(this.setPriceListWidth(),o(".a-category").width()<685)o(".price-list-arrow").hide();else{var e=0,t=0,i=o(".a-category p.item").length;o(".price-list-arrow.right").off("click").on("click",function(){i>1&&(t-=o(".a-category p.item").eq(e).outerWidth(!0),o(".a-category").animate({left:t+"px"},300),e++,i--)}),o(".price-list-arrow.left").off("click").on("click",function(){e>0&&(e--,i++,t+=o(".a-category p.item").eq(e).outerWidth(!0),
o(".a-category").animate({left:t+"px"},300))})}},bindInputEvent:function(){var e=this,t=!1;o("#c-wrap").on("compositionstart","#srdz-c-input",function(){t=!0}).on("compositionend","#srdz-c-input",function(){t=!1}).on("input","#srdz-c-input",function(i){setTimeout(function(){if(!t){var a=e.inputTextLength(o("#srdz-c-input").val()),n=i.originalEvent.data;if(this.value)if(o("#input-close-img").show(),null!==n)if(Math.ceil(a)>15){var s=o("#srdz-c-input")[0].selectionEnd,r=a-15;this.value=o("#srdz-c-input").val().substring(0,s-r)+o("#srdz-c-input").val().substring(s),o("#srdz-c-input")[0].setSelectionRange(s-r,s-r),o("#srdz-input-desc").addClass("red"),e.isCheckingCInput=!0,e.checkInputValidation(this.value,!1),setTimeout(function(){o("#srdz-input-desc").removeClass("red")},3e3)}else e.isCheckingCInput=!0,e.checkInputValidation(this.value,!1);else e.isCheckingCInput=!0,e.checkInputValidation(this.value,!1);else o("#input-close-img").hide(),e.clearCInputInfo(),e.checkInputValidation()}}.bind(this),0)}),o("#srdz-c-input").on("paste",function(){o("#srdz-input-desc").addClass("red"),setTimeout(function(){o("#srdz-input-desc").removeClass("red")},3e3)}),o("#c-wrap").on("click","#input-close-img",function(){e.clearCInputInfo()}),o("#c-wrap").on("click",".emoji_div .emoji",function(){setTimeout(function(){var t=e.inputTextLength(o("#srdz-c-input").val())+1.5;if(Math.ceil(t)>15){var i=o("#srdz-c-input")[0].selectionEnd;return o("#srdz-c-input").focus(),o("#srdz-c-input")[0].setSelectionRange(i,i),o("#srdz-input-desc").addClass("red"),void setTimeout(function(){o("#srdz-input-desc").removeClass("red")},3e3)}var a=o(this).text();return o(this).addClass("active").siblings().removeClass("active"),setTimeout(function(){o("#c-wrap .emoji_div .emoji").removeClass("active")},200),o("#srdz-c-input").insertAtCaret(a),o("#input-close-img").show(),o("#srdz-c-input").val()?(o("#input-close-img").show(),e.isCheckingCInput=!0,void e.checkInputValidation(o("#srdz-c-input").val())):(o("#input-close-img").hide(),e.clearCInputInfo(),void e.checkInputValidation())}.bind(this),0)})},clearCInputInfo:function(){o("#srdz-c-input").val(""),o("#input-close-img").hide(),o(".srdz-c-img-text").html(""),this.validCInputText="",this.cInputValidation=!1,this.isCheckingCInput=!1,this.checkInputValidation("")},checkInputValidation:e(function(e,t,i){this.checkInputValidationBase(e,t,i)},1e3),checkInputValidationBase:function(e,t,i){var a=this;try{if(!o.trim(e))return void(i&&i(!1));if(!window.passport||!window.passport.isLogin())return a.isCheckingCInput=!1,a.updateCInput(e,t),void(i&&i(!0));$p.checkStringRisk(e,function(o,n){return a.isCheckingCInput=!1,o?(a.updateCInput(e,t),void(i&&i(!0))):(a.cInputValidation=!1,layer.msg(n||"请重新提交您的刻字内容，您可以尝试输入名字或祝福等，为设备添加个性风格"),void(i&&i(!1)))})}catch(e){console.log(e),i&&i(!1)}},updateCInput:function(e,t){var i=this;(void 0==t||t)&&o("#srdz-c-input").val(e),o(".srdz-c-img-text").html(e),e?o("#input-close-img").show():o("#input-close-img").hide(),i.cInputValidation=!0,i.validCInputText=e},upload_tacen:function(){var e=this;e.isSelectedUserDefinedUpload&&e.middleImgPath&&""!==e.middleImgPath&&e.newFusionPic(e.DiImgData,e.middleImgPath),layer.open({type:1,skin:"personal-layer-style",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["1000px","614px"],move:!1,scrollbar:!0,content:o("#personal-layer-wrap")})},initializationUserUpload:function(){var e=this;window.pic.hasSelectPic&&(window.pic.removeSelectPicture(),o("#personal-box .reUpload").hide(),e.isSelectedUserDefinedUpload=!1,e.middleImg_customTransmission=!1,o("#personal-box .no_select").removeClass("selected no_select_tips"),e.upload_type=1)},setElementLatag:function(){o(".newFunction_tips_yes").attr("latag","latag_pc_detail_私人定制_官方图库_"+window.code+"_我知道了"),o("#srdz-a-close").attr("latag","latag_pc_detail_私人定制_官方图库_"+window.code+"_关闭弹窗"),o("#upload_srdz-a-close").attr("latag","latag_pc_detail_私人定制_自定义上传_"+window.code+"_关闭弹窗"),o(".official_gallery").attr("latag","latag_pc_detail_私人定制_0_"+window.code+"_官方图库"),o(".user_defined_upload").attr("latag","latag_pc_detail_私人定制_1_"+window.code+"_自定义上传"),o("#personal-box .upload_dz_cancel").attr("latag","latag_pc_detail_私人定制_自定义上传_"+window.code+"_取消"),o("#personal-box .upload_dz_OK").attr("latag","latag_pc_detail_私人定制_自定义上传_"+window.code+"_确认喷绘"),o("#personal-box .dz_cancel").attr("latag","latag_pc_detail_私人定制_官方图库_"+window.code+"_取消"),o("#personal-box .dz_OK").attr("latag","latag_pc_detail_私人定制_官方图库_"+window.code+"_确认喷绘"),o(".reUpload").attr("latag","latag_pc_detail_私人定制_自定义上传_"+window.code+"_重新上传"),o("#personal-box .no_select").attr("latag","latag_pc_detail_私人定制_自定义上传_"+window.code+"_勾选协议"),o("#personal-box .agreementDescription").attr("latag","latag_pc_detail_私人定制_自定义上传_"+window.code+"_勾选协议"),o(".productTerms_close").attr("latag","latag_pc_detail_私人定制_隐私条款_"+window.code+"_关闭弹窗"),o(".haveRead_div .haveRead").attr("latag","latag_pc_detail_私人定制_隐私条款_"+window.code+"_我已阅读并同意"),o("#srdz-c-close").attr("latag","latag_pc_detail_私人定制_C面刻字_"+window.code+"_关闭弹窗"),o("#c-wrap .dz_cancel").attr("latag","latag_pc_detail_私人定制_C面刻字_"+window.code+"_取消"),o("#c-wrap .dz_OK").attr("latag","latag_pc_detail_私人定制_C面刻字_"+window.code+"_确认刻字")},inputTextLength:function(e){var t=PDUtil.emojiConvert(e,".emoji_div .emoji","emoji","_emoji_","&#");return 1.5*parseFloat(t.emoji_num)+parseFloat(t.text_num)},newFusionPic:function(e,t){var i=this;window.pic=new PicFusion("uploadImgCanvas",{bottomImg:e.machinePics.aPic,materialNumber:$p.baseInfo.materialNumber,goodsCode:window.code,topImg:e.machinePics.aLogoPic||"",baseImg:e.machinePics.aNotNeedPrintPic||"",middleImg:t?i.middleImgPath:"",limitSize:[1280,720],onUploadSuccess:function(){o("#upload_personal-box .reUpload").show(),o(".custom_explain").css("color","#252525")},onToastCb:function(e){layer.msg(e),o(".layui-layer-hui").css("width","auto"),o(".layui-layer-hui").css({left:(o(window).width()-o(".layui-layer-hui").width())/2}),o(".custom_explain").css("color","#EF1E0B")},onSendLog:function(e){switch(e){case"SELECT_PIC":sensors2022_05_16.track("CustomizeUploadClick",{feedback:"上传图片"}),window._trackData=[],_trackData.push(["cusdefined","上传图片","latag_pc_detail_私人定制_自定义_"+window.code+"_上传图片"]);break;case"SIZE_ERROR":sensors2022_05_16.track("CustomizeUploadClick",{feedback:"您上传图片的大小错误，请上传不超过5M大小的图片"}),window._trackData=[],_trackData.push(["cusdefined","错误信息","latag_pc_detail_私人定制_自定义_"+window.code+"_您上传图片的大小错误，请上传不超过5M大小的图片"]);break;case"DIMENSION_ERROR":sensors2022_05_16.track("CustomizeUploadClick",{feedback:"您上传图片的像素错误，请上传不低于1280*720像素的图片"}),window._trackData=[],_trackData.push(["cusdefined","错误信息","latag_pc_detail_私人定制_自定义_"+window.code+"_您上传图片的像素错误，请上传不低于1280*720像素的图片"]);break;case"TYPE_ERROR":sensors2022_05_16.track("CustomizeUploadClick",{feedback:"您上传图片的格式错误，请上传JPG/PNG格式的图片"}),window._trackData=[],_trackData.push(["cusdefined","错误信息","latag_pc_detail_私人定制_自定义_"+window.code+"_您上传图片的格式错误，请上传JPG/PNG格式的图片"])}}})},uploadPresellCdt:function(){var e="",t="";"undefined"!=typeof $p.presellObj&&"{}"!=JSON.stringify($p.presellObj)&&1==$p.presellObj.presellway&&($p.components&&$p.components.arrivalTime&&$p.components.arrivalTime.getArrivalDate(),e=$p.components&&$p.components.title.formatDate($p.presellObj.activityendtime_date.getTime()+24*$p.presellObj.taildeliveryday*60*60*1e3+24*($p.components.arrivalTime.data.arrivalDate||5)*60*60*1e3),t=PDUtil.formatShortDate(e,1)),o("#presell_deliverytime").text(t)}},a}(i,o);a?module.exports=n:(window.components||(window.components={}),window.components.Srdz=n)}(),function(e){function t(e){this.data={all:[],selectedItem:-1,index:[]},this.$container=$("#swiper-wrap"),this.$box=$("#div_taocan"),e&&this.init()}t.prototype={constructor:t,init:function(){$p.baseInfo.isIntegral||96==$p.baseInfo.salesType&&$p.isBusinessDetail||(this.getAllData(),this.renderDom(),this.bindEvent())},renderDom:function(){try{var t=window.$p,i=this.data.all,o="",a="";$("#tc_pics_scroll").html('<img src="'+t.baseInfo.thumbnailsURL.path+'" alt=""><p class="title" title="'+t.baseInfo.name+'">'+t.baseInfo.name+'</p><p class="detail" title="'+t.baseInfo.brief+'">'+t.baseInfo.brief+'</p><p class="price">￥ <span>'+t.baseInfo.price+"</span></p>");for(var n="",s=0;s<i.length;s++){var r=i[s];o+='<li title="'+r.data[0].promotionName+'"><a href="javascript:;">'+r.data[0].promotionName+"(￥"+parseFloat(r.showPrice)+") </span></a></li>";for(var c=0;c<r.data.length;c++){var l=r.data[c];if(n=t.promotion.goodsDetailUrl&&t.promotion.goodsDetailUrl[l.code]||"/product/"+l.code+".html",a+=0==c?'<div id="tabs-'+(s+1)+'" class="tabsContent"><div class="swiperOuter"><ul class="swiperWrap clearfix">':'<li class="card"><a target="_blank" href="'+n+'"><img src="'+l.path+'" alt=""><p class="title" title="'+l.goodsName+'">'+l.goodsName+'</p><p class="detail" title="'+l.description+'">'+l.description+'</p><p class="price">￥ <span>'+l.productPrice+"</span></p></a></li>",c==r.data.length-1){var d="";d=r.canSell?'<button class="tc_pay" onclick="javascript:$p.components.buygroup.tcjrgwc(\''+r.data[0].id+"')\">加入购物车</button>":'<button class="tc_pay" style="background-color:#ccc;" class="tc_pay tc_pay_disable">加入购物车</button>',a+='</ul></div><div class="swiperBtn"><div class="left"><i class="taocan-left-arrow"></i></div><div class="right"><i class="taocan-right-arrow"></i></div></div><div class="toShopCart"><p><span>套餐价</span><span class="price">￥ <span>'+parseFloat(l.totalPrice-l.totalDiscountAmount).toFixed(2)+'</span></span></p><p class="second">节省 <span>'+parseFloat(l.totalDiscountAmount)+"</span> 元</p>"+d+"</div></div>"}}}if(o.length>0&&(this.$box.append(o),t.baseInfo.isCombinedGoods||this.$container.show(),a.length>0)){$("#promotion_box").append(a);var p=$("#swiper-wrap .tabsWrap .tabsItem li"),u=$("#swiper-wrap .tabsWrap .tabsContent");$(u[0]).addClass("active"),$(p[0]).addClass("active");for(var s=0;s<p.length;s++)!function(e){$(p[e]).on("click",function(){for(var t=0;t<u.length;t++)$(u[t]).removeClass("active"),$(p[t]).removeClass("active");$(u[e]).addClass("active"),$(p[e]).addClass("active"),$("#swiper-wrap").find("p.title").ellipsis()})}(s);$("#swiper-wrap").find("p.title").ellipsis();for(var m=0;m<u.length;m++)new PDUtil.mySwiper({fid:"#tabs-"+(m+1),ul:".swiperWrap",lis:".card",leftBtn:".swiperBtn .left",rightBtn:".swiperBtn .right",count:4})}}catch(t){e.warn("套餐组件=> renderDom方法错误 ------------->"),e.warn(t)}},bindEvent:function(){var e=this;this.$box.find("div.item").on("click",function(){var t=$(this),i=t.attr("data-index");t.hasClass("checked")?(t.removeClass("checked"),e.$box.find(".detail-taocan").eq(e.data.selectedItem).hide(),e.data.selectedItem=-1):(t.addClass("checked"),t.siblings(".checked").removeClass("checked"),e.$box.find(".detail-taocan").eq(e.data.selectedItem).hide(),e.data.selectedItem=i,e.$box.find(".detail-taocan").eq(e.data.selectedItem).show())}),this.$box.find(".detail-taocan .tc_close").on("click",function(){e.$box.find("div.item[data-index="+e.data.selectedItem+"]").removeClass("checked"),e.$box.find(".detail-taocan").eq(e.data.selectedItem).hide(),e.data.selectedItem=-1}),this.$box.find(".detail-taocan .tc_left").on("click",function(){var t=e.$box.find(".tc_pics"),i=t.width(),o=e.data.index[e.data.selectedItem];o.current>1&&(t.css({left:"-="+i+"px"}),o.current++)}),this.$box.find(".detail-taocan .tc_right").on("click",function(){var t=e.$box.find(".tc_pics"),i=t.width(),o=e.data.index[e.data.selectedItem];o.current<o.max&&(t.css({left:"+="+i+"px"}),o.current++)}),$("#div_taocan").find("a").ellipsis()},getAllData:function(){var t=this;try{var i,o=window.$p.processTaocanNeedShowList(),a=[];if(o)for(var n=0;n<o.length;n++){i=!1;for(var s=0;s<o[n].data.length;s++)(0===$p.promotion.goodsStatus[o[n].data[s].code]||o[n].data[s].stock.salesNumber<=0)&&(i=!0);i||a.push(o[n])}if(t.data.all=a,a.length>0)for(var r=0;r<a.length;r++){var c=a[r].data&&a[r].data.length||0,l=parseInt(c/4+1);t.data.index.push({current:1,max:l})}return a}catch(i){return e.warn("套餐组件=> getAllData方法错误 ------------->"),e.warn(i),t.data.all=[],t.data.all}}},window.components||(window.components={}),window.components.Taocan=t}(window.PDUtil),function(){function e(e){this.data={all:[]},this.$container=$("#container_o2ocity"),this.$box=$("#div_cities"),this.$box_city=$("#city_wrap"),this.$tabsWrap=$("#city_wrap .tabsWrap"),this.$picNew=$("#city_wrap .text span"),e&&this.init()}window.PDUtil;e.prototype={constructor:e,init:function(){$p.baseInfo.isIntegral||96==$p.baseInfo.salesType&&$p.isBusinessDetail||(this.getAllData(),this.renderDom(),this.bindEvent())},renderDom:function(){this.data.all&&this.data.all.length>0&&($("#thinko2oCityTemplate").tmpl({data:this.data.all}).appendTo(this.$tabsWrap),this.$container.removeClass("hidden"))},bindEvent:function(){function e(){return i.$box_city.hide(),i.$box.removeClass("open"),!1}function t(){i.$box_city.show(),i.$box.addClass("open")}var i=this;i.$box.on("mouseenter",function(){return $(this).find(".arrow").css({transform:"rotate(180deg)"}),t(),!1}),i.$box.on("mouseleave",function(){$(this).find(".arrow").css({transform:"rotate(0deg)"}),e()}),i.$picNew.on("click",function(){i.$box_city.find(".city_tab_province").show(),i.$box_city.find(".city_tab_city").attr("data-city",0).hide(),i.$box_city.find(".city_tab_area").attr("data-area",0).hide(),i.$box_city.find(".city_tab_country").attr("data-country",0).hide(),i.$box_city.find(".city_tab_title_province").addClass("active").siblings("li").removeClass("active");var e=$(".city_tab_title_province"),t=$(".city_tab_title_city"),o=$(".city_tab_title_area"),a=$(".city_tab_title_country");$(".city_tab_title_province").attr("data-province","1"),$(".city_tab_title_city").attr("data-province","0"),$(".city_tab_title_area").attr("data-province","0"),$(".city_tab_title_country").attr("data-province","0"),i.$box_city.find(".city_tab_city").hide(),i.$box_city.find(".city_tab_area").hide(),i.$box_city.find(".city_tab_country").hide(),e.find("span").text("省"),t.find("span").text("市"),o.find("span").text("区/县"),a.find("span").text("镇/乡")}),i.$box_city.find(".city_tab_title_province").on("click",function(){i.$box_city.find(".city_tab_province").show(),i.$box_city.find(".city_tab_city").hide(),i.$box_city.find(".city_tab_area").hide(),i.$box_city.find(".city_tab_country").hide(),$(this).addClass("active").siblings("li").removeClass("active")}),i.$box_city.find(".city_tab_title_city").on("click",function(){var e=i.$box_city.find(".city_tab_title_province").attr("data-province");i.$box_city.find(".city_tab_province").hide(),i.$box_city.find(".city_tab_city[data-province='"+e+"']").show().siblings(".city_tab_body").hide(),i.$box_city.find(".city_tab_area").hide(),$(this).addClass("active").siblings("li").removeClass("active")}),i.$box_city.find(".city_tab_title_area").on("click",function(){var e=i.$box_city.find(".city_tab_title_city").attr("data-city");i.$box_city.find(".city_tab_province").hide(),i.$box_city.find(".city_tab_city").hide(),i.$box_city.find(".city_tab_area[data-city='"+e+"']").show().siblings(".city_tab_body").hide(),$(this).addClass("active").siblings("li").removeClass("active")}),i.$box_city.find(".city_tab_title_country").on("click",function(){var e=i.$box_city.find(".city_tab_title_area").attr("data-area");i.$box_city.find(".city_tab_province").hide(),i.$box_city.find(".city_tab_city").hide(),i.$box_city.find(".city_tab_area").hide(),i.$box_city.find(".city_tab_country[data-area='"+e+"']").show().siblings(".city_tab_body").hide(),$(this).addClass("active").siblings("li").removeClass("active")}),i.$box_city.on("click",".city_tab_province dd",function(){var e=$(this),t=$(".city_tab_title_province"),o=$(".city_tab_title_city"),a=$(".city_tab_title_area"),n=$(".city_tab_title_country"),s=e.find("span:first").text(),r=e.attr("data-province");e.addClass("o2o-now").siblings("dd").removeClass("o2o-now"),t.find("span").text(s),t.attr("data-province",r),t.removeClass("active"),o.addClass("active");var c="市",l="区/县",d="镇/乡",p=0;o.show().attr("data-city",p),o.find("span").text(c),a.find("span").text(l),n.find("span").text(d),i.$box_city.find(".city_tab_province").hide();var u=$("dl.city_tab_city[data-province = '"+r+"']");u.find("dd.o2o-now").removeClass("o2o-now").end().show()}),i.$box_city.on("click",".city_tab_city dd",function(){var e=$(this),t=e.attr("data-city"),o=e.find("span:first").text(),a=$(".city_tab_title_city"),n=$(".city_tab_title_area"),s=$(".city_tab_title_country"),r="区/县",c="镇/乡",l=0;n.show().attr("data-area",l),n.find("span").text(r),n.addClass("active"),a.removeClass("active"),e.addClass("o2o-now").siblings("dd.o2o-now").removeClass("o2o-now"),a.find("span").text(o),s.find("span").text(c),a.attr("data-city",t);var d=$(".city_tab_title_province").attr("data-province");i.$box.attr("data-province",d),i.$box.attr("data-city",t),i.$box.find(".city_tab_city").hide();var p=$("dl.city_tab_area[data-city = '"+t+"']");p.find("dd.o2o-now").removeClass("o2o-now").end().show()}),i.$box_city.on("click",".city_tab_area dd",function(){var e=$(this);if(e.find("span:first").hasClass("gray"))return!1;var t=e.attr("data-area"),o=e.find("span:first").text(),a=$(".city_tab_title_area"),n=$(".city_tab_title_country"),s="镇/乡",r=0;n.show().attr("data-area",r),n.find("span").text(s),n.addClass("active"),a.removeClass("active"),e.addClass("o2o-now").siblings("dd.o2o-now").removeClass("o2o-now"),a.find("span").text(o),a.attr("data-area",t);var c=$(".city_tab_title_province").attr("data-province"),l=$(".city_tab_title_city").attr("data-city");i.$box.attr("data-province",c),i.$box.attr("data-city",l),i.$box.attr("data-area",t),i.$box.find(".city_tab_area").hide();var d=$("dl.city_tab_country[data-area = '"+t+"']");d.find("dd.o2o-now").removeClass("o2o-now").end().show()}),i.$box_city.on("click",".city_tab_country dd",function(){var t=$(this);if(t.find("span:first").hasClass("gray"))return!1;var o=t.attr("data-country"),a=t.find("span:first").text(),n=$(".city_tab_title_country");t.addClass("o2o-now").siblings("dd.o2o-now").removeClass("o2o-now"),n.find("span").text(a);var s=$(".city_tab_title_province span").text(),r=$(".city_tab_title_city span").text(),c=$(".city_tab_title_area span").text(),l=$(".city_tab_title_country span").text(),d=$(".city_tab_title_province").attr("data-province"),p=$(".city_tab_title_city").attr("data-city"),u=$(".city_tab_title_area").attr("data-area");return i.$box.find(".address span.province").text(s),i.$box.find(".address span.city").text(r),i.$box.find(".address span.area").text(c),i.$box.find(".address span.country").text(l),i.$box.attr("data-province",d),i.$box.attr("data-city",p),i.$box.attr("data-area",u),i.$box.attr("data-country",o),e(),!1})},getAllData:function(){return this.data.all=$p.baseInfo.thinko2oCities||[],this.data.all}},window.components||(window.components={}),window.components.ThinkO2OCityList=e}(),function(){function e(e){this.data={all:[],selectedArray:[]},this.selectedMainGoodsPrice=0,this.$container=$("#recommend-wrap"),this.$box=$(".swiperItemWrap"),e&&this.init()}e.prototype={constructor:e,init:function(){var e=this;$p.baseInfo.isIntegral||96==$p.baseInfo.salesType&&$p.isBusinessDetail||(setTimeout(function(){$p.baseInfo.deliveryPrice&&$p.baseInfo.deliveryPrice.offerDetailList&&$p.baseInfo.deliveryPrice.offerDetailList.length>0?e.selectedMainGoodsPrice=!!$p.baseInfo.deliveryPrice.deliverPrice&&parseFloat($p.baseInfo.deliveryPrice.deliverPrice.price):e.selectedMainGoodsPrice=$p.baseInfo.price},500),this.getAllData(),this.renderDom(),this.bindEvent())},renderDom:function(){for(var e=window.$p,t=this.data.all,i="",o=0;o<t.length;o++){var a=t[o],n=e.promotion.goodsDetailUrl&&e.promotion.goodsDetailUrl[a.code]||"/product/"+a.code+".html";i+='<li class="item" data-code="'+a.code+'" data-price="'+a.showPrice+'" data-productPrice="'+a.productPrice+'" data-discountType="'+a.discountSplitType+'" data-mainGoodsDiscount="'+a.mainGoodsDiscountAmount+'" data-optionDiscount="'+a.optionDiscountAmount+'" data-faId="'+a.faId+'"><div class="imgBox"><img src="'+PDUtil.cutPicturePath(a.path,48)+'" alt=""></div><a href="'+n+'" target="_blank" latag="latag_pc_detail_option_null_'+n+"_"+window.code+'"><p class="title-s" title="'+a.goodsName+'">'+a.goodsName+'</p></a><div class="price"><p class="main">￥<span>'+a.showPrice.toFixed(2)+'</span></p><p class="save">省￥<span>'+a.discountAmount+"</span></p></div></li>"}i.length>0&&(this.$box.html(i),this.$container.removeClass("hidden")),t.length<=6?this.$container.find(".swiperBtn").hide():new PDUtil.mySwiper({fid:"#recommend-wrap",ul:".swiperItemWrap",lis:".item",leftBtn:".swiperBtn .left",rightBtn:".swiperBtn .right",count:6}),$(".title-s").ellipsis({row:2,onlyFullWords:!0,position:"tail"})},bindEvent:function(){var e=this;this.$box.find("li.item").on("click",function(){var t=$(this),i=t.attr("data-code"),o=t.attr("data-price"),a=t.attr("data-productPrice"),n=parseInt(t.attr("data-discountType")),s=t.attr("data-mainGoodsDiscount"),r=t.attr("data-optionDiscount"),c=t.attr("data-faId");if(t.hasClass("checked"))t.removeClass("checked"),e.data.selectedArray=PDUtil.dropSome(e.data.selectedArray,function(e){return e.code==i}),$p.components.enterprisePoints&&$p.components.enterprisePoints.hasEnterprisePoints&&($p.components.enterprisePoints.removeIntegrationItem($p.components.enterprisePoints.itemList,"goodsNumber",i),e.selectedMainGoodsPrice=$p.components.enterprisePoints.itemListObj.amount=parseFloat((parseFloat(e.selectedMainGoodsPrice)+parseFloat(s)).toFixed(2)),$p.components.enterprisePoints.getGoodsEnterprisePoints($p.components.enterprisePoints.itemList));else{t.addClass("checked");var l=PDUtil.findFirst(e.data.selectedArray,function(e){return e.code==i});if(l||e.data.selectedArray.push(PDUtil.findFirst(e.data.all,function(e){return e.code==i})),$p.components.enterprisePoints&&$p.components.enterprisePoints.hasEnterprisePoints){var d={};d.faId=c,d.goodsCode=i,d.num=$p.buyProNumber||1,d.goodsNumber=i,1==n||2==n?(d.amount=parseFloat((parseFloat(a)-parseFloat(r)).toFixed(2)),e.selectedMainGoodsPrice=$p.components.enterprisePoints.itemListObj.amount=parseFloat((parseFloat(e.selectedMainGoodsPrice)-parseFloat(s)).toFixed(2))):d.amount=o,$p.components.enterprisePoints.itemList.push(d),$p.components.enterprisePoints.getGoodsEnterprisePoints($p.components.enterprisePoints.itemList)}}"7ef1d628-5bd3-4651-9530-793678cc02af"!=faid||!$p.isProActivityBefore||$p.baseInfo.isUpgradeGoods||$p.baseInfo.isCombinedGoods||(2!=$p.baseInfo.salesType&&!$p.isHideArrivalTime||2==$p.baseInfo.salesType&&$p.isPresellShowArrivalTime)&&$p.components.arrivalTime.data.checkItemCode.provinceCode&&$p.components.arrivalTime&&$p.components.arrivalTime.getArrivalTimeByFa.call(this,function(){$p.components.arrivalTime&&$p.components.arrivalTime.checkSpeedUpIcon.call(this)})})},getAllData:function(){var e=$p.processXJNeedShowList();return this.data.all=e,e},getSelectedCodeArray:function(){for(var e=[],t=0;t<this.data.selectedArray.length;t++)e.push(this.data.selectedArray[t].code);return e}},window.components||(window.components={}),window.components.TuiJianXuanJian=e}(),function(e){function t(e){this.data={all:[],zh_all:[]},$p.baseInfo.isUpgradeGoods&&(e=!0),$p.baseInfo.isCombinedGoods&&(e=!0),e&&this.init()}t.prototype={constructor:t,init:function(){try{if($p.baseInfo.isCombinedGoods&&this.getAllData_zh(),$p.baseInfo.isUpgradeGoods){if(96==$p.baseInfo.salesType&&$p.isBusinessDetail)return;this.getAllData()}this.renderDom(),this.bindEvent()}catch(t){e.warn("升配组合组件=> init方法错误 ---------->"),e.warn(t)}},renderDom:function(){try{var t=this.data.all,i="",o="";if(t.length>0){i+='<span class="coupon-upgradeGoods-title">定制</span><div class="selectedImgs">';for(var a=0;a<t.length;a++){var n=t[a];a<2&&(i+='<img src="'+n.thumbnail.path+'" alt="">'),o+='<div class="coupon-upgradeGoods-img checked"  style="background: url('+n.thumbnail.path+') no-repeat;background-size: 100% 100%;"><div class="is_checked"></div><div class="upgradeGoods-details"><div class="upgradeGoods-title">'+n.name+'</div><a class="look-upgradeGoods-details" target="_blank" href="'+n.url.pc+'" latag="latag_pc_detail_top_定制详情_null_'+n.url.pc+'"><span>详情</span><i></i></a></div></div>'}i+="</div>"}i.length>0&&($(".coupon-upgradeGoods").append(i).addClass("couponInlineblock").attr("latag","latag_pc_detail_top_null_定制_"+window.code),$(".coupon-look-detail").addClass("couponInlineblock"),$("#couponbox").show()),o.length>0&&(0==$("#coupon-layer-new-wrap .coupon-popup-upgradeGoods").length&&$("#coupon-layer-new-wrap .coupon-popup-cont").prepend('<div class="coupon-popup-upgradeGoods"><div class="coupon-popup-upgradeGoods-title">定制</div><div class="coupon-popup-upgradeGoods-imgs"></div></div>'),$(".coupon-popup-upgradeGoods-imgs").append(o));var s=this.data.zh_all,r="",c="";if(s.length>0){r+='<span class="coupon-combination-title">组合</span><div class="selectedImgs">';for(var a=0;a<s.length;a++){var n=s[a];a<2&&(r+='<img src="'+n.thumbnail.path+'" alt="">'),c+='<div class="coupon-upgradeGoods-img checked"  style="background: url('+n.thumbnail.path+') no-repeat;background-size: 100% 100%;"><div class="is_checked"></div><div class="upgradeGoods-details"><div class="upgradeGoods-title">'+n.name+'</div><a class="look-upgradeGoods-details" target="_blank" href="'+n.url.pc+'" latag="latag_pc_detail_top_组合详情_null_'+n.url.pc+'"><span>详情</span><i></i></a></div></div>'}r+="</div>"}r.length>0&&($(".coupon-combination").append(r).addClass("couponInlineblock").attr("latag","latag_pc_detail_top_null_组合_"+window.code),$(".coupon-look-detail").addClass("couponInlineblock"),$("#couponbox").show()),c.length>0&&(0==$("#coupon-layer-new-wrap .coupon-popup-upgradeGoods").length&&$("#coupon-layer-new-wrap .coupon-popup-cont").prepend('<div class="coupon-popup-upgradeGoods"><div class="coupon-popup-upgradeGoods-title">组合</div><div class="coupon-popup-upgradeGoods-imgs"></div></div>'),$(".coupon-popup-upgradeGoods-imgs").append(c)),$(".uparrow-u").hide()}catch(t){e.warn("必选赠品组件=> renderDom方法错误 --------->"),e.warn(t)}},bindEvent:function(){$(".coupon-popup-title .layer-close-icon").on("click",function(){layer.closeAll()}),$("#coupon-layer-new-wrap").on("mouseenter mouseleave",".coupon-upgradeGoods-img",function(e){var t=$(this);"mouseenter"==e.type?t.find(".upgradeGoods-details").show():"mouseleave"==e.type&&t.find(".upgradeGoods-details").hide()})},getAllData:function(){var e=window.$p.baseInfo.upgradeGoods;return this.data.all=e,e},getAllData_zh:function(){var e=window.$p.baseInfo.combinedGoods;return this.data.zh_all=e,e}},window.components||(window.components={}),window.components.UpgradeGoods=t}(window.PDUtil),function(){function e(e){this.data={myVideoUrl:"",my3DExtra:"",my3DCode:"",flag:!1},e&&this.init()}e.prototype={constructor:e,isLenovoOfficialApp:/lenovoofficialapp/i.test(navigator.userAgent),init:function(){1==this.data.flag?this.render():this.json3DUrl(this.render.bind(this))},json3DUrl:function(e){var t=this,i=window.goodsCode;this.data.flag=!0,$.ajax({type:"GET",url:__detailConfig.getApiPath("pro3d")+"goods/products/v3d/get/B00001",data:{code:i},dataType:"jsonp",jsonp:"jsonpCallback",jsonpCallback:"jQueryJSONP_v3d_get",success:function(e){0==e.status&&2!=e.status&&(t.data.my3DCode=e.result[i]["3D"]||"",t.data.myVideoUrl=e.result[i].vedio||"")},complete:function(){e&&"function"==typeof e&&e.bind(this)()},error:function(e){PDUtil.debug("invoke 3D interface error ------------->")}})},render:function(){var e=this;e.isLenovoOfficialApp||(e.data.my3DCode="");try{var t;if(""==e.data.myVideoUrl&&""==e.data.my3DCode)return;try{var i=document.documentElement.clientWidth}catch(e){PDUtil.debug("videoPlayers组件=> 获取宽高失败 ----------->"),PDUtil.debug(e)}""!=e.data.myVideoUrl&&""!=e.data.my3DCode?($("#single_video").on("click",function(){$(".m").css("height",i),$(".m").show(),videojs.options.flash.swf="video-js.swf",t=videojs("my-video",{fluid:!0}),t.src(e.data.myVideoUrl),t.ready(function(){$("div.closevedio").show(),this.show(),this.play(),t.on("ended",function(){navigator.userAgent.indexOf("compatible")>-1&&navigator.userAgent.indexOf("MSIE")>-1?this.pause():($(".m").hide(),this.pause(),this.hide(),(e.invokeFieldOrMethod(document,"FullScreen")||e.invokeFieldOrMethod(document,"IsFullScreen")||document.IsFullScreen||document.msFullscreenElement)&&e.exitFullscreen(),$("#single_video").addClass("on").show())})})}),$("div.closevedio").click(function(){$(".m").hide(),t.pause(),t.hide()}),$("#show3DBtn").on("click",function(){e.process3DShow(e.data.my3DCode,e.data.my3DExtra)}),$("#videoTo3D").find("i").eq(0).on("click",function(){$("#videoTo3D").find("i").eq(1).removeClass("on"),$("#videoTo3D").find("i").eq(0).addClass("on"),$("#single_video").hide(),$("#show3DBtn").show()}),$("#videoTo3D").find("i").eq(1).on("click",function(){$("#videoTo3D").find("i").eq(0).removeClass("on"),$("#videoTo3D").find("i").eq(1).addClass("on"),$("#single_video").show(),$("#show3DBtn").hide()}),$("#videoTo3D").find("i").eq(1).hasClass("on")?($("#videoTo3D").find("i").eq(0).removeClass("on"),$("#videoTo3D").show(),$("#single_video").show()):($("#videoTo3D").find("i").eq(0).addClass("on"),$("#videoTo3D").show(),$("#show3DBtn").show())):""!=e.data.myVideoUrl&&""==e.data.my3DCode?($("#single_video").attr("latag","latag_pc_detail_top_播放视频_"+window.code+"_"+e.data.myVideoUrl),$("#single_video").on("click",function(){$("#single_video").hide(),$(".m").css("height",i),$(".m").show(),videojs.options.flash.swf="video-js.swf",t=videojs("my-video",{fluid:!0}),t.aspectRatio("1:1"),t.src(e.data.myVideoUrl),t.ready(function(){$("div.closevedio").show(),this.show(),this.play(),t.on("ended",function(){navigator.userAgent.indexOf("compatible")>-1&&navigator.userAgent.indexOf("MSIE")>-1?this.pause():($(".m").hide(),this.pause(),this.hide(),(e.invokeFieldOrMethod(document,"FullScreen")||e.invokeFieldOrMethod(document,"IsFullScreen")||document.IsFullScreen||document.msFullscreenElement)&&e.exitFullscreen(),$("#single_video").addClass("on").show())})})}),$("div.closevedio").click(function(){$(".m").hide(),t.hide(),t.pause(),$("#single_video").addClass("on").show()}),$("#single_video").addClass("on").show()):""==e.data.myVideoUrl&&""!=e.data.my3DCode&&($("#show3DBtn").on("click",function(){e.process3DShow(e.data.my3DCode,e.data.my3DExtra)}),$("#show3DBtn").show(),$("#single_3D").addClass("on").show())}catch(e){PDUtil.debug("videoPlayers组件=> render方法错误 ----------->"),PDUtil.debug(e)}},process3DShow:function(e,t){if(/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)){if(e)try{call3DShow(e)}catch(e){PDUtil.debug("videoPlayers组件=> process3DShow方法错误 ----------->"),PDUtil.debug(e)}}else if(/(Android)/i.test(navigator.userAgent)&&e)try{window.HomeIntent.call3DShow(e,t)}catch(e){PDUtil.debug("videoPlayers组件=> process3DShow方法错误 ----------->"),PDUtil.debug(e)}},exitFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.oRequestFullscreen?document.oCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},invokeFieldOrMethod:function(e,t){var i;return["webkit","moz","ms","o",""].forEach(function(o){if(!i){""===o&&(t=t.slice(0,1).toLowerCase()+t.slice(1));var a=typeof e[o+t];a+""!="undefined"&&(i="function"===a?e[o+t]():e[o+t])}}),i}},window.components||(window.components={}),window.components.videoPlayers=e}(),function(){Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,o=function(){},a=function(){return i.apply(this instanceof o&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return o.prototype=this.prototype,a.prototype=new o,a})}();
//# sourceMappingURL=../debugmaps/components.js.map
