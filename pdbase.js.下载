!function(){function e(){this.terminal=1,this.shareCode="",this.nowNumber=31536e8,this.env=0,this.baseInfo={isApp:!1,isHSApp:!1,isLenovoApp:!1,name:"",showPrice:0,price:0,basePrice:0,marketable:0,mallType:window.shopId||n.mallTypeMapping.lenovoShop.code,materialNumber:"",isService:0,salesType:0,stock:0,isFroFrontPosition:!1,isIndependentSale:0,isPhysical:0,LCode:"",SNCode:"",gmsl:5,isPersonalPositions:[],personalPositions:"",categoryCode:0,lastDownTime:"",couponIconNum:0},this.activity=null,this.promotion={gifts:null,giftsSelectable:null,saleReduction:null,fullReduction:null,goodsStatus:null,option:null,packs:null},this.components={scrollPicture:null,title:null,guige:null,service:null,buygroup:null,srdz:null,bxzp:null,tjxj:null,hotlist:null,taocan:null},this.addressData={checkItemName:{province:null,city:null,area:null},checkItemCode:{provinceCode:null,cityCode:null,areaCode:null},ipLocated:!1},this.baseInfo.isHSApp=this.getIsHSApp(),this.baseInfo.isLenovoApp=this.getIsLenovoAPP(),this.loading=null,this.isHideArrivalTime=!1,this.isPresellShowArrivalTime=!1,this.isProActivityBefore=!1,this.hasFullLimitedStock=!0,this.proStockByOptions=!1,this.isComposeProduct=!1,this.isCustomProduct=!1,this.isSupportXiaoshida=!1,this.isBusinessDetail="9c9a5684-2006-43ea-a688-758e8f5459cd"===faid||"0df6cd56-50d2-4f1d-8c6f-942886e46c29"===faid||"a324be5c-e146-4cda-b66a-d31692393b2a"===faid||"27198208-ba1c-4385-96e9-f823e6734bc7"===faid||"fb6eef79-38a8-4081-a25e-e3ae8769dba6"===faid||"0f3a0c9b-031b-4a4a-b27e-a09517675754"===faid||"ffe3a7f6-8b44-459e-afba-4554d3e49f34"===faid||"5c294dc7-3f27-4c37-b262-010123088063"===faid||"65669c81-cebb-4616-b816-cc24eccbbd31"===faid||"f1249402-a3b7-4614-93c1-6d4e11998670"===faid}function t(){return Boolean("object"==typeof global&&global&&global.Object===Object&&global)}function o(e,t,o){for(var a=[],i=0;i<e.length;i++)t(e[i])==o&&a.push(e[i]);return a}function a(e,t){return RegExp(e).test(t)}function i(e){for(var t=new Array,o=0;o<e.length;o++)a(e[o],t)||t.push(e[o]);return t}function s(e){var t=new Date(e),o=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),s=t.getHours(),n=t.getMinutes(),r=t.getSeconds();return a<=9&&(a="0"+a),i<=9&&(i="0"+i),s<=9&&(s="0"+s),n<=9&&(n="0"+n),r<=9&&(r="0"+r),o+"-"+a+"-"+i+" "+s+":"+n+":"+r}var n={isDebug:!1,isRunInNode:t,mallTypeMapping:{lenovoShop:{code:"1",name:"联想商城"},thinkShop:{code:"2",name:"think商城"},SMBShop:{code:"8",name:"SMB商城"},SMBScoreShop:{code:"9",name:"SMB积分商城"},HuishangShop:{code:"14",name:"惠商商城"},HuishangScoreShop:{code:"15",name:"惠商积分商城"}},errorMessage:{busy:"商城系统繁忙，请稍后再试！",error:"商城系统异常，请稍后再试！",maintenance:"商城系统正在维护，请稍后再试！",_defaults:"商城系统繁忙，请稍后再试！"},getItemDomain:function(){var e="";return location.host.indexOf("lenovouat")>=0&&(e="https://papi.lenovouat.com"),location.host.indexOf("cn")>=0&&(e="https://papi.lenovo.com.cn"),e},queryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),o=window.location.search.substr(1).match(t);return null!=o?decodeURIComponent(o[2]):null},addCookie:function(e,t,o){if(o=$.extend({path:"/"},o||{}),"number"==typeof o.expires){var a=o.expires,i=o.expires=new Date;i.setMilliseconds(i.getMilliseconds()+864e5*a)}return document.cookie=[encodeURIComponent(e),"=",window.PDUtil.stringifyCookieValue(t,o),o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")},stringifyCookieValue:function(e,t){return encodeURIComponent(t.json?JSON.stringify(e):String(e))},getCookie:function(e){for(var t=document.cookie,o=t.split("; "),a=0;a<o.length;a++){var i=o[a].split("=");if(i[0]==e)return decodeURIComponent(i[1])}return null},removeCookie:function(e){for(var t=document.cookie.split(";"),o=0;o<t.length;o++)if(0==t[o].indexOf(" ")&&(t[o]=t[o].substring(1)),t[o].indexOf(e)!=-1){var a=this.getCookie(e),i=location.href.indexOf("lenovouat")!=-1?".lenovouat.com":".lenovo.com.cn";document.cookie=e+"="+a+";path=/;domain="+i+";expires=Thu, 01 Jan 1970 00:00:01 GMT";break}},handleEmojiMap:function(e,t,o,a){var i=new Map;return $(e).each(function(e,s){var n=$(s).html(),r=$(s).attr(t).replace(o,a);i.set(n,r)}),i},emojiConvert:function(e,t,o,a,i){var s=this.handleEmojiMap(t,o,a,i),n={dto:"",emoji_num:0,text_num:0};return e.split("").forEach(function(e){n.dto+=s.get(e)?s.get(e):e,s.get(e)?n.emoji_num++:n.text_num++}),n},extend:function(e){var t=function(){e.call(this)};return Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,e.prototype):t.prototype.__proto__?t.prototype.__proto__=e.prototype:(t.prototype=new e,t.prototype.constructor=t),t},dropSome:function(e,t){return o(e,t,!1)},getSome:function(e,t){return o(e,t,!0)},findFirst:function(e,t){for(var o=null,a=0;a<e.length;a++)if(1==t(e[a])){o=e[a];break}return o},cutPicturePath:function(e,t){if(e&&e.length>0&&t&&t>0){var o=e.lastIndexOf("."),a=e.substring(o,e.length),i=e.substring(0,o);return i+".w"+t+a}return""},debug:function(e){this.isDebug&&window.console&&console.info&&console.info(e)},log:function(e){this.isDebug&&window.console&&console.log&&console.log(e)},warn:function(e){this.isDebug&&window.console&&console.warn&&console.warn(e)},timer:function(e,t,o){e/=1e3;var a=setInterval(function(){var i=0,s=0,n=0,r=0;if(!(e>0))return clearInterval(a),o(),!1;i=Math.floor(e/86400),s=Math.floor(e/3600)-24*i,n=Math.floor(e/60)-24*i*60-60*s,r=Math.floor(e)-24*i*60*60-60*s*60-60*n,s<=9&&(s="0"+s),n<=9&&(n="0"+n),r<=9&&(r="0"+r);var c="";0!=i&&(c+=i+"天 "),c+=s+":"+n+":"+r,t(c,s,n,r),e--},1e3)},checkTelNo:function(e){if(!e)return!1;var t=/^1[3456789]\d{9}$/g;return t.test(e)},formatShortDate:function(e,t){var o=e.split(/[- : \/]/),a=new Date(o[0],o[1]-1,o[2],o[3],o[4],o[5]),i=a.getFullYear(),s=a.getMonth()+1,n=a.getDate(),r=a.getHours(),c=a.getMinutes(),l=a.getSeconds();return s<=9&&(s="0"+s),n<=9&&(n="0"+n),r<=9&&(r="0"+r),c<=9&&(c="0"+c),l<=9&&(l="0"+l),0==t?s+"月"+n+"日":1==t?i+"年"+s+"月"+n+"日":2==t?r+":"+c:3==t?i+"年"+s+"月"+n+"日 "+r+":"+c:4==t?i+"年"+parseFloat(s)+"月"+parseFloat(n)+"日"+r+":"+c+":"+l:s+"月"+n+"日 "+r+":"+c},formatDate:function(e){var t=new Date(e),o=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),s=t.getHours(),n=t.getMinutes(),r=t.getSeconds();return a<=9&&(a="0"+a),i<=9&&(i="0"+i),s<=9&&(s="0"+s),n<=9&&(n="0"+n),r<=9&&(r="0"+r),o+"-"+a+"-"+i+" "+s+":"+n+":"+r},judgeTime:function(e){var t=e.toString(),o=t.substring(0,4),a=t.substring(4,6),i=t.substring(6,8),s=new Date(o+"/"+a+"/"+i),n=new Date,r=n.getFullYear(),c=n.getMonth()+1,l=n.getDate(),d=new Date(r+"/"+c+"/"+l),p=parseInt(d-s)/1e3/60/60/24;return p},formateHour:function(e,t,o){var a=e.replace(/-|T|:/g,"").replace(/\s+/g,""),i="";return 0==this.judgeTime(a)?(t&&t.addClass(o),i=this.formatShortDate(e,2)):i=this.formatShortDate(e),i},mySwiper:function(e){function t(){var e={opacity:.5},t={opacity:1};l>=i.length-c?r.css(e):r.css(t),l<=0?s.css(e):s.css(t)}var o=$(e.fid),a=o.find(e.ul),i=o.find(e.lis),s=o.find(e.leftBtn),r=o.find(e.rightBtn),c=e.count,l=0,d=parseInt(i.css("width")),p=parseInt(i.css("marginRight")),u=parseInt(i.css("marginLeft")),f=0===p?u:p,b=d+f,m=i.length*b;a.css("width",m),t(),r.on("click",function(){if(!(l>=i.length-c)){l++,t();var e=l*-b;n.animate(a[0],e)}}),s.on("click",function(){if(!(l<=0)){l--,t();var e=l*-b;n.animate(a[0],e)}})},animate:function(e,t){clearInterval(e.timer),e.timer=setInterval(function(){var o=8,a=e.offsetLeft;o=a<t?o:-o,a+=o,Math.abs(t-a)>Math.abs(o)?e.style.left=a+"px":(e.style.left=t+"px",clearInterval(e.timer))},20)},pd_getByteLen:function(e){for(var t=0,o=0;o<e.length;o++){var a=e.charAt(o);t+=null!=a.match(/[^\x00-\xff]/gi)?2:1}return t},compareItem:function(e){return function(t,o){var a=t[e],i=o[e];return isNaN(Number(a))||isNaN(Number(i))||(a=Number(a),i=Number(i)),a<i?1:a>i?-1:0}}};e.prototype={constructor:e,getIsHSApp:function(){return/lenovotradeapp/i.test(navigator.userAgent)},getIsLenovoAPP:function(){return/lenovomallapp/i.test(navigator.userAgent)},getShareTitle:function(e){var t=e||window.code,o="";return o="59363"==t||"59364"==t||"59355"==t||"59362"==t||"91865"==t?"只需语音指令，畅享智能生活。联想智能音箱，全心为你！":"我的小伙伴下单立得专属优惠券，快来看看吧！"},private_process_activity:function(){var e=this;if(void 0!==e.activity&&("undefined"==typeof iskcode||0==iskcode)&&!e.baseInfo.isIntegral){var t=e.activity,o=this.nowNumber;switch(e.baseInfo.activityType){case 1:var a=e.activity.PurchasedJson={};a.fromtime=t.buyStartTime,a.totime=t.buyEndTime,a.fromtimeStr=s(t.buyStartTime),a.totimeStr=s(t.buyEndTime),a.productPrice=e.baseInfo.price,a.discount=t.discount,a.purchaseCeiling=t.purchaseCeiling,e.baseInfo.gmsl=t.purchaseCeiling;break;case 2:var i=e.activity.ShanGou={};if(i.startNumber=t.buyStartTime,i.startTimeStr=s(t.buyStartTime),i.endNumber=t.buyEndTime,i.endTimeStr=s(t.buyEndTime),i.purchaseCeiling=t.purchaseCeiling,i.discount=t.discount,o<i.endNumber){var n=$p.nowNumber;1==t.isOrdinaryPurchase&&n<t.buyStartTime?e.baseInfo.gmsl=$p.baseInfo.maxPurchase:1==t.isOrdinaryPurchase&&n<t.reservationStartTime?e.baseInfo.gmsl=$p.baseInfo.maxPurchase:e.baseInfo.gmsl=t.purchaseCeiling,e.baseInfo.showPrice=parseFloat(e.baseInfo.price)}"1"!=shopId&&"3"!=shopId||!(("1"==e.baseInfo.serviceType||"4"==e.baseInfo.serviceType||"6"==e.baseInfo.serviceType)&&"0"==e.baseInfo.isPhysical&&e.baseInfo.isNeedSN||"00f4a0a1-6860-417f-a72b-0545d20d6521"==faid&&"40"==$p.baseInfo.productGroupNo&&"CESVIPA101"==$p.baseInfo.materialNumber)||(e.baseInfo.gmsl=1),0==e.activity.isReservation?i.type=0:1==e.activity.isReservation&&void 0==e.activity.noReservationBuyTime?i.type=1:1==e.activity.isReservation&&e.activity.noReservationBuyTime&&(i.type=2);break;case 3:var r=e.activity.flashYyJson={};r.startNumber=t.activiyStartTime,r.startTimeStr=s(t.activiyStartTime),r.endNumber=t.activityEndTime,r.endTimeStr=s(t.activityEndTime),r.yystartNumber=t.reservationStartTime,r.yystartTimeStr=s(t.reservationStartTime),r.yyendNumber=t.reservationEndTime,r.yyendTimeStr=s(t.reservationEndTime),r.showPriceTime=t.showPriceTime,r.showPriceTimeStr=s(t.showPriceTime),r.purchaseCeiling=t.purchaseCeiling,r.discount=t.discount,o<r.yystartNumber?e.baseInfo.gmsl=$p.baseInfo.maxPurchase:o>r.yystartNumber&&o<r.endNumber&&(e.baseInfo.gmsl=t.purchaseCeiling),"1"!=shopId&&"3"!=shopId||!(("1"==e.baseInfo.serviceType||"4"==e.baseInfo.serviceType||"6"==e.baseInfo.serviceType)&&"0"==e.baseInfo.isPhysical&&e.baseInfo.isNeedSN||"00f4a0a1-6860-417f-a72b-0545d20d6521"==faid&&"40"==$p.baseInfo.productGroupNo&&"CESVIPA101"==$p.baseInfo.materialNumber)||(e.baseInfo.gmsl=1),e.baseInfo.showPrice=parseFloat(e.baseInfo.price),r.yycondition=t.condition,r.isYyShowPrice=t.showPrice;break;case 4:var c=e.activity.ShanGouTimer={};if(c.startNumber=t.buyStartTime,c.startTimeStr=s(t.buyStartTime),c.endNumber=t.buyEndTime,c.endTimeStr=s(t.buyEndTime),c.activiyStartTime=t.activiyStartTime,c.activiyStartTimeStr=s(t.activiyStartTime),c.purchaseCeiling=t.purchaseCeiling,c.discount=t.discount,o<c.endNumber){var l=$p.nowNumber;1==t.isOrdinaryPurchase&&l<t.buyStartTime?e.baseInfo.gmsl=$p.baseInfo.maxPurchase:e.baseInfo.gmsl=t.purchaseCeiling,e.baseInfo.showPrice=parseFloat(e.baseInfo.price)}"1"!=shopId&&"3"!=shopId||!(("1"==e.baseInfo.serviceType||"4"==e.baseInfo.serviceType||"6"==e.baseInfo.serviceType)&&"0"==e.baseInfo.isPhysical&&e.baseInfo.isNeedSN||"00f4a0a1-6860-417f-a72b-0545d20d6521"==faid&&"40"==$p.baseInfo.productGroupNo&&"CESVIPA101"==$p.baseInfo.materialNumber)||(e.baseInfo.gmsl=1);break;case 5:var d=e.activity.YuYue={};d.yystartNumber=t.reservationStartTime,d.yystartTimeStr=s(t.reservationStartTime),d.yyendNumber=t.reservationEndTime,d.yyendTimeStr=s(t.reservationEndTime),d.showPriceTime=t.showPriceTime,d.showPriceTimeStr=s(t.showPriceTime),d.yycondition=t.condition,d.isYyShowPrice=t.showPrice,e.baseInfo.gmsl=$p.baseInfo.maxPurchase,"1"!=shopId&&"3"!=shopId||!(("1"==e.baseInfo.serviceType||"4"==e.baseInfo.serviceType||"6"==e.baseInfo.serviceType)&&"0"==e.baseInfo.isPhysical&&e.baseInfo.isNeedSN||"00f4a0a1-6860-417f-a72b-0545d20d6521"==faid&&"40"==$p.baseInfo.productGroupNo&&"CESVIPA101"==$p.baseInfo.materialNumber)||(e.baseInfo.gmsl=1)}}},processBuyButton:function(){var e={isShow:!0,showText:"立即购买",isDisabled:!0};return 1!=this.baseInfo.marketable?(e.showText="商品已下架",$("#ljgm, #button_dhtz").css({border:"none"})):""!==$p.baseInfo.price||$p.baseInfo.isIntegral||!$p.activity||$p.activity.showPrice||3!=$p.activity.activityType&&5!=$p.activity.activityType?0==this.baseInfo.isShowPrice&&this.baseInfo.mallType==n.mallTypeMapping.lenovoShop.code||""===this.baseInfo.price&&!$p.baseInfo.isIntegral?e.showText="立即咨询":96==$p.baseInfo.salesType&&$p.isBusinessDetail?e.showText="立即咨询":""!==this.baseInfo.price||$p.baseInfo.isIntegral?0==this.baseInfo.isIndependentSale?(e.showText="非独立销售商品",$("#ljgm, #button_dhtz").css({border:"none"})):0==this.isCurrentTerminal()?(e.showText="不在当前平台销售",$("#ljgm, #button_dhtz").css({border:"none"})):this.isLcodeProduct()?(e.showText="L 码购买",e.isDisabled=!1):5!=this.baseInfo.salesType||this.baseInfo.isIntegral?2!=this.baseInfo.salesType||this.baseInfo.isIntegral?this.baseInfo.stock<=0||!this.baseInfo.stock?($p.activity&&$p.activity.activityType&&(2==$p.activity.activityType&&$p.nowNumber>=$p.activity.buyStartTime&&$p.nowNumber<=$p.activity.buyEndTime||3==$p.activity.activityType&&$p.nowNumber>=$p.activity.activiyStartTime&&$p.nowNumber<=$p.activity.activityEndTime)?e.showText="已抢光":e.showText="已售罄",$("#ljgm, #button_dhtz").css({border:"none"})):($(".installment-dropdown-wrapper.checked").length>0?e.showText="分期支付":$p.activity&&$p.activity.activityType&&3==$p.activity.activityType&&$p.nowNumber>=$p.activity.activiyStartTime&&$p.nowNumber<=$p.activity.activityEndTime?e.showText="立即抢购":e.showText="立即购买",e.isDisabled=!1):(e.showText="敬请期待",e.isDisabled=!0,$("#ljgm, #button_dhtz").css({border:"none"})):(e.showText="立即定制",e.isDisabled=!1):(e.showText=" ",e.isDisabled=!0,e.isShow=!1):(e.showText="立即预约",e.isDisabled=!1),e},buyNowEstimateButton:function(){if($p.baseInfo.stock>0&&2!==$p.baseInfo.salesType&&!$p.baseInfo.isIntegral)if($p.baseInfo.deliveryPrice&&$p.baseInfo.deliveryPrice.offerDetailList&&$p.baseInfo.deliveryPrice.offerDetailList.length>0){var e="";e=$p.baseInfo.deliveryCouponIdList.length>0?"领券购买预估":"立即购买预估",$(".tab_deliveryPrice").remove();var t='<div class="estimatedAvailability"><span class="estimatedAvailabilityText">'+e+'</span><span class="estimatedAvailabilityBuyNum">￥'+($p.baseInfo.deliveryPrice&&$p.baseInfo.deliveryPrice.deliverPrice&&$p.baseInfo.deliveryPrice.deliverPrice.price&&parseFloat($p.baseInfo.deliveryPrice.deliverPrice.price))+"</span></div>";$("#ljgm").html(t).removeClass("button-gray").off().on("click",$p.components.buygroup.ljgm).attr("title",e),$("#tab_ljgm span").addClass("tab_deliveryPriceDesc").empty().append("<i>"+e+'</i><i class="tab_deliveryPrice">¥'+parseFloat($p.baseInfo.deliveryPrice.deliverPrice.price)+"</i>").attr("title",e)}else!passport.isLogin()&&$p.baseInfo.isShowPrice&&$p.baseInfo.showPrice&&$p.components.couponCard&&$p.components.couponCard.data.couponObj&&$p.components.couponCard.data.couponObj.couponArr&&$p.components.couponCard.data.couponObj.couponArr.length>0&&($("#ljgm").text("领券购买").attr("title","领券购买"),$("#tab_ljgm span").text("领券购买").attr("title","领券购买"));$p.baseInfo.deliveryPrice&&$p.baseInfo.deliveryPrice.offerDetailList&&$p.baseInfo.deliveryPrice.offerDetailList.length>0&&($('.button-pay:not("#button_dhtz")').attr("latag","latag_pc_detail_bottom_fixed-dsj_orderimmediately_"+window.code),$("#jrgwc").attr("latag","latag_pc_detail_bottom_fixed-dsj_addshopcart_"+window.code))},processAddCartButton:function(){var e={isShow:!0,showText:"加入购物车",isDisabled:!1},t=this.nowNumber;if($(".installment-dropdown-wrapper.checked").length>0)return e.isShow=!1,e;if(window.ischangenew&&1==window.ischangenew&&(e.isShow=!0),"0dc3f6da-d583-4677-afe8-09434b53b286"==faid)e.isShow=!1;else if(/^(2|4|5|6|98)$/gi.test(this.baseInfo.salesType+""))e.isShow=!1;else if(0!=this.baseInfo.stock&&this.baseInfo.stock)if(1!=this.baseInfo.marketable)e.isShow=!1;else if(this.baseInfo.isIntegral)e.isShow=!1;else if(0==this.baseInfo.isPhysical&&30==this.baseInfo.buOwner)e.isShow=!1;else if(0==this.baseInfo.isIndependentSale)e.isShow=!1;else if(0==this.isCurrentTerminal())e.isShow=!1;else if(this.shareCode&&this.shareCode.length>0)e.isShow=!1;else if(this.isLcodeProduct())e.isShow=!1;else if(this.baseInfo.isService>0&&0==this.baseInfo.isPhysical)e.isShow=!1;else if($p.activity&&1==$p.activity.isOrdinaryPurchase&&t<$p.activity.buyStartTime)e.isShow=!0;else if(3==this.baseInfo.activityType){var o=this.activity.flashYyJson.endNumber,a=this.activity.flashYyJson.yystartNumber;t>o||t<a?e.isShow=!0:e.isShow=!1}else if(5==this.baseInfo.activityType){var o=this.activity.YuYue.yyendNumber,i=this.activity.YuYue.yystartNumber;t>o||t<i?e.isShow=!0:e.isShow=!1}else if(2==this.baseInfo.activityType){var s=this.activity.ShanGou;s.endNumber&&this.nowNumber<s.endNumber&&(e.isShow=!1)}else 4==this.baseInfo.activityType&&t>$p.activity.buyStartTime&&t<$p.activity.activiyStartTime?e.isShow=!1:1==this.baseInfo.activityType&&t<this.activity.PurchasedJson.totime?e.isShow=!1:""==this.baseInfo.price?e.isShow=!1:this.baseInfo.isHasPersonal?e.isShow=!0:0==this.baseInfo.isShowPrice&&this.baseInfo.mallType==n.mallTypeMapping.lenovoShop.code?e.isShow=!1:e.isShow=!0;else e.isShow=!1;return e},processNoticeButton:function(){var e={isShow:!1,showText:"到货通知",isDisabled:!1};return this.baseInfo.stock<=0&&0!=this.baseInfo.isPhysical&&!this.isShowYuyue()?e.isShow=!0:""!==$p.baseInfo.price||$p.baseInfo.isIntegral||(e.isShow=!1),e},processShowPrice:function(){var e={isShow:!0,showText:"",isDisabled:!1};return this.isShowYuyue()?e.showText="按需定制":96==$p.baseInfo.salesType&&$p.isBusinessDetail?($(".price-detail-wrap").addClass("hidden"),$("#container_purchase_count").addClass("hidden")):0==this.baseInfo.isShowPrice&&this.baseInfo.mallType==n.mallTypeMapping.lenovoShop.code?(e.showText="暂无报价",$("#container_purchase_count").addClass("hidden")):this.baseInfo.showPrice>0||$p.baseInfo.isIntegral?e.showText=this.baseInfo.showPrice.toFixed(2):""!==this.baseInfo.price||$p.baseInfo.isIntegral?e.showText="":(e.showText="暂无报价",$("#container_purchase_count").addClass("hidden")),e},processShowBuyCount:function(){var e=!0;return""!==$p.baseInfo.price||$p.baseInfo.isIntegral||!$p.activity||$p.activity.showPrice||3!=$p.activity.activityType&&5!=$p.activity.activityType?0==this.baseInfo.isShowPrice&&this.baseInfo.mallType==n.mallTypeMapping.lenovoShop.code||""===this.baseInfo.price&&!$p.baseInfo.isIntegral?e=!1:96==$p.baseInfo.salesType&&$p.isBusinessDetail&&(e=!1):e=!0,e},processBXZPNeedShowList:function(){var e=[],t=this.promotion.gifts;if(t&&0!=t.length)for(var o=this.nowNumber,a=0;a<t.length;a++){var i=t[a],s=this.promotion&&this.promotion.goodsStatus&&this.promotion.goodsStatus[i.code]&&i.stock.salesNumber>0||i.stock.serviceAgencyNumber>0,n=o>i.fromtime&&o<i.totime;s&&n&&e.push(i)}else e=[];return e},processKXZPNeedShowList:function(){var e=[],t=this.promotion.giftsSelectable;if(t&&0!=t.length)for(var o=this.nowNumber,a=0;a<t.length;a++){var i=t[a],s=this.promotion&&this.promotion.goodsStatus&&this.promotion.goodsStatus[i.code]&&i.stock.salesNumber>0||i.stock.serviceAgencyNumber>0,n=o>i.fromtime&&o<i.totime;s&&n&&e.push(i)}else e=[];return e},processXJNeedShowList:function(){var e=[];if(this.promotion&&this.promotion.option&&0!=this.promotion.option.length)for(var t=this.nowNumber,o=0;o<this.promotion.option.length;o++){var a=this.promotion.option[o],i=this.promotion&&this.promotion.goodsStatus&&this.promotion.goodsStatus[a.code]&&a.stock.salesNumber>0||a.stock.serviceAgencyNumber>0,s=t>a.fromtime&&t<a.totime,n=parseFloat(a.discountAmount);i&&s&&e.push($.extend({showPrice:a.productPrice-n},a))}else e=[];return e},processTaocanNeedShowList:function(){var e=[];try{var t=this.promotion;if(t&&t.packs&&0!=t.packs.length)for(var o=(this.nowNumber,0);o<t.packs.length;o++){var a={data:[],packStatus:1};a.data=t.packs[o],$.each(t.packs[o],function(e,t){t.stock.salesNumber<=0&&(a.packStatus=0)}),"7ef1d628-5bd3-4651-9530-793678cc02af"==faid&&$p.isProActivityBefore?a.canSell=!!(1==a.packStatus&&this.isCurrentTerminal()&&this.baseInfo.marketable&&this.baseInfo.salesStock):a.canSell=!!(1==a.packStatus&&this.isCurrentTerminal()&&this.baseInfo.marketable&&this.baseInfo.stock),a.discount=parseFloat(a.data[0].totalDiscountAmount),a.showPrice=parseFloat(a.data[0].totalPrice)-a.discount,e.push(a)}else e=[]}catch(t){n.warn("PDBase.processTaocanNeedShowList错误 --------------->"),n.warn(t),e=[]}return e},fn_Specifications:{SpecificationsRelList:{},SpecificationsRels:"",valeDisabled:function(e,t){var o=this;if(o.SpecificationsRelList){if(0==o.SpecificationsRelList.length)return[];for(var s="string"==typeof e||"number"==typeof e?this.getDefaultSF(e):e,n=[],r=[],c=0;c<s.length;c++){for(var l=[],d=0,p=0;p<specInfo.length;p++)if(specInfo[p].typeid==s[c].typeid){d=p;break}for(var u=0;u<specInfo[c].gsdlist.length;u++)s[c].gsdId==specInfo[d].gsdlist[u].gsdId&&l.push(specInfo[c].gsdlist[u].gcode);l.length>0&&r.push(l)}var f=[];if(r.length>0&&$.each(r[0],function(e,t){for(var o=1,a=1;a<r.length;a++)$.inArray(t,r[a])!=-1&&o++;o==a&&f.push(t)}),f.length>0)var b=f;else var b=[code];return $.each(s,function(e,t){$.each(o.SpecificationsRels,function(e,o){if(t.typeid!=o.typeid){var s=[],r=[];$.each(o.gsdlist,function(e,t){b instanceof Array&&b.length>0&&(b.join("").indexOf(t.gcode)==-1?s.push(t.gsdId):r.push(t.gsdId))}),$.each(i(s),function(e,t){a(t,r)||n.push(t)})}})}),$.each(n,function(e,o){if("function"==typeof t)return t(o)}),n}},valeDefault:function(e,t){if(this.SpecificationsRelList){var o=[];return $.each(this.getDefaultSF(e),function(e,a){o.push(a.gsdId),"function"==typeof t&&t(a.gsdId)}),o}},getgcode:function(e){var t=this;if(e){var o=[];if($.each(e,function(e,a){o=0==o.length?t.getcodesbygg(a.typeid,a.gsdId):t.intersect(o,t.getcodesbygg(a.typeid,a.gsdId))}),1==o.length)return o[0]}if(0==t.SpecificationsRelList.length)return[];var a=[];return $.each(t.SpecificationsRels,function(e,t){$.each(t.gsdlist,function(e,t){a.push(t.gcode)})}),0==a.length?[]:i(a)},getDefaultSF:function(e){var t=[];return $.each(this.SpecificationsRels,function(o,a){$.each(a.gsdlist,function(o,i){i.gcode==e&&t.push({typeid:a.typeid,gsdId:i.gsdId})})}),t},getcodesbygg:function(e,t){var o=this,a=[];return $.each(o.SpecificationsRels,function(o,i){i.typeid==e&&$.each(i.gsdlist,function(e,o){o.gsdId==t&&a.push(o.gcode)})}),a},intersect:function(e,t){var o=[];return $.each(i(e),function(e,i){return a(i,t)?o.push(i):null}),o}},getShareInfo:function(){var e=!1,t=window.location.href,o=n.queryString("sharecode");if(n.removeCookie("c2clenovo"),o&&o.length>0){e=!0,this.shareCode=o,n.addCookie("sharecode",this.shareCode,{expires:15});var a=n.queryString("promotionChannels")||"",i=n.queryString("promotionType")||"0",s=this.shareCode,r=location.hostname,c=r.substring(r.length-14);n.addCookie("c2clenovo",'{"promotionName":"'+$p.baseInfo.name+'","promotionType":'+i+',"promotionChannels":"'+a+'","memberId":"'+s+'", "type": "1"}',{domain:c,expires:15}),n.addCookie("wi","",{domain:c}),n.addCookie("cid","",{domain:c}),n.addCookie("target","",{domain:c}),n.addCookie("channel","",{domain:c}),n.addCookie("source","",{domain:c}),$.ajax({url:n.getItemDomain()+"/api/c2c/sharedby.do",type:"GET",data:{sharecode:this.shareCode,sourceurl:t,promotionChannels:a,promotionName:this.baseInfo.name,promotionType:"0"},dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_c2c_sharedby",timeout:5e3})}return e},isShowYuyue:function(){return this.mallType==n.mallTypeMapping.SMBShop.code&&"0"==this.baseInfo.isShowPrice},isShowActivity:function(){var e=this.baseInfo;return 1==e.marketable&&0!=e.isIndependentSale&&this.isCurrentTerminal()&&2!=e.salesType},isShowShangou:function(){var e=this.baseInfo;return 2==e.activityType&&this.isShowActivity()},isCurrentTerminal:function(){return!0},isLcodeProduct:function(){return!(!window.iskcode||1!==iskcode||window.$p.baseInfo.isIntegral)},loadData:function(e){var t=this;t.loadProductInfo(function(){t.loadPromotionInfo(null,null,function(){t.loadStock(null,null,function(){e&&e.call(t)})})},function(){alert("商品信息加载失败，请刷新页面重试！")})},loadAllProductionInfo:function(e,t,o){var a=this,i=(new Date).getMilliseconds(),s='[{"uri":"/batch/openapi/goods/detail/mget/B00001","param":{"code":'+window.code+',"ss":'+i+'}},{"uri":"/batch/promoapi/api/front/promo-msg/getPromoMsg.jhtm","param":{"gcode":'+window.code+',"terminal":'+window.$p.terminal+',"shopId":'+window.shopId+', "ss":'+i+"}}]";$.ajax({type:"GET",url:n.getItemDomain()+"/batch/get?params="+s,dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_batch_get",timeout:1e4,error:function(e,o){n.debug("load detail error, status is:"+o),n.debug("error is :"),n.debug(e),a.baseInfo.price=a.baseInfo.showPrice=0,t&&"function"==typeof t&&t(o)},complete:function(){n.debug("load detail completed"),o&&"function"==typeof o&&o()},success:function(t){n.debug("load detail success, data is:"),n.debug(t);var o=t.data&&t.data[0]||{},i=o.result&&o.result[code]||{},s=t.data&&t.data[1]||{},r=i.price||{},c=i.detail||{},l=i.deliveryPrice||{};if("200"==t.status&&"0"==o.status){if(c){a.baseInfo.marketable=c.marketable||0,a.baseInfo.lastDownTime=c.lastDownTime||"",a.nowNumber=t.timestamp||0;try{if(!a.baseInfo.marketable&&a.baseInfo.lastDownTime&&a.nowNumber){var d=31536e6,p="";parseFloat(a.baseInfo.lastDownTime)+d<=a.nowNumber&&$p.loadGuangGaoDialogScript(__detailConfig.getApiPath("windowAdvert")+"/lenovo_detail_front/offGoodsRedirect.js",function(){var e=window.offGoodsRedirectList.some(function(e){return e==window.code});e||(p+='<div class="offLineGoodsDialog"><img src="//p1.lefile.cn/fes/cms/2022/08/09/2eb0r92q8c384adhfpdo7txs98cp1k325615.png"><h3>该商品已下架，为您挑选更多优质新品</h3><p>系统跳转中，请稍等…</p></div>',$("#layer_zhezhao").after(p),$(".offLineGoodsDialog, #layer_zhezhao").show(),setTimeout(function(){window.location.href=$p.isBusinessDetail?__detailConfig.getApiPath("enterpriseUrl"):__detailConfig.getApiPath("sgjs")},1e3))})}}catch(e){}try{c.salesType&&100==c.salesType&&(window.location.href=$p.isBusinessDetail?__detailConfig.getApiPath("enterpriseUrl"):__detailConfig.getApiPath("sgjs"))}catch(e){}c.mallType&&(a.baseInfo.mallType=c.mallType,a.baseInfo.shopid=c.mallType,a.baseInfo.isService=c.isService,a.baseInfo.shopid==n.mallTypeMapping.SMBShop.code&&(a.baseInfo.gmsl=999)),a.baseInfo.basePrice=c.basePrice||0,a.baseInfo.isNeedSN=c.isNeedSN||0,a.baseInfo.isPersonalPositions=c.personalPositions,a.baseInfo.isPhysical=c.isPhysical||0,a.baseInfo.buOwner=c.buOwner||0,a.baseInfo.isPcSales=c.isPcSales||0,a.baseInfo.isWapSales=c.isWapSales||0,a.baseInfo.isAppSales=c.isAppSales||0,a.baseInfo.isWeiXinSales=c.isWeiXinSales||0,a.baseInfo.isIndependentSale=c.isIndependentSale||0,a.baseInfo.name=c.name||"",a.baseInfo.isShowPrice=c.isShowPrice||0,a.baseInfo.salesType=c.salesType||0,a.baseInfo.pcPromotion=c.pcPromotion||null,a.baseInfo.materialNumber=c.materialNumber||"",a.baseInfo.productId=c.productId||"",a.baseInfo.typeId=c.typeId||"",a.baseInfo.faId=c.faId||"",a.baseInfo.faType=c.faType||"",a.baseInfo.faCode=c.faCode||"",a.baseInfo.faName=c.faName||"",a.baseInfo.thumbnailsURL=c.thumbnail||"",a.baseInfo.adPicture=c.adPicture||"",a.baseInfo.brief=c.brief||"",a.baseInfo.productGroupNo=c.productGroupCode||"",a.baseInfo.gmsl=c.maxPurchase||5,a.baseInfo.maxPurchase=c.maxPurchase,a.baseInfo.purchase=i.purchase||0,a.baseInfo.categoryCode=c.categoryCode,a.baseInfo.logistics=c.logistics||"",a.baseInfo.serviceType=c.serviceType||0,a.baseInfo.isXiaoshida=c.isHouda||!1,c.thumbnailsURL&&(a.baseInfo.thumbnailsURL=location.protocol+c.thumbnailsURL),a.baseInfo.isCombinedGoods=c.isCombinedGoods||!1,a.baseInfo.combinedGoods=c.combinedGoods||[],a.baseInfo.isUpgradeGoods=c.isUpgradeGoods||!1,a.baseInfo.upgradeGoods=c.upgradeGoods||[],a.baseInfo.isIndependentStock=c.isIndependentStock||!1,a.baseInfo.extensionTerminal=c.extensionTerminal||"",a.baseInfo.extensionContent=c.extensionContent||""}r&&(a.baseInfo.price_basePrice=r.basePrice||0),l&&"{}"!=JSON.stringify(l)&&(a.baseInfo.deliveryPrice=l,a.baseInfo.deliveryCouponIdList=[]),1==s.success&&(a.baseInfo.pcPromotion=s.t||null),i.activity&&i.activity.activityType?(a.activity=i.activity,a.baseInfo.activityType=i.activity.activityType,a.activity.purchaseCeiling>a.baseInfo.gmsl?a.activity.purchaseCeiling=a.baseInfo.gmsl:a.baseInfo.gmsl=a.activity.purchaseCeiling):(a.activity=null,a.baseInfo.activityType=0),1==a.terminal&&r.P_C&&r.P_C.C_1?(a.baseInfo.price=a.baseInfo.showPrice=r.P_C.C_1.P_0&&r.P_C.C_1.P_0.DV&&r.P_C.C_1.P_0.DV.V||"",a.baseInfo.appPrice=r.P_C.C_3.P_0&&r.P_C.C_3.P_0.DV&&r.P_C.C_3.P_0.DV.V||""):a.baseInfo.price="","1"!=shopId&&"3"!=shopId||!(("1"==a.baseInfo.serviceType||"4"==a.baseInfo.serviceType||"6"==a.baseInfo.serviceType)&&"0"==a.baseInfo.isPhysical&&a.baseInfo.isNeedSN||"00f4a0a1-6860-417f-a72b-0545d20d6521"==faid&&"40"==$p.baseInfo.productGroupNo&&"CESVIPA101"==$p.baseInfo.materialNumber)||(a.baseInfo.gmsl=1),"90"==a.baseInfo.buOwner&&(a.baseInfo.gmsl=1),a.private_process_activity()}e&&"function"==typeof e&&e(t)},beforeSend:function(){a.nowLoadingTime=new Date-0,isloadingTipTimer=setTimeout(function(){a.loading=layer.load(2,{content:"极速加载中...",success:function(e){e.find(".layui-layer-content").css({paddingTop:"90px",textAlign:"center",backgroundPositionX:"center","font-size":"14px",color:"#ffffff",margin:"0 auto"}),$(".layui-layer-shade").css({opacity:"0.6"})}})},2e3)}})},loadProductInfo:function(e,t,o){var a=this;$.ajax({type:"GET",url:"/cache/detail?code="+code+"&ss="+(new Date).getMilliseconds(),dataType:"json",error:function(e,o){n.debug("load detail error, status is:"+o),n.debug("error is :"),n.debug(e),a.baseInfo.price=a.baseInfo.showPrice=0,t&&"function"==typeof t&&t()},complete:function(){n.debug("load detail completed"),o&&"function"==typeof o&&o()},success:function(t){n.debug("load detail success, data is:"),n.debug(t);var o=t.data&&t.data[0]&&t.data[0].detail;"200"==t.status&&(o&&(o.mallType&&(a.baseInfo.mallType=o.mallType,a.baseInfo.shopid=o.mallType,a.baseInfo.isService=o.isService,a.baseInfo.shopid==n.mallTypeMapping.SMBShop.code&&(a.baseInfo.gmsl=999)),a.baseInfo.isNeedSN=o.isNeedSN||0,a.baseInfo.isPersonalPositions=o.personalPositions,a.baseInfo.isPhysical=o.isPhysical||0,a.baseInfo.buOwner=o.buOwner||0,a.baseInfo.isPcSales=o.isPcSales||0,a.baseInfo.isWapSales=o.isWapSales||0,a.baseInfo.isAppSales=o.isAppSales||0,a.baseInfo.isWeiXinSales=o.isWeiXinSales||0,a.baseInfo.isIndependentSale=o.isIndependentSale||0,a.baseInfo.name=o.name||"",a.baseInfo.isShowPrice=o.isShowPrice||0,a.baseInfo.salesType=o.salesType||0,a.baseInfo.pcPromotion=o.pcPromotion||null,a.baseInfo.materialNumber=o.materialNumber||"",a.baseInfo.productId=o.productId||"",a.baseInfo.faId=o.faId||"",a.baseInfo.faCode=o.faCode||"",a.baseInfo.faName=o.faName||"",a.baseInfo.thumbnailsURL="",a.baseInfo.productGroupNo=o.productGroupNo||"",a.baseInfo.gmsl=o.maxPurchase||5,a.baseInfo.serviceType=o.serviceType||0,o.thumbnailsURL&&(a.baseInfo.thumbnailsURL=location.protocol+o.thumbnailsURL),a.baseInfo.extensionTerminal=o.extensionTerminal||"",a.baseInfo.extensionContent=o.extensionContent||""),a.curDatetime=t.curDatetime,a.nowNumber=new Date(a.curDatetime.replace(/-/g,"/"))-0,t.data[0].activity&&t.data[0].activity.activityType?(a.activity=t.data[0].activity,a.baseInfo.activityType=t.data[0].activity.activityType):(a.activity=null,a.baseInfo.activityType=0),1==a.terminal&&t.data[0].pc?a.baseInfo.price=a.baseInfo.showPrice=t.data[0].pc:2==a.terminal&&t.data[0].wap?a.baseInfo.price=a.baseInfo.showPrice=t.data[0].wap:3==a.terminal&&t.data[0].app?a.baseInfo.price=a.baseInfo.showPrice=t.data[0].app:4==a.terminal&&t.data[0].weixin?a.baseInfo.price=a.baseInfo.showPrice=t.data[0].weixin:a.baseInfo.price=0,a.baseInfo.marketable=t.data[0].marketable||0,"1"!=shopId&&"3"!=shopId||!(("1"==a.baseInfo.serviceType||"4"==a.baseInfo.serviceType||"6"==a.baseInfo.serviceType)&&"0"==a.baseInfo.isPhysical&&a.baseInfo.isNeedSN||"00f4a0a1-6860-417f-a72b-0545d20d6521"==faid&&"40"==$p.baseInfo.productGroupNo&&"CESVIPA101"==$p.baseInfo.materialNumber)||(a.baseInfo.gmsl=1),
"90"==a.baseInfo.buOwner&&(a.baseInfo.gmsl=1),a.private_process_activity()),e&&"function"==typeof e&&e(t)}})},getCombinedGoodskclist:function(e,t,o,a){var i="undefined"!=typeof $p.presellObj&&"{}"!=JSON.stringify($p.presellObj)&&"undefined"!=typeof $p.presellObj.presellType&&1==$p.presellObj.presellType?{buyNum:e,code:window.code,longPresell:"98"}:{buyNum:e,code:window.code};$.ajax({type:"GET",url:__detailConfig.getApiPath("openUrl")+"/goods/stock/estimate",data:i,dataType:"jsonp",jsonp:"jsonpCallback",jsonpCallback:"jQueryJSONP_stock_getStockInfo",timeout:5e3,complete:a,error:o,success:t})},loadStock:function(e,t,o){var a=this;if(1!=a.baseInfo.marketable)return void(o&&"function"==typeof o&&o());var i=a.nowNumber,s="";s=a.baseInfo.isIntegral?"[{activityType:0, productCode:"+code+"}]":a.baseInfo.activityType>0&&i<a.activity.buyEndTime?1==$p.activity.isOrdinaryPurchase&&i<$p.activity.buyStartTime?"[{activityType:0, productCode:"+code+"}]":5==a.baseInfo.activityType?"[{activityType:0, productCode:"+code+"}]":"[{activityType:"+(4==a.baseInfo.activityType?2:a.baseInfo.activityType)+", productCode:"+code+"}]":"undefined"!=typeof $p.presellObj&&"{}"!=JSON.stringify($p.presellObj)&&"undefined"!=typeof $p.presellObj.presellType&&1==$p.presellObj.presellType?"[{activityType:98, productCode:"+code+"}]":"[{activityType:0, productCode:"+code+"}]","98"!=a.baseInfo.salesType||a.baseInfo.isIntegral?!$p.baseInfo.isCombinedGoods&&!$p.baseInfo.isUpgradeGoods||$p.baseInfo.isIndependentStock?$.ajax({type:"POST",url:n.getItemDomain()+"/stock/getStockInfo.jhtm?ss="+(new Date).getMilliseconds(),data:{proInfos:s},dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_stock_getStockInfo",timeout:5e3,complete:function(){n.debug("load stock completed"),o&&"function"==typeof o&&o()},error:function(e,o){n.debug("load stock error, status is:"+o),n.debug("error is :"),n.debug(e),t&&t(e)},success:function(t){n.debug("load stock success, stock data is:"),n.debug(t);var o=t&&t[0];o&&(a.baseInfo.stock=parseInt(o.salesNumber||0),a.baseInfo.waterLevelDesc=o.waterLevelDesc),e&&(t.detailStockType=0,e(t))}}):a.getCombinedGoodskclist($("#buy_number").val(),function(t){n.debug("load stock success, stock data is:"),n.debug(t);var o=t&&t.result;o&&o.t?a.baseInfo.stock=o.t:a.baseInfo.stock=0,e&&(t.detailStockType=0,e(t))},function(e,o){n.debug("load stock error, status is:"+o),n.debug("error is :"),n.debug(e),t&&t(e)},function(){n.debug("load stock completed"),o&&"function"==typeof o&&o()}):a.loadO2OCityListAndStock(s,e,t,o)},loadO2OCityListAndStock:function(e,t,o,a){var i=this,s=function(e){var t=e.coverageInventories,o=[],a=!1,s=!1,n=!1,r="normal";try{for(var c=0;c<t.length;c++){a=!1;var l=t[c];r=l.inventory>0?"normal":"gray",l.className=r;for(var d=0;d<o.length;d++)if(l.provinceCode==o[d].provinceCode){a=!0;for(var p=o[d].cities,u=0;u<p.length;u++)if(s=!1,l.cityCode==p[u].cityCode){s=!0;for(var f=p[u].areas,b=0;b<f.length;b++)if(n=!1,l.areaCode==f[b].areaCode){n=!0,f[b].countries.push({countryCode:l.countryCode,countryName:l.countryName});break}if(!n){var m={countryCode:l.countryCode,countryName:l.countryName};f.push({area:l.area,areaCode:l.areaCode,city:l.city,cityCode:l.cityCode,className:l.className,countries:[m]})}break}if(!s){var g={countryCode:l.countryCode,countryName:l.countryName},h={city:l.city,cityCode:l.cityCode,areas:[{area:l.area,areaCode:l.areaCode,city:l.city,cityCode:l.cityCode,className:l.className,countries:[g]}]};o[d].cities.push(h)}}if(!a){var y={countryCode:l.countryCode,countryName:l.countryName},v={city:l.city,cityCode:l.cityCode,areas:[{area:l.area,areaCode:l.areaCode,city:l.city,cityCode:l.cityCode,className:l.className,countries:[y]}]};o.push({provinceCode:l.provinceCode,province:l.province,cities:[v]})}}i.baseInfo.stock=e.totalNum}catch(e){}return o},r=function(t){return $.ajax({type:"POST",url:n.getItemDomain()+"/stock/getInventory.jhtm",data:{proInfos:e},dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_stock_getInventory",timeout:5e3})};r().done(function(e){n.debug("load thinko2o stock success, data is :"),n.debug(e),e&&e[0]&&"success"==e[0].message&&e[0].coverageInventories&&e[0].coverageInventories.length>0&&(i.baseInfo.thinko2oCities=s(e[0])),t&&(e.detailStockType=1,t(e))}).fail(function(e,t){n.debug("load thinko2o stock error, status is :"+t),n.debug("error info is :"),n.debug(e),o&&o(e,t)}).always(function(){n.debug("load thinko2o stock completed"),a()})},loadFrontStock:function(e,t,o,a,i){var s=this,r="",t=t||!1;return 1!=s.baseInfo.marketable?void(i&&"function"==typeof i&&i()):(r=$p.baseInfo.activityType>0&&$p.nowNumber<$p.activity.buyEndTime?1==$p.activity.isOrdinaryPurchase&&$p.nowNumber<$p.activity.buyStartTime?'[{"activityType": 0, "productCode":'+code+', "personalMake": '+t+"}]":5==$p.baseInfo.activityType?'[{"activityType":0, "productCode":'+code+', "personalMake": '+t+"}]":'[{"activityType":'+(4==$p.baseInfo.activityType?2:$p.baseInfo.activityType)+', "productCode":'+code+', "personalMake": '+t+"}]":"undefined"!=typeof $p.presellObj&&"{}"!=JSON.stringify($p.presellObj)&&"undefined"!=typeof $p.presellObj.presellType&&1==$p.presellObj.presellType?'[{"activityType":98, "productCode":'+code+', "personalMake": '+t+"}]":'[{"activityType":0, "productCode":'+code+', "personalMake": '+t+"}]",void(!$p.baseInfo.isCombinedGoods&&!$p.baseInfo.isUpgradeGoods||$p.baseInfo.isIndependentStock?$.ajax({type:"POST",url:n.getItemDomain()+"/stock/getStockNew.jhtm?ss="+(new Date).getMilliseconds(),data:{proInfos:r,addrinfo:e},dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_stock_getFrontStockInfo",timeout:5e3,complete:function(){n.debug("load frontStock completed"),i&&"function"==typeof i&&i()},error:function(e,t){n.debug("load frontStock error, status is:"+t),n.debug("error is :"),n.debug(e),a&&a(e)},success:function(e){n.debug("load frontStock success, frontStock data is:"),n.debug(e);var t=e&&e[0];t&&(s.baseInfo.salesStock=parseInt(t.salesNumber||0),s.baseInfo.frontStock=parseInt(t.serviceAgencyNumber||0),s.baseInfo.stock=s.baseInfo.salesStock+s.baseInfo.frontStock),o&&o(t)}}):s.getCombinedGoodskclist($("#buy_number").val(),function(e){n.debug("load stock success, stock data is:"),n.debug(e);var t=e&&e.result;t&&t.t?s.baseInfo.stock=t.t:s.baseInfo.stock=0,o&&(e.detailStockType=0,o(e))},function(e,t){n.debug("load stock error, status is:"+t),n.debug("error is :"),n.debug(e),a&&a(e)},function(){n.debug("load stock completed"),i&&"function"==typeof i&&i()})))},loadDefaultPsAddress:function(e,t,o){$.ajax({url:__detailConfig.getApiPath("ljgm_js")+"useraddr/dispatchAddr.jhtm",data:e,dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_dispatchAddr",timeout:5e3,error:function(e,t){n.debug("load dispatchAddr error, status is :"+t),n.debug("error info is :"),n.debug(e),o&&"function"==typeof o&&o()},success:function(e){n.debug("load dispatchAddr success, data is :"),n.debug(e),t&&"function"==typeof t&&t(e)}})},loadDefaultAddress:function(e,t){$.ajax({url:__detailConfig.getApiPath("ljgm_js")+"cdtAddrQuery.jhtm",dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_cdtAddrQuery",timeout:5e3,error:function(e,o){n.debug("load cdtAddrQuery error, status is :"+o),n.debug("error info is :"),n.debug(e),t&&"function"==typeof t&&t()},success:function(t){n.debug("load cdtAddrQuery success, data is :"),n.debug(t),e&&"function"==typeof e&&e(t)}})},loadArrivalTime:function(e,t,o,a,i){$.ajax({url:n.getItemDomain()+"/stock/cdt.jhtm",data:e,dataType:"jsonp",jsonp:"callback",jsonpCallback:o||"jQueryJSONP_stock_cdt",timeout:5e3,error:function(e,t){n.debug("load cdt error, status is :"+t),n.debug("error info is :"),n.debug(e),a&&"function"==typeof a&&a()},success:function(e){n.debug("load cdt success, data is :"),n.debug(e),t&&"function"==typeof t&&t(e)}})},loadHoudaData:function(e,t,o,a){$.ajax({url:__detailConfig.getApiPath("openUrl")+"/goods/houda/mget/B00001",data:e,dataType:"jsonp",jsonp:"jsonpCallback",jsonpCallback:"jQueryJSONP_houda_mget",timeout:5e3,error:function(e,t){n.debug(e),o&&"function"==typeof o&&o()},success:function(e){n.debug(e),t&&"function"==typeof t&&t(e)}})},loadMyProvinceAddress:function(e,t){$.ajax({url:__detailConfig.getApiPath("ljgm_js")+"region/getprovince.jhtm",dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_getprovince",timeout:5e3,error:function(e,o){n.debug("load province error, status is :"+o),n.debug("error info is :"),n.debug(e),t&&"function"==typeof t&&t()},success:function(t){n.debug("load province success, data is :"),n.debug(t),e&&"function"==typeof e&&e(t,"city_tab_province")}})},loadMyCityAddress:function(e,t,o){$.ajax({url:__detailConfig.getApiPath("ljgm_js")+"region/getcities.jhtm",data:{provincename:e},dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_getcities",timeout:5e3,error:function(e,t){n.debug("load cities error, status is :"+t),n.debug("error info is :"),n.debug(e),o&&"function"==typeof o&&o()},success:function(e){n.debug("load cities success, data is :"),n.debug(e),t&&"function"==typeof t&&t(e,"city_tab_city")}})},loadMyRegionAddress:function(e,t,o,a){$.ajax({url:__detailConfig.getApiPath("ljgm_js")+"region/getcounties.jhtm",data:{provincename:e,cityname:t},dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_getcounties",timeout:5e3,error:function(e,t){n.debug("load counties error, status is :"+t),n.debug("error info is :"),n.debug(e),a&&"function"==typeof a&&a()},success:function(e){n.debug("load counties success, data is :"),n.debug(e),o&&"function"==typeof o&&o(e,"city_tab_area")}})},loadPromotionInfo:function(e,t,o){var a=this;return 1!=a.baseInfo.marketable?void(o&&"function"==typeof o&&o()):void $.ajax({type:"GET",data:{code:code,salesPlat:a.terminal,lenovoId:passport&&passport.isLogin()?passport.cookie.lenovoId:n.getCookie("leid")},url:n.getItemDomain()+"/api/promotions?"+(new Date).getMilliseconds(),dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_promotions",timeout:5e3,complete:function(){n.debug("load promotioninfo completed"),o&&"function"==typeof o&&o()},error:function(e,o){n.debug("load promotioninfo error, status is :"+o),n.debug("error info is :"),n.debug(e),a.promotion={},t&&"function"==typeof t&&t()},success:function(t){if(n.debug("load promotioninfo success, data is :"),n.debug(t),t&&"200"==t.status&&t.data){var o=t.data;$.extend(a.promotion,o)}e&&"function"==typeof e&&e(t)}})},checkSrdz:function(e,t,o){var a=this,i=(new Date).getMilliseconds();return 1!=a.baseInfo.marketable?void(o&&"function"==typeof o&&o()):void $.ajax({url:__detailConfig.getApiPath("openUrl")+"/goods/personal/position?code="+window.code+(n.queryString("mainPicCode")?"&mainPicCode="+(n.queryString("mainPicCode")||"")+'&materialNumber="'+$p.baseInfo.materialNumber+(n.queryString("categoryCode")?"&categoryCode="+(n.queryString("categoryCode")||""):""):"")+"&ss="+i,dataType:"jsonp",jsonp:"jsonpCallback",jsonpCallback:"jQueryJSONP_personal_query",timeout:5e3,complete:function(){n.debug("load Srdz completed"),o&&"function"==typeof o&&o()},error:function(e,o){a.baseInfo.positionData={},a.baseInfo.isHasPersonal=0,n.debug("load Srdz error, status is :"+o),n.debug("error info is :"),n.debug(e),t&&"function"==typeof t&&t()},success:function(t){n.debug("load promotioninfo success, data is :"),n.debug(t),t&&"0"==t.status&&t.result?(a.baseInfo.isHasPersonal=1,a.baseInfo.positionData=JSON.parse(JSON.stringify(t.result))):(a.baseInfo.isHasPersonal=0,a.baseInfo.positionData={}),e&&"function"==typeof e&&e(t)}})},jsonpIsSetRemind:function(e,t,o){$.ajax({type:"GET",url:__detailConfig.getApiPath("setRemind")+"/api/seckillApi/getRemindByGoodsCode.jhtm",data:{goodsCode:code,seckillStartTime:e},dataType:"jsonp",jsonp:"callbackparam",success:t,error:o||function(e){n.debug("the ajax -> jsonpIsSetRemind is fail"+e.responseText+"--"+e.statusText)}})},jsonpRemindOption:function(e,t,o,a,i){$.ajax({type:"GET",url:__detailConfig.getApiPath("setRemind")+"/api/seckillApi/setRemind.jhtm",data:{goodsCode:code,seckillStartTime:e,shopId:shopId,phone:o||"",remindStatus:t},dataType:"jsonp",jsonp:"callbackparam",jsonpCallback:"callbackparam",success:a,error:i||function(e){n.debug("the ajax -> jsonpRemindOption is fail"+e.responseText+"--"+e.statusText)}})},jsonpIsTuangouUser:function(e,t){$.ajax({type:"GET",url:__detailConfig.getApiPath("gwc")+"tuanstatus.jhtml?ss="+(new Date).getMilliseconds(),data:{gcode:code,activityId:this.baseInfo.activityType},dataType:"jsonp",jsonp:"callbackparam",success:e,error:t||function(e){n.debug("the ajax -> jsonpIsTuangouUser is fail"+e.responseText+"--"+e.statusText)}})},jsonpIsBookUser:function(e,t){$.ajax({type:"GET",url:__detailConfig.getApiPath("gwc")+"bookStatus.jhtml",data:{plat:this.terminal,activityId:this.activity.activityId,gcode:code},dataType:"jsonp",jsonp:"callbackparam",success:e,error:function(){n.debug("获取预约资格失败！"),t&&"function"==typeof t&&t()}})},jsonpIsYyUser:function(e,t){$.ajax({type:"GET",url:__detailConfig.getApiPath("setRemind")+"/api/activity/isHaveReservation.jhtm",data:{shopId:window.shopId,activityId:this.activity.activityId,gcode:code},dataType:"jsonp",jsonp:"callbackparam",success:e,error:function(){n.debug("获取预约资格失败！"),t&&"function"==typeof t&&t()}})},jsonpGetYyNum:function(e,t){$.ajax({type:"GET",url:__detailConfig.getApiPath("setRemind")+"/api/activity/getSeckillActivityReservationUserNum.jhtm",data:{shopId:window.shopId,gcode:code},dataType:"jsonp",jsonp:"callbackparam",success:e,error:function(){n.debug("查询当前预约人数失败！"),t&&"function"==typeof t&&t()}})},jsonpYuyue:function(e,t,o){$.ajax({type:"GET",url:__detailConfig.getApiPath("setRemind")+"/api/activity/addReservation.jhtm",data:{terminal:$p.terminal,shopId:window.shopId,gcode:code,phone:e||null},dataType:"jsonp",jsonp:"callbackparam",success:t,error:function(){n.debug("发送预约信息失败！"),o&&"function"==typeof o&&o()}})},jsonpGetGMZG:function(e,t,o){$.ajax({type:"GET",url:__detailConfig.getApiPath("setRemind")+"/api/activity/getReservationQualification.jhtm",data:{shopId:window.shopId,gcode:code},dataType:"jsonp",jsonp:"callbackparam",success:e,error:function(){n.debug("查询购买资格失败！"),o&&"function"==typeof o&&o()}})},jsonpShangouQueue:function(e,t,o){$.ajax({type:"GET",url:__detailConfig.getApiPath("sg")+"getToken.jhtm?ss="+(new Date).getMilliseconds(),data:e,dataType:"jsonp",jsonp:"callback",success:t,error:function(){n.debug("申请Token失败！"),o&&"function"==typeof o&&o()}})},jsonpShangouGwc:function(e,t,o){$.ajax({type:"GET",url:__detailConfig.getApiPath("sg_js")+"napi/seckill/seckill_qiang.jhtm",data:e,dataType:"jsonp",jsonp:"callback",success:t,error:function(){n.debug("闪购排队加入购物车失败！"),o&&"function"==typeof o&&o()}})},jsonpAddItemToCart:function(e,t,o){$.ajax({type:"GET",url:__detailConfig.getApiPath("gwc")+"napi/cart/additemtocart.jhtm?ss="+(new Date).getMilliseconds()+(window.mapPreventValue&&window.mapPreventValue["isDetailWebPrevent"+window.mapPreventValue.index]?"&"+window.mapPreventValue.params+"&"+window.mapPreventValue.params1:""),data:e,dataType:"jsonp",jsonp:"callbackparam",success:t,error:o||function(){n.debug("additemtocart the ajax is fail")},timeout:4e3})},jsonpNoticeSendSms:function(e,t,o){$.ajax({type:"GET",url:n.getItemDomain()+"/stock/sendsms.jhtm",data:e,dataType:"jsonp",jsonp:"jsonpcallback",jsonpCallback:"jQueryJSONP_stock_sendsms",timeout:5e3,success:t,error:o||function(){n.debug("到货通知-> 发送短信失败"),layer.msg("系统繁忙，请稍后再试")}})},jsonpNoticeSave:function(e,t,o){$.ajax({type:"POST",url:e.url||n.getItemDomain()+"/stock/subscribe.jhtm",data:e,dataType:"jsonp",jsonp:"jsonpcallback",jsonpCallback:"jQueryJSONP_stock_subscribe",timeout:5e3,success:t,error:o})},loadServiceInfo:function(e,t,o){$.ajax({url:e.url||n.getItemDomain()+"/cache/servicelist",data:{code:code,terminal:this.terminal},dataType:"jsonp",jsonp:"jsonpCallback",jsonpCallback:"jQueryJSONP_cache_servicelist",timeout:5e3,success:t,error:o||function(){n.debug("请求服务信息失败！")}})},loadHostList:function(e,t,o){$.ajax({type:"GET",url:e.url||n.getItemDomain()+"/api/products/gethotlist.jhtm?ss="+(new Date).getMilliseconds(),data:{w:205,h:205,salesPlat:this.terminal},dataType:"json",success:t,error:o||function(){window.PDUtil.warn("hotlist ajax error")}})},loadMyFavorite:function(e,t,o){$.ajax({type:"GET",url:n.getItemDomain()+"/api/myfavorites/"+e.url+(new Date).getMilliseconds(),data:{gcode:code,plat:this.terminal},dataType:"jsonp",jsonp:"callback",timeout:5e3,success:t,error:o})},loadPresellInfo:function(e,t,o){if(2!==$p.baseInfo.salesType)return void(t&&t());var a={shopId:$p.baseInfo.mallType,gcode:code,terminal:$p.terminal};e=$.extend(a,e||{}),$.ajax({type:"GET",url:__detailConfig.getApiPath("presell"),data:e,dataType:"jsonp",jsonp:"callbackparam",success:t,error:o||function(){alert("获取预售信息失败, 请稍后再试")}})},jsonpSaveBookShangouTel:function(e,t,o){$.ajax({type:"GET",url:__detailConfig.getApiPath("gwc")+"updateBookPhone.jhtml?ss="+(new Date).getMilliseconds()+"&plat="+this.terminal,data:e,dataType:"jsonp",jsonp:"callbackparam",success:t,error:function(){n.debug("保存预约闪购手机号时出现错误！"),o&&"function"==typeof o&&o()}})},jsonpSaveYyTel:function(e,t,o){$.ajax({type:"GET",url:__detailConfig.getApiPath("setRemind")+"/api/activity/modifyUserReservationPhoneNum.jhtm?ss="+(new Date).getMilliseconds(),data:e,dataType:"jsonp",jsonp:"callbackparam",success:t,error:function(){n.debug("保存预约闪购手机号时出现错误！"),o&&"function"==typeof o&&o()}})},jsonpEvaluateList:function(e,t,o,a,i,s,n,r){var o=o||window.code||"",c=t||1,l=a||0,d=i||"",p=e||window.code||"",s=s||2;$.ajax({url:__detailConfig.getApiPath("comment")+"/comment/frontV2/commentDetail",dataType:"jsonp",jsonp:"jsonpcallback",timeout:5e3,data:{gcodes:p,currPage:c,productId:o,level:l,lables:d,only:s},success:n,error:r})},jsonpEvaluateRate:function(e,t,o){$.ajax({url:__detailConfig.getApiPath("comment")+"/comment/frontV2/favorableRate",dataType:"jsonp",jsonp:"jsonpcallback",jsonpCallback:"evaluateNumber",timeout:5e3,data:{gcode:e||window.code||""},success:t,error:o})},jsonpAddJF:function(e,t){$.ajax({url:__detailConfig.getApiPath("addjf"),dataType:"jsonp",jsonp:"jsonpcallback",timeout:2e3,data:{},success:e,error:t})},ajaxCheckSNCode:function(e,t,o){var a=this;$.ajax({type:"GET",url:n.getItemDomain()+"/api/products/checksn",data:{sn:e,num:a.baseInfo.materialNumber},dataType:"jsonp",jsonp:"callback",timeout:15e3,success:function(e){t(e)},error:function(){o&&o()}})},ajaxCheckIMEICode:function(e,t,o){$.ajax({type:"GET",url:__detailConfig.getApiPath("openUrl")+"/goods/detail/checkImei",data:{imei:e,code:window.code},dataType:"jsonp",jsonp:"jsonpCallback",timeout:15e3,success:function(e){t(e)},error:function(){o&&o()}})},ajaxCheckBacknewmtm:function(e,t,o){$.ajax({type:"GET",url:__detailConfig.getApiPath("openUrl")+"/goods/backnew/checkbacknewmtm",data:{sn:e,goodsCode:$p.baseInfo.materialNumber},dataType:"jsonp",jsonp:"jsonpCallback",jsonpCallback:"jQueryJSONP_api_checkbacknewmtm",timeout:15e3,success:function(e){t(e)},error:function(){o&&o()}})},jsonpGetVirtual:function(e,t,o){var a=this,i=window.code,s=$p.baseInfo.virtualAreaCode;a.baseInfo.virtualPrice=0,$.ajax({url:__detailConfig.getApiPath("openUrl")+"/goods/price/get",dataType:"jsonp",jsonp:"jsonpCallback",jsonpCallback:"jQueryJSONP_price_get",data:{code:i,aid:s},success:function(e){if(0==e.status){var t=e.result&&e.result.V_C;if("{}"===JSON.stringify(t))a.baseInfo.isIntegral=0;else{var o=t.C_1||[];"[]"===JSON.stringify(o)?a.baseInfo.isIntegral=0:("V_0"==a.baseInfo.virtualAreaCode?a.baseInfo.virtualPrice=parseFloat(o.V_0&&o.V_0.DV&&o.V_0.DV.V)||0:"V_1"==a.baseInfo.virtualAreaCode?a.baseInfo.virtualPrice=parseFloat(o.V_1&&o.V_1.DV&&o.V_1.DV.V)||0:"V_3"==a.baseInfo.virtualAreaCode?a.baseInfo.virtualPrice=parseFloat(o.V_3&&o.V_3.DV&&o.V_3.DV.V)||0:a.baseInfo.virtualPrice=0,a.baseInfo.showPrice=a.baseInfo.price=parseFloat(o.P_0&&o.P_0.DV&&o.P_0.DV.V)||0,a.baseInfo.gmsl=a.baseInfo.maxPurchase||5,"1"!=shopId&&"3"!=shopId||!(("1"==a.baseInfo.serviceType||"4"==a.baseInfo.serviceType||"6"==a.baseInfo.serviceType)&&"0"==a.baseInfo.isPhysical&&a.baseInfo.isNeedSN||"00f4a0a1-6860-417f-a72b-0545d20d6521"==faid&&"40"==$p.baseInfo.productGroupNo&&"CESVIPA101"==$p.baseInfo.materialNumber)||(a.baseInfo.gmsl=1))}}},complete:function(){n.debug("load vitualprice completed"),o&&"function"==typeof o&&o()},error:function(){n.log("load vtprice error"),t&&t()}})},jsonpgetIntegral:function(e,t,o){var a=window.passport.ticket,i=e&&e.type||"";$.ajax({url:__detailConfig.getApiPath("jfUrl")+"/dubboScore/searchTotal.jhtml",dataType:"jsonp",jsonp:"callback",jsonpCallback:"flightHandlers",timeout:4e3,data:{sts:a,type:i},success:t,error:function(){n.log("get jf error"),alert("系统繁忙，请稍后重试！"),o&&"function"==typeof o&&o()}})},jsonpGuige:function(e,t){$.ajax({url:__detailConfig.getApiPath("openUrl")+"/goods/category/get",type:"get",dataType:"jsonp",jsonp:"jsonpCallback",jsonpCallback:"jQueryJSONP_category_get",data:{code:window.code,version:"1.0"},success:e,error:t})},jsonpYb:function(e,t){$.ajax({url:__detailConfig.getApiPath("yb")+"api/front/activity/getActivityMsg.jhtm",type:"get",dataType:"jsonp",jsonp:"callbackparam",jsonpCallback:"jQueryJSONP_getActivityMsg",data:{gcode:window.code,terminal:$p.terminal,shopId:shopId},success:e,error:t})},jsonpCoupon:function(e,t){},createSwitcher:function(){$("#detail_left").append('<span id="show3DBtn" class="animated bounceIn" style="display: none;"></span><div id="videoTo3D" style="display: none;"><i class="video_3D_switch">3D</i><i class="video_3D_switch">视频</i></div><div id="single_3D" class="single_switch" style="display: none;">3D</div><div id="single_video" class="single_switch on" style="display: none;"><img src="../series/product/xiaoxin/images/video-icon.png"></div>')},jsonpBuyBefore:function(e,t,o){$.ajax({url:__detailConfig.getApiPath("ljgm_js")+"napi/cart/directbuy.jhtm"+e+(window.mapPreventValue&&window.mapPreventValue["isDetailWebPrevent"+window.mapPreventValue.index]?"&"+window.mapPreventValue.params+"&"+window.mapPreventValue.params1:""),type:"get",dataType:"jsonp",jsonp:"callbackparam",success:function(e){1==e.success?($p.deleteLcodeFromCookie(window.code),e.t&&"06"!=e.t.resultCode?layer.msg(e.t.resultMsg,{shift:0,time:800},function(){t(e)}):t(e)):e&&"40051"==e.resultCode?(layer.open({type:1,skin:"hbxs-serveInfo-layer-style-1",closeBtn:0,anim:2,title:!1,shadeClose:!0,area:["435px","234px"],move:!1,content:$(".realNameAuthentication-div")}),$("#realNameAuthentication-btn").on("click",function(){var e=window.location.href,t=__detailConfig.getApiPath("activityUrl")+"consumption_coupon/authentication.html?ru="+encodeURIComponent(e);window.location.href=t}),$(".realNameAuthentication-div-closed").on("click",function(){layer.closeAll()})):"10027"==e.resultCode||"10029"==e.resultCode?(layer.msg(e.resultMsg),setTimeout(function(){location.reload()},1500)):layer.msg(e.resultMsg)},error:o})},getLcodeFromCookie:function(e){var t=n.getCookie("Lcode_info");try{if(t){t=decodeURIComponent(t);var o=JSON.parse(t);if(o[e.toString()])return o[e.toString()]}return null}catch(e){alert("您的浏览器版本过低，请升级浏览器后重试")}},deleteLcodeFromCookie:function(e){var t=n.getCookie("Lcode_info");if(t){t=decodeURIComponent(t);var o=JSON.parse(t);o[e.toString()]&&delete o[e.toString()],n.addCookie("Lcode_info",JSON.stringify(o))}},showEnterprisePurchaseTip:function(){if(passport&&passport.isLogin&&passport.isLogin()){var e=n.getItemDomain()+'/batch/get?params=[{"uri":"/batch/openapi/goods/smb/tag/mget/B00001","param":{"code":'+code+"}}]";$.ajax({url:e,type:"GET",dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_smb_mget",success:function(e){if(200==e.status){var t=e.data[0].result[code]||!1;t&&$("#span_product_name").prepend('<i class="product_name_tip"></i>')}},error:function(e,t,o){}})}else $p.isBusinessDetail&&$("#span_product_name").prepend('<i class="product_name_tip"></i>')},detailPagehJSONP:function(){$.ajax({url:__detailConfig.getApiPath("searchUrl")+"/search/v2/detailPagehJSONP",data:{key:"undefined"!=typeof newProductInfoesJson&&newProductInfoesJson.keyWords&&newProductInfoesJson.keyWords.split(";").join(",")||"",page:1,pageSize:10,isEnterprise:$p.isBusinessDetail},type:"GET",dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_detailPagehJSONP",success:function(e){if(200==e.status&&e.data){var t=e.data,o="";"string"==typeof e.data&&(t=JSON.parse(t)),$("body").append('<div id="seoHiddenWrap" style="display: none;"></div>');for(var a=0,i=t.clubDetail.length;a<i;a++)o+='<a href="'+t.clubDetail[a].pageDetail+'">'+t.clubDetail[a].subject+"</a>";for(var s=0,n=t.goodDetail.length;s<n;s++)o+='<a href="'+t.goodDetail[s].pageDetail+'">'+t.goodDetail[s].goodName+"</a>";$("#seoHiddenWrap").html(o)}},error:function(){}})},getAdadvertisingDetail:function(e,t,o){$.ajax({url:n.getItemDomain()+"/adadvertising",type:"get",dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_getActivityMsg",data:{adId:e||"",key:"opdp"},success:t,error:o})},offlineGoodsRecommend:function(){if(0!=$p.baseInfo.marketable)return!1;$(".business-staff-container").hide(),$(".goods-offline-recommend").show();var e=n.getItemDomain()+"/batch/openapi/goods/recommend/mgetDetail/B00106";$.ajax({url:e,data:{terminal:1,scenario:"opdp",uidType:"IT0000009",uid:window.code},type:"GET",dataType:"jsonp",jsonp:"jsonpCallback",jsonpCallback:"jQueryJSONP_recommend_mgetDetail",success:function(e){$(".toAppLoad").css("marginLeft","17px");var t=e.result.recommedResult.recommList,o=e.result.recommedResult.returnType;t.length||($(".business-staff-container:not(.hidden)").show(),$(".goods-offline-recommend").hide());var a=$(".recommend-list-wrap ul"),i=$("#div_product_dec"),s=$(".goods-offline-recommend .goods-offline"),n=$(".recommend-list-wrap .list-content");if("product"==o){for(var r=e.result.goodsDetails,c=e.result.recommedResult.position,l=0;l<t.length&&!(l>0);l++){var d=r[t[l]];if(d){var p=d.detail.name,u=d.detail.brief||"",f=d.detail.url.pc,b=d.detail.adPicture?d.detail.adPicture:d.detail.thumbnail,m=d.price.P_C.C_1.P_0.DV.V,g=t[l],h=c[l],y='<li><a target="_blank" href="'+f+'" latag="latag_pc_detailOfflineGoods_recommendItem_'+l+"_"+h.flag+"_"+g+'"><i class="icon-hot"></i><div class="img-wrap"><img src="'+b+'"/></div><div class="goodsInfo-wrap"><p class="goods-name" title="'+p+'">'+p+'</p><div class="goods-brief" title="'+u+'">'+u+'</div><p class="price">￥<span>'+(parseFloat(m)?parseFloat(m):m)+'</span></p><p class="go-item">去看看</p></div></a></li>';a.append(y)}}$(".recommend-list-wrap").show(),22==i.height()&&s.css({margin:"27px 16px"})}else"ad"==o&&$p.getAdadvertisingDetail(t[0],function(e){var t,o,a=e.data[0];if(200==e.status&&"{}"!=JSON.stringify(a)){for(var r in a)t=a[r];o="string"==typeof t?JSON.parse(t):t;for(var c,l=0,d=o.adadvertising,p=o.contentList;l<p.length;l++)if(10==p[l].adType){c=p[l];break}try{var u='<a class="list-content-ad" latag="latag_pc_detail_offlineAdadvertising_recommend_'+c.link+"_"+window.code+'" target='+(d.openMode?"_blank":"")+' href="'+c.link+'"><img src="'+c.imgUrl+'"></a>';n.empty().append(u),$(".recommend-list-wrap").show(),22==i.height()&&s.css({margin:"27px 16px"})}catch(e){$(".business-staff-container:not(.hidden)").show(),$(".goods-offline-recommend").hide()}}else $(".business-staff-container:not(.hidden)").show(),$(".goods-offline-recommend").hide()})},error:function(e,t,o){$(".toAppLoad").css("marginLeft","17px"),console.log(t),$(".business-staff-container:not(.hidden)").show(),$(".goods-offline-recommend").hide()}})},loadGoodsRecommend:function(){if(0==$p.baseInfo.marketable)return!1;$(".cnxh-wrap").show();var e=n.getItemDomain()+"/batch/openapi/goods/recommend/mgetDetail/B00106";$.ajax({url:e,data:{terminal:1,source:"S0001001",scenario:$p.isBusinessDetail?"bpdp":"pdp",uidType2:"IT0000009",uid2:window.code,uidType:passport&&passport.isLogin()?"":"IT0000008",uid:passport&&passport.isLogin()?"":n.getCookie("LA_C_C_Id"),time:new Date-0},type:"GET",dataType:"jsonp",jsonp:"jsonpCallback",jsonpCallback:"jQueryJSONP_recommend_mgetDetail",success:function(e){var t=e.result.recommedResult.recommList;t.length||$(".cnxh-wrap").hide();for(var o=e.result.recommedResult.position,a=e.result.goodsDetails,i=$("#image-wrap .swiper-wrapper"),s=0;s<t.length;s++)if(a[t[s]]){var n=a[t[s]].detail.name,r=a[t[s]].detail.url.pc,c=a[t[s]].detail.adPicture?a[t[s]].detail.adPicture:a[t[s]].detail.thumbnail,l=a[t[s]].detail.brief,d=a[t[s]].price.P_C.C_1.P_0.DV.V,p=t[s],u=o[s],f='<div class="swiper-slide" latag = "latag_pc_detail_recommendItem_'+s+"_"+u.flag+"_"+p+'"><a target="_blank" href="'+r+'" flag="'+u.flag+'" class="image-detail"><div class="pro-img-wrap"><img class="pro-img" src="'+c+'"></div><p class="pro-name" title="'+n+'">'+n+'</p><p class="pro-desc" title="'+(l?l:"")+'">'+(l?l:"")+'</p><p class="pro-price-box"><i class="currency-symbol">¥</i><span class="pro-price">'+(parseFloat(d)?parseFloat(d):d)+"</span></p></a></div>";i.append(f)}$(".image-box").show();var b=new Swiper(".swiper-container",{prevButton:".swiper-button-prev",nextButton:".swiper-button-next",slidesPerView:5,loopedSlides:$(".swiper-slide").length,slidesPerGroup:5,observer:!0,observeParents:!0,noSwiping:!0});$(".swiper-button-prev, .swiper-button-next, .image-wrap").on("mouseover",function(){b.stopAutoplay()}),$(".swiper-button-prev, .swiper-button-next, .image-wrap").on("mouseout",function(){b.startAutoplay()})},error:function(e,t,o){console.log(t),$(".cnxh-wrap").hide()}})},loadLiveLogo:function(){var e=n.queryString("roomid");$.ajax({url:__detailConfig.getApiPath("zb")+"api/v1/product/live_room",data:{productId:code},type:"GET",dataType:"jsonp",jsonp:"callback",jsonpCallback:"jQueryJSONP_live_room",success:function(t){if(200==t.status&&t.data){var o=t.data,a=new RegExp(/^(84|85|86)$/).test($p.baseInfo.productGroupNo);if(a)var i='<a class="zbLogo isZbThink" href="'+o.url+'" target="_blank" latag = "latag_pc_detail_top_直播_'+code+"_"+o.url+'"><div class="zbLoginMain"><img src="https://p2.lefile.cn/product/adminweb/2020/09/21/384d6c2f-2b78-46c2-8496-cee20141c233.gif" /><p class="zbLogoInfo">直播中</p></div></a>';else var i='<a class="zbLogo" href="'+o.url+'" target="_blank" latag = "latag_pc_detail_top_直播_'+code+"_"+o.url+'"><div class="zbLoginMain"><img src="https://p2.lefile.cn/product/adminweb/2020/09/21/384d6c2f-2b78-46c2-8496-cee20141c233.gif" /><p class="zbLogoInfo">直播中</p></div></a>';$(".detail .nav").before(i),$(".zbLogo").delegate(".zbLoginMain","mouseenter mouseleave",function(e){"mouseenter"==e.type?$(".zbLoginMain .zbLogoInfo").addClass("zbLogoInfoHigh"):"mouseleave"==e.type&&$(".zbLoginMain .zbLogoInfo").removeClass("zbLogoInfoHigh")}),e&&$(".zbLogo").attr({href:__detailConfig.getApiPath("zb")+"?roomid="+e,latag:"latag_pc_detail_top_直播_"+code+"_"+__detailConfig.getApiPath("zb")+"?roomid="+e}),$(window).on("scroll",function(){if(a){var e=$(window).scrollTop();$(window).height();e<74?$(".zbLogo").css({top:119-e+"px"}):$(".zbLogo").css({top:"45px"})}else"fixed"==$(".header_2018").css("position")?$(".zbLogo").addClass("zbLogoFixed"):$(".zbLogo").removeClass("zbLogoFixed")})}},error:function(){}})},loadServiceIcon:function(e){$.ajax({url:__detailConfig.getApiPath("openUrl")+"/goods/mget/tags",data:{goodsCode:code},type:"GET",dataType:"jsonp",jsonp:"jsonpCallback",jsonpCallback:"jQueryJSONP_mget_tags",success:function(t){if(200==t.status&&t.result){var o=t.result;e&&e(o)}},error:function(){}})},checkStringRisk:function(e,t){var o=$p.isBusinessDetail?"50690e2e-bf8e-4aeb-a8b1-7a03537d1927":window.passport.ticket||"e40e7004-4c8a-4963-8564-31271a8337d8";$.ajax({url:__detailConfig.getApiPath("jfUrl")+"/risk/textReview.jhtml",data:{sts:o,text:e},dataType:"jsonp",jsonp:"callback",timeout:4e3,success:function(e){0==e.ret&&0==e.isLegal?t&&t(!0):t&&t(!1)},error:function(e){console.log("err",e),t&&t(!1,"网络异常，请稍后重试")}})},showWinPicDecoration:function(){try{$.ajax({url:n.getItemDomain()+"/cache/time",dataType:"jsonp",jsonp:"callback",success:function(e){var t=1e3*e.curTime,o=new Date("2023/01/06 18:00:00")-0,a=new Date("2023/02/14 00:00:00")-0;t>=o&&t<=a&&$p.loadGuangGaoDialogScript(__detailConfig.getApiPath("windowAdvert")+"/lenovo_detail_front/winpic_material.js",function(){
var e="//p3.lefile.cn/fes/cms/2023/01/06/1ybgm1ug9x04edlg9267mwmnasqfza173302.png",t=winpic_material,o="";if(t&&t.length>0)for(var a=0;a<t.length;a++){var i=t[a];if(i==$p.baseInfo.materialNumber){o=e;break}}o&&($("#winpic").wrap('<div id="winpic-wrap" style="positon:relative;"></div>'),$("#winpic-wrap").append('<img style="position:absolute;left:0;right:0;height:520px;width:520px" src="'+o+'"/>'))})}})}catch(e){console.log("error",e)}},loginToPage:function(){try{var e,t=window.location.href;e=$p.isBusinessDetail?__detailConfig.getApiPath("enterprisePurchaseLogin")+"&ru="+encodeURIComponent(t):__detailConfig.getApiPath("login")+"&ru="+encodeURIComponent(t),window.location.href=e}catch(e){passport&&(passport.show&&passport.show(),passport.loginRedirect=window.location.href)}},enterpriseLoop:function(e){var t="";return t=$p.isBusinessDetail?__detailConfig.getApiPath("enterpriseUrl")+"/":e},debug:!0};try{var r=n.queryString("__debug__");r&&(n.isDebug=!0)}catch(e){console.log("trigger error when debug")}1==n.isRunInNode()&&module&&module.exports?module.exports={PDUtil:n,PDBase:e}:(window.PDUtil=n,window.PDBase=e)}();
//# sourceMappingURL=../debugmaps/pdbase.js.map
